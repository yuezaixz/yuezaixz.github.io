<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="å¤§èƒƒå´çš„é—²è¯å” å—‘">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="å¤§èƒƒå´çš„é—²è¯å” å—‘">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å¤§èƒƒå´çš„é—²è¯å” å—‘">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> å¤§èƒƒå´çš„é—²è¯å” å—‘ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">å¤§èƒƒå´çš„é—²è¯å” å—‘</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">æ‰¯æ‰¯æŠ€æœ¯ï¼Œå” å” é—²è¯ äº¤æµemail-xiao303178394@gmail.com</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-é¦–é¡µ">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            menu.é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-æ–‡ç« ">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            menu.æ–‡ç« 
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2021/06/09/åœ¨ä½ çš„APPä¸­ä½¿ç”¨æ‘„åƒå¤´æ¥è‡ªåŠ¨å¡«å……/" itemprop="url">
                  åœ¨ä½ çš„APPä¸­ä½¿ç”¨æ‘„åƒå¤´æ¥è‡ªåŠ¨å¡«å……
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2021-06-09T11:59:20+08:00" content="2021-06-09">
              2021-06-09
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="WWDC21-10276-åœ¨ä½ çš„APPä¸­ä½¿ç”¨æ‘„åƒå¤´æ¥è‡ªåŠ¨å¡«å……"><a href="#WWDC21-10276-åœ¨ä½ çš„APPä¸­ä½¿ç”¨æ‘„åƒå¤´æ¥è‡ªåŠ¨å¡«å……" class="headerlink" title="WWDC21 10276 - åœ¨ä½ çš„APPä¸­ä½¿ç”¨æ‘„åƒå¤´æ¥è‡ªåŠ¨å¡«å……"></a>WWDC21 10276 - åœ¨ä½ çš„APPä¸­ä½¿ç”¨æ‘„åƒå¤´æ¥è‡ªåŠ¨å¡«å……</h1><h2 id="å¼•å­"><a href="#å¼•å­" class="headerlink" title="å¼•å­"></a>å¼•å­</h2><p>WWDC21çš„KeyNoteï¼ŒLive Textç®—å°å¹´ä¸­çš„ä¸€ä¸ªäº®ç‚¹äº†ã€‚æ¼”ç¤ºäº†ç›´æ¥é€šè¿‡æ‘„åƒå¤´å¿«é€Ÿæå–ã€å¡«å……ä¿¡æ¯ï¼Œç”šè‡³å¯ä»¥ç›´æ¥é€šè¿‡å›¾ç‰‡ä¸­çš„æ–‡å­—ç´¢å¼•å›¾ç‰‡ï¼ˆæš‚æ—¶æ²¡è¯•éªŒæˆåŠŸï¼Œå¯èƒ½ç›¸å†Œè¿˜æ²¡ç´¢å¼•å®Œæˆï¼‰ã€‚<br>ä½†å®é™…ä½“éªŒAPIåè¿˜æ˜¯ç•¥å¾®é—æ†¾ï¼Œä»–åªèƒ½ä»æ‘„åƒå¤´è¾“å…¥ï¼Œå¦‚æœæˆ‘æ˜¯ä¸€å¼ æˆªå±ï¼Œæˆ–è€…æ˜¯ä¸€å¼ ä¹‹å‰çš„è€ç…§ç‰‡ï¼Œåˆæˆ–è€…æ˜¯åˆ«äººä¼ ç»™æˆ‘çš„å›¾ç‰‡ä¿¡æ¯ï¼Œéƒ½æ²¡æ³•ç”¨åˆ°è¿™ä¸ªæ–¹ä¾¿çš„åŠŸèƒ½äº†ã€‚</p>
<p>è¯ä¸å¤šè¯´ï¼Œæ¥çœ‹æ­£æ–‡ã€‚</p>
<h2 id="æ–°ç‰¹æ€§æ€»è¿°"><a href="#æ–°ç‰¹æ€§æ€»è¿°" class="headerlink" title="æ–°ç‰¹æ€§æ€»è¿°"></a>æ–°ç‰¹æ€§æ€»è¿°</h2><p>è¿™æ˜¯ä¸€é¡¹æ–°åŠŸèƒ½ï¼Œè®©æ‚¨é€šè¿‡ä½¿ç”¨ç›¸æœºï¼Œè€Œä¸æ˜¯é€šè¿‡é”®ç›˜æˆ–è¯­éŸ³è¯†åˆ«æ¥è¾“å…¥æ–‡æœ¬ã€‚æƒ³è±¡ä¸‹æˆ‘ä»¬åœ¨åšæ—…è¡Œçš„æ¸¸è®°ï¼Œé‚£æ—…è¡Œä¸­ä¼šé‡åˆ°å¾ˆå¤šä¿¡æ¯ï¼Œæ¯”å¦‚é…’åº—ä¿¡æ¯ã€é¤å…ã€æ—…è¡Œå›¢ä¿¡æ¯ã€äº¤é€šã€å‘ç¥¨ç­‰ï¼Œè¿™äº›éƒ½æœ‰å¾ˆå¤šçš„æ–‡å­—å†…å®¹ã€‚ä½†åœ¨iOS15çš„è¿™ä¸ªæ–°åŠŸèƒ½ï¼Œå¯ä»¥è®©æˆ‘ä»¬å†å‘¨å›´ä¸–ç•Œä¸­æ•æ‰æ–‡æœ¬ã€‚</p>
<h3 id="UITextField"><a href="#UITextField" class="headerlink" title="UITextField"></a>UITextField</h3><p>éå¸¸å¹¸è¿ï¼Œå¼€å‘è€…å¹¶ä¸ç”¨åšä»»ä½•é€‚é…ï¼Œä¹‹å‰ç”¨åˆ°UITextFieldçš„åœ°æ–¹ï¼Œç‚¹å‡»è¾“å…¥æ¡†ä¸¤ä¸‹ï¼Œæˆ‘ä¼šåœ¨ç¼–è¾‘èœå•ä¸­çœ‹åˆ°ä¸€ä¸ªæ–°é€‰é¡¹ ã€ŒText From Cameraã€ï¼Œç”¨äºä½¿ç”¨æ¥è‡ªç›¸æœºçš„æ–‡æœ¬ã€‚</p>
<p><img src="http://image.runmaf.com/2021-06-09-16231986874790.jpg" alt=""></p>
<p>ä¸€æ—¦å¯åŠ¨ï¼Œç›¸æœºä¼šç«‹å³è¯†åˆ«æ–‡æ¡£ä¸Šçš„è¿™ç»„æ–‡æœ¬ã€‚æ˜¯ä¸æ˜¯éå¸¸æ–¹ä¾¿ï¼Œè€Œä¸”ä»–çš„å‡†ç¡®åº¦åœ¨æˆ‘ä½“éªŒäº†ä¸€å¤©åï¼Œè§‰å¾—è¿˜æ˜¯éå¸¸é«˜çš„ã€‚</p>
<p><img src="http://image.runmaf.com/2021-06-09-IMG_3123.png" alt="IMG_3123"></p>
<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ç‚¹å‡»æ’å…¥ï¼Œå°±ä¼šæŠŠèšç„¦æ¡†ä¸­çš„å†…å®¹è‡ªåŠ¨å¡«å……ã€‚ä½†å¦‚æœæˆ‘ä»¬å¹¶ä¸éœ€è¦è¯†åˆ«åˆ°çš„æ‰€æœ‰å†…å®¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç‚¹å³ä¸‹è§’çš„æå–æŒ‰é’®ï¼Œè¿™æ—¶å€™ç³»ç»Ÿä¼šå¸®æˆ‘ä»¬å†»ç»“ä»–ä»¬ã€‚<br><img src="http://image.runmaf.com/2021-06-09-IMG_3A71965AFDE1-1.jpeg" alt="IMG_3A71965AFDE1-1"></p>
<p>è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥åƒæ“ä½œæ–‡æœ¬ä¸€æ ·çš„æ“ä½œä»–ä»¬äº†ã€‚é€‰ä¸­ä½ éœ€è¦çš„å†…å®¹ï¼Œç‚¹å‡»æ’å…¥ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ã€‚æ˜¯ä¸æ˜¯å¾ˆå®Œç¾ï¼Œæˆ‘ä»¬ä¸€è¡Œä»£ç éƒ½è¿˜æ²¡å†™äº†ï¼Œå°±å®ç°äº†è¿™ä¹ˆç‰›é€¼çš„åŠŸèƒ½ï¼Œè‹¹æœçˆ¹ğŸ‚ğŸºã€‚</p>
<p><img src="http://image.runmaf.com/2021-06-09-IMG_589CBD8D3CBF-1.jpeg" alt="IMG_589CBD8D3CBF-1"></p>
<h3 id="è¿‡æ»¤å†…å®¹"><a href="#è¿‡æ»¤å†…å®¹" class="headerlink" title="è¿‡æ»¤å†…å®¹"></a>è¿‡æ»¤å†…å®¹</h3><p>çœ‹å®Œä¸Šä¸€èŠ‚åï¼Œä½ å¯èƒ½ä¼šè§‰å¾—è¿™éå¸¸æ£’ï¼Œä½†æ˜¯ä»”ç»†æƒ³ä¸€ä¸‹ï¼Œå®é™…ä½¿ç”¨æ˜¯ä¸æ˜¯è¦ç»å¸¸çš„å»é€‰ä¸­ç›¸åº”çš„æ–‡æœ¬ï¼Ÿ<br>è¿™æ—¶å€™å°±è¦è¯´è¿‡æ»¤å†…å®¹è¿™ä¸ªåŠŸèƒ½äº†ï¼Œç³»ç»Ÿä¸ºæˆ‘ä»¬è§£å†³äº†ä¸€äº›å¯ä»¥è‡ªåŠ¨è¯†åˆ«çš„åœºæ™¯ã€‚<br>å‡è®¾æˆ‘ä»¬è¦æå–åœ°å€ã€ç”µè¯ã€é‚®ç®±ï¼Œå¦‚æœç”¨ä¸Šä¸€èŠ‚æåˆ°çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼šè¯†åˆ«åˆ°ä¸€å †æ²¡ç”¨çš„å†…å®¹ã€‚</p>
<p><img src="http://image.runmaf.com/2021-06-09-IMG_3117.png" alt="IMG_3117"></p>
<p>ç„¶åä½ ä¸å¾—ä¸æå–ä¸€å †å°å°çš„æ–‡å­—ï¼Œç„¶åå°å¿ƒç¿¼ç¿¼çš„å»é€‰ä¸­ã€‚<br>è¿‡æ»¤æ˜¯é€šè¿‡ä½¿ç”¨ TextContentType å’Œ KeyboardType å±æ€§å®Œæˆçš„ï¼Œå‡ è¡Œä»£ç å°±å¸®æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">addressTextField.keyboardType = .namePhonePad</div><div class="line">addressTextField.autocorrectionType = .yes</div><div class="line">addressTextField.textContentType = .fullStreetAddress</div></pre></td></tr></table></figure>
<p>å®é™…ä¸Šå‡ å¹´å‰å…³äºAutofillçš„Sessionå·²ç»æè¿‡äº†æ ¹æ®å†…å®¹çš„Autofilläº†ï¼Œè¿™é‡Œä¸åšå±•å¼€ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹<br><a href="https://developer.apple.com/videos/play/wwdc2020/10115" target="_blank" rel="external">AutoFill everywhere</a><br><a href="https://developer.apple.com/videos/play/wwdc2018/204" target="_blank" rel="external">Automatic Strong Passwords and Security Code AutoFill</a><br><a href="https://developer.apple.com/videos/play/wwdc2017/242" target="_blank" rel="external">The Keys to a Better Text Input Experience</a></p>
<p>å¯ä»¥çœ‹åˆ°ç¼–è¾‘èœå•çš„å†…å®¹å·²ç»å˜äº†<br><img src="http://image.runmaf.com/2021-06-09-16231998163167.jpg" alt=""></p>
<p>ç‚¹å‡»å<br><img src="http://image.runmaf.com/2021-06-09-IMG_3119.png" alt="IMG_3119"><br>å®åœ¨æ˜¯å¤ªæ–¹ä¾¿äº†ã€‚</p>
<p>å›åˆ°TextContentTypeï¼ŒTextContentTypeå¯ä»¥æ˜¯è¿™äº›ä¸åŒå€¼ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UITextContentType</span> </span>&#123;   </div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> name: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> namePrefix: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> givenName: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> middleName: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> familyName: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> nameSuffix: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> nickname: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> jobTitle: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> organizationName: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> location: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> fullStreetAddress: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> streetAddressLine1: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> streetAddressLine2: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> addressCity: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> addressState: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> addressCityAndState: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> sublocality: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> countryName: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> postalCode: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> telephoneNumber: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> emailAddress: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> <span class="type">URL</span>: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> creditCardNumber: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> username: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> password: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> newPassword: <span class="type">UITextContentType</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> oneTimeCode: <span class="type">UITextContentType</span></div><div class="line">    <span class="comment">/// iOS15å¼€å§‹æ”¯æŒ</span></div><div class="line">    <span class="comment">/// Parcel tracking numbers such as "FedEx 8602 9191 3550", "1Z50T0536891664106", and "729445720428778"</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> shipmentTrackingNumber: <span class="type">UITextContentType</span></div><div class="line">    <span class="comment">/// Airline flight numbers such as "CZ # 1234", "AA212", and "SW Flight 573"</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> flightNumber: <span class="type">UITextContentType</span></div><div class="line">    <span class="comment">/// Dates, times, or durations such as "7-3-2021" or "This Saturday", "12:30", and "10-11am", respectively</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">let</span> dateTime: <span class="type">UITextContentType</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯ç›¸æœºä¸ä¼šè¿‡æ»¤æ‰€æœ‰è¿™äº›ç±»å‹ï¼Œå®ƒåªä¼šè¿‡æ»¤è¿™ä¸ƒä¸ªã€‚</p>
<p><img src="http://image.runmaf.com/2021-06-09-16232000724781.jpg" alt=""></p>
<p>å‰å››ä¸ª(ç”µè¯å·ç ã€å®Œæ•´è¡—é“åœ°å€ã€URL å’Œç”µå­é‚®ä»¶)ï¼Œå®ƒä»¬éƒ½å·²ç»å­˜åœ¨äºä»Šå¤©çš„iOSä¸­äº†ã€‚åœ¨iOS15ä¸­ï¼Œæˆ‘ä»¬æ–°å¢äº†ä¸‰ç§ç±»å‹ï¼šèˆªç­å·ã€è´§ä»¶è·Ÿè¸ªå·ä»¥åŠæ—¥æœŸã€æ—¶é—´å’ŒæŒç»­æ—¶é—´çš„ç»„åˆã€‚æ‚¨å¯ä»¥æƒ³è±¡èˆªç­å·å¯¹æ—…è¡Œåº”ç”¨ç¨‹åºæœ‰å¤šå¤§ç”¨å¤„ï¼Œæˆ–è€…è·Ÿè¸ªå·å¯¹åŒ…è£¹è·Ÿè¸ªåº”ç”¨ç¨‹åºæœ‰å¤šä¹ˆé…·ã€‚</p>
<p>PS. Sessionä¸­è¯´ autocorrectionTypeè¦å…³é—­ï¼Œä½†æˆ‘è¯•äº†è®¾ç½®æˆtrueä¹Ÿè¿˜æ˜¯èƒ½æ‰“å¼€ç›¸æœºçš„</p>
<p>ç°åœ¨ï¼Œå½“æˆ‘æ‰“å¼€ç›¸æœºæ—¶ï¼Œå®ƒå·§å¦™åœ°å¿½ç•¥äº†é™¤æˆ‘ä»¬æƒ³è¦çš„åœ°å€ä¿¡æ¯ä¹‹å¤–çš„æ‰€æœ‰å…¶ä»–æ–‡æœ¬ã€‚è®©æˆ‘ä»¬ç”¨ç”µè¯å’Œé‚®ç®±å†è¯•è¯•ã€‚</p>
<p><img src="http://image.runmaf.com/2021-06-09-16232002226793.jpg" alt=""><br><img src="http://image.runmaf.com/2021-06-09-16232002327498.jpg" alt=""></p>
<p>å¾ˆå¥½ï¼Œè¿˜æ˜¯å¯ä»¥è·å–åˆ°ç‰¹å®šä¿¡æ¯ã€‚ä¸ç”¨å»æ•²å‡»å±å¹•æ»‘åŠ¨é€‰ä¸­äº†ï¼Œç³»ç»Ÿè‡ªåŠ¨çš„å¸®æˆ‘ä»¬è¿‡æ»¤äº†å†…å®¹ã€‚</p>
<h3 id="å¦‚ä½•è‡ªå·±å”¤èµ·-input-from-camera-å‘¢ï¼Ÿ"><a href="#å¦‚ä½•è‡ªå·±å”¤èµ·-input-from-camera-å‘¢ï¼Ÿ" class="headerlink" title="å¦‚ä½•è‡ªå·±å”¤èµ· input from camera å‘¢ï¼Ÿ"></a>å¦‚ä½•è‡ªå·±å”¤èµ· input from camera å‘¢ï¼Ÿ</h3><p>å¦‚æœæ‚¨æƒ³è¦è‡ªå®šä¹‰ä¸€ä¸ªæ‰“å¼€ç›¸æœºè¾“å…¥çš„æŒ‰é’®ï¼Œå¯ä»¥ä½¿ç”¨ UIAction.captureTextFromCamera ã€‚ä½¿ç”¨ captureTextFromCamera å·¥å‚æ–¹æ³•ï¼ˆiOS15ä¸­çš„æ–°æ–¹æ³•ï¼‰åˆ›å»ºä¸€ä¸ª UIActionã€‚è¯¥æ“ä½œçŸ¥é“å¦‚ä½•å¯åŠ¨ç›¸æœºï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»–æ·»åŠ åˆ°ä¸€ä¸ªèœå•ï¼Œä¹Ÿå¯ä»¥ç”¨ä»–æ¥åˆå§‹åŒ–UIButtonã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// ç”¨æ¥åˆå§‹åŒ–</span></div><div class="line"><span class="keyword">let</span> textFromCamera = <span class="type">UIAction</span>.captureTextFromCamera(responder: contentLabel, identifier: <span class="literal">nil</span>)</div><div class="line">        <span class="keyword">let</span> cameraButton = <span class="type">UIButton</span>(primaryAction: textFromCamera)</div><div class="line">        cameraButton.frame = cameraButtonView.bounds</div><div class="line">        cameraButton.setTitle(<span class="string">""</span>, <span class="keyword">for</span>: .normal)</div><div class="line">        cameraButton.setImage(.<span class="keyword">init</span>(systemName: <span class="string">"camera.fill"</span>), <span class="keyword">for</span>: .normal)</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// æ·»åŠ åˆ°UIMenu</span></div><div class="line"><span class="keyword">let</span> textFromCamera = <span class="type">UIAction</span>.captureTextFromCamera(responder: <span class="keyword">self</span>.notes, identifier: <span class="literal">nil</span>)</div><div class="line"></div><div class="line"><span class="keyword">let</span> choosePhotoOrVideo = <span class="type">UIAction</span>(â€¦)</div><div class="line"><span class="keyword">let</span> takePhotoOrVideo = <span class="type">UIAction</span>(â€¦)</div><div class="line"><span class="keyword">let</span> scanDocuments = <span class="type">UIAction</span>(â€¦)</div><div class="line"></div><div class="line"><span class="keyword">let</span> cameraMenu = <span class="type">UIMenu</span>(children: [choosePhotoOrVideo, takePhotoOrVideo, scanDocuments, textFromCamera])</div><div class="line"></div><div class="line"><span class="keyword">let</span> menuToolbarItem = <span class="type">UIBarButtonItem</span>(title: <span class="literal">nil</span>, image: <span class="type">UIImage</span>(systemName: <span class="string">"camera.badge.ellipsis"</span>), primaryAction: <span class="literal">nil</span>, menu: cameraMenu)</div></pre></td></tr></table></figure>
<p>UIActionçš„å“åº”è€…å¿…é¡»æ˜¯ä¸€ä¸ªUIKeyInputçš„UIResponderå®ç°ç±»ï¼ˆUITextField<br>UITextViewï¼‰ã€‚</p>
<h3 id="ä¸‡ç‰©ï¼ˆUIResponderï¼‰çš†å¯æ¥å—"><a href="#ä¸‡ç‰©ï¼ˆUIResponderï¼‰çš†å¯æ¥å—" class="headerlink" title="ä¸‡ç‰©ï¼ˆUIResponderï¼‰çš†å¯æ¥å—"></a>ä¸‡ç‰©ï¼ˆUIResponderï¼‰çš†å¯æ¥å—</h3><p>ç«Ÿç„¶å®ç°UIActionå°±èƒ½æ¥å—ç›¸æœºè¾“å…¥çš„æ–‡æœ¬ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥è®©å…¶ä»–UIKitæ§ä»¶åŠè‡ªå®šä¹‰æ§ä»¶éƒ½æ¥æ”¶ç›¸æœºè¾“å…¥çš„æ–‡æœ¬äº†ã€‚</p>
<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦è®©UILabelå®ç°ï¼Œé‚£ä»¬ç›´æ¥æ‰©å±•ä»–å®ç°UIKeyInputåè®®ï¼Œå¹¶å®ç°å‡ ä¸ªæ–¹æ³•å³å¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UILabel</span>: <span class="title">UIKeyInput</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">var</span> hasText: <span class="type">Bool</span> &#123;</div><div class="line">        text != <span class="literal">nil</span> &amp;&amp; text!.<span class="built_in">count</span> &gt; <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">/// camera inputä¼šé€šè¿‡è¿™ä¸ªé’©å­æ–¹æ³•ä¼ é€’è¿›æ¥ï¼Œå…·ä½“æ€ä¹ˆç”¨éƒ½åœ¨è¿™å®ç°äº†ã€‚</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">insertText</span><span class="params">(<span class="number">_</span> text: String)</span></span> &#123;</div><div class="line">        <span class="keyword">self</span>.text = text</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">deleteBackward</span><span class="params">()</span></span> &#123; &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”šè‡³å¯ä»¥è®©UIImageéƒ½æ¥æ”¶è¿™ä¸ªè¾“å…¥æ¥èåˆå›¾ç‰‡å’Œæ–‡æœ¬ã€‚æ¯”å¦‚ç§€ç§€çš„æ–‡å­—åŠŸèƒ½æ˜¯å¦å¯ä»¥ç”¨è¿™ç§æ–¹å¼è¾“å…¥å‘¢ï¼Ÿç»“åˆçš„æœ‰ç‚¹å‹‰å¼ºï¼Œåªæ˜¯å‘æ•£ä¸‹ã€‚</p>
<h2 id="ç¼ºé™·"><a href="#ç¼ºé™·" class="headerlink" title="ç¼ºé™·"></a>ç¼ºé™·</h2><ul>
<li>æˆ‘æ²¡æ‰¾åˆ°UITextFieldå¦‚ä½•å…³é—­è¿™ä¸ªç‰¹æ€§çš„æ–¹æ³•ï¼ŒautocorrectionTypeä¸ºtrue ä¸€æ ·è¿˜æ˜¯ä¼šæ˜¾ç¤ºã€‚å’¨è¯¢äº†è‹¹æœå·¥ç¨‹å¸ˆï¼Œè¿˜æ²¡å›å¤</li>
<li>æ²¡æ³•ä»å›¾ç‰‡è¯»å–è¾“å…¥ï¼Œå’¨è¯¢äº†è‹¹æœå·¥ç¨‹å¸ˆï¼Œä»Šå¹´ä¸ä¼šæ”¯æŒï¼Œä»¥åå¯èƒ½ä¼š</li>
<li>ä¸æ”¯æŒæ­£åˆ™ç­‰è‡ªå·±å»è¿‡æ»¤ä¿¡æ¯</li>
<li>æš‚æ²¡æƒ³åˆ°æ›´å¤šäº†</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul>
<li>UITextFieldå’ŒUITextViewä¸ç”¨é€‚é…å³å¯æ‹¥æœ‰è¯¥ç‰¹æ€§</li>
<li>ä¹Ÿå¯ä»¥ä¸»åŠ¨å”¤èµ·ç›¸æœºè¾“å…¥åŠŸèƒ½</li>
<li>å¯ä»¥è®¾ç½®ä¿¡æ¯ç±»å‹è‡ªåŠ¨è¿‡æ»¤</li>
<li>å¯ä»¥è‡ªå®šä¹‰æ§ä»¶æ¥å—ç›¸æœºè¾“å…¥</li>
</ul>
<h2 id="ç›¸å…³Session"><a href="#ç›¸å…³Session" class="headerlink" title="ç›¸å…³Session"></a>ç›¸å…³Session</h2><ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2021/10276" target="_blank" rel="external">Use the camera for keyboard input in your app</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2020/10115" target="_blank" rel="external">AutoFill everywhere</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2018/204" target="_blank" rel="external">Automatic Strong Passwords and Security Code AutoFill</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2017/242" target="_blank" rel="external">The Keys to a Better Text Input Experience</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2020/06/17/HelloMetalLollllllllllllll/" itemprop="url">
                  Hello Metal
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2020-06-17T08:23:12+08:00" content="2020-06-17">
              2020-06-17
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>ä¸Šä¸€ç¯‡åˆ†æäº†OpenGL ES çš„æ¸²æŸ“æµç¨‹ï¼Œ<a href="http://blog.davidandty.com/2020/06/17/HelloOpenGLAndMetal/" target="_blank" rel="external">Hello OpenGL ES</a>ï¼Œæœ¬æ–‡æˆ‘ä»¬æ¥çœ‹çœ‹Metalã€‚</p>
</blockquote>
<p><strong>Metal</strong> æ˜¯ä¸€ä¸ªå’Œ OpenGL ES ç±»ä¼¼çš„é¢å‘åº•å±‚çš„å›¾å½¢ç¼–ç¨‹æ¥å£ï¼Œé€šè¿‡ä½¿ç”¨ç›¸å…³çš„ api å¯ä»¥ç›´æ¥æ“ä½œ GPUï¼Œ æ˜¯ iOS å¹³å°ç‹¬æœ‰çš„ï¼Œæ„å‘³ç€å®ƒä¸èƒ½åƒ OpenGL ES é‚£æ ·æ”¯æŒè·¨å¹³å°ï¼Œä½†æ˜¯å®ƒèƒ½æœ€å¤§çš„æŒ–æ˜è‹¹æœç§»åŠ¨è®¾å¤‡çš„ GPU èƒ½åŠ›ï¼Œè¿›è¡Œå¤æ‚çš„è¿ç®—ï¼Œåƒ Unity ç­‰æ¸¸æˆå¼•æ“éƒ½é€šè¿‡ Metal å¯¹ 3D èƒ½åŠ›è¿›è¡Œäº†ä¼˜åŒ–ï¼Œ App Store è¿˜æœ‰ç›¸åº”çš„è¿ç”¨ Metal æŠ€æœ¯çš„æ¸¸æˆä¸“é¢˜ã€‚</p>
<h2 id="æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹"><a href="#æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹" class="headerlink" title="æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹"></a>æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹</h2><p><a href="https://github.com/yuezaixz/DwGPUImageLearning" target="_blank" rel="external">æœ¬ä¾‹DEMOä»£ç ä»“åº“</a></p>
<h3 id="Metal-æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹"><a href="#Metal-æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹" class="headerlink" title="Metal æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹"></a>Metal æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹</h3><p>åŒæ ·ï¼Œè‹¹æœä¹Ÿé€šè¿‡MetalKitæä¾›äº†ä¸€äº›åˆ—æ–¹ä¾¿ä½¿ç”¨Metalçš„APIï¼Œæœ¬å®ä¾‹ä¸ºäº†å­¦ä¹ åº•å±‚æ¸²æŸ“æµç¨‹ï¼Œæ‰€ä»¥ä¸å¼•å…¥è¯¥åº“ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">// å¼•å…¥æœ€åŸºç¡€çš„Metalåº“</div><div class="line">import Metal</div></pre></td></tr></table></figure>
<h4 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><ul>
<li>ä¸€ä¸ª MTLDevice å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¯ä»¥æ‰§è¡ŒæŒ‡ä»¤çš„ GPUï¼ŒMTLDevice åè®®æä¾›äº†æŸ¥è¯¢è®¾å¤‡åŠŸèƒ½ã€åˆ›å»º Metal å…¶ä»–å¯¹è±¡ç­‰æ–¹æ³•ã€‚Metal æä¾›ç»™å¼€å‘è€…ä¸ GPU äº¤äº’çš„èƒ½åŠ›ã€‚è€Œè¿™èƒ½åŠ›ï¼Œåˆ™éœ€è¦ä¾èµ– MTLDevice æ¥å®ç°ã€‚</li>
<li>PipelineState-æ¸²æŸ“ç®¡çº¿ï¼Œå®ƒå°±å¥½æ¯”æ˜¯ CPU å’Œ GPU ç›´æ¥çš„ç®¡é“ï¼Œé€šè¿‡å®ƒæ¥é…ç½®è¿è¡Œåœ¨ GPU ä¸­çš„é¡¶ç‚¹å’Œæ®µç€è‰²å™¨ï¼Œå°±æ˜¯æˆ‘ä»¬å†™åœ¨ metal ä¸­çš„ç¼–è¯‘å¥½çš„ä»£ç ï¼Œå¤šä¸ª c++ å‡½æ•°çš„ç»„åˆï¼Œå®é™…å¼€å‘ä¼šå’Œ Device å’Œ Queue ä¸€èµ·åˆå§‹åŒ–å¹¶ä½œä¸ºå…¨å±€å¯¹è±¡ã€‚</li>
<li>åŒCAEAGLLayerï¼ŒMetalä¹Ÿæœ‰CAMetalLayerï¼Œä½¿å®ƒçš„ content æ˜¯ç”± Metal è¿›è¡Œæ¸²æŸ“çš„</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/// Metal æä¾›ç»™å¼€å‘è€…ä¸ GPU äº¤äº’çš„èƒ½åŠ›ã€‚è€Œè¿™èƒ½åŠ›ï¼Œåˆ™éœ€è¦ä¾èµ– MTLDevice æ¥å®ç°ã€‚</span></div><div class="line"><span class="keyword">var</span> device: <span class="type">MTLDevice</span>?</div><div class="line"></div><div class="line"><span class="comment">/// æ¸²æŸ“ç®¡çº¿</span></div><div class="line"><span class="keyword">var</span> pipelineState: <span class="type">MTLRenderPipelineState</span>!</div><div class="line"></div><div class="line"><span class="comment">// CAMetalLayer ç±»ï¼Œä½¿å®ƒçš„ content æ˜¯ç”± Metal è¿›è¡Œæ¸²æŸ“çš„</span></div><div class="line"><span class="keyword">var</span> metalLayer: <span class="type">CAMetalLayer</span> &#123;</div><div class="line">    <span class="keyword">return</span> layer <span class="keyword">as</span>! <span class="type">CAMetalLayer</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">override</span> <span class="class"><span class="keyword">class</span> <span class="title">var</span> <span class="title">layerClass</span>: <span class="title">AnyClass</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="type">CAMetalLayer</span>.<span class="keyword">self</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">commonInit</span><span class="params">()</span></span> &#123;</div><div class="line">    device = <span class="type">MTLCreateSystemDefaultDevice</span>()</div><div class="line">    </div><div class="line">    <span class="comment">// ä»Metalæ–‡ä»¶ä¸­åŠ è½½é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡æ®µç€è‰²å™¨ï¼Œæœ¬ä¾‹æ¯”è¾ƒç®€å•ï¼Œé¡¶ç‚¹ç€è‰²å™¨å°±æ˜¯ç®€å•çš„ä¼ é€’ç€è‰²å™¨ï¼Œç‰‡æ®µç€è‰²å™¨åªæ˜¯ç”¨çº¢è‰²ç€è‰²</span></div><div class="line">    <span class="keyword">let</span> library = device?.makeDefaultLibrary()</div><div class="line">    <span class="keyword">let</span> vertexFunction = library?.makeFunction(name: <span class="string">"vertexDrawShapeShader"</span>)</div><div class="line">    <span class="keyword">let</span> fragmentFunction = library?.makeFunction(name: <span class="string">"fragmentDrawShapeShader"</span>)</div><div class="line">    </div><div class="line">    <span class="comment">// æ¸²æŸ“ç®¡çº¿çŠ¶æ€</span></div><div class="line">    <span class="keyword">let</span> pipelineDescriptor = <span class="type">MTLRenderPipelineDescriptor</span>()</div><div class="line">    pipelineDescriptor.colorAttachments[<span class="number">0</span>].pixelFormat = metalLayer.pixelFormat</div><div class="line">    pipelineDescriptor.vertexFunction = vertexFunction</div><div class="line">    pipelineDescriptor.fragmentFunction = fragmentFunction</div><div class="line">    </div><div class="line">    <span class="comment">// åˆ›å»ºæ¸²æŸ“ç®¡çº¿</span></div><div class="line">    pipelineState = <span class="keyword">try</span>! device?.makeRenderPipelineState(descriptor: pipelineDescriptor)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æ¸²æŸ“"><a href="#æ¸²æŸ“" class="headerlink" title="æ¸²æŸ“"></a>æ¸²æŸ“</h4><ul>
<li>CommandBuffer-æ¸²æŸ“çš„æŒ‡ä»¤ï¼Œåˆ›å»ºPipelineStateæ˜¯æœ‰æ€§èƒ½æ¶ˆè€—çš„ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥è¿™ä¸ªå¯¹è±¡æ˜¯å¯ä»¥å¤ç”¨çš„ï¼Œä½†ä¸åŒçš„ CommandBuffer éƒ½å¯ä»¥ä½¿ç”¨å®ƒã€‚</li>
<li>commandQueue-æ¸²æŸ“æŒ‡ä»¤é˜Ÿåˆ—</li>
<li>renderPassDescriptor-æ¸²æŸ“è£…é¥°å™¨ï¼Œç”¨æ¥å®šä¹‰æ¸²æŸ“çš„å„ç§å±æ€§</li>
<li>renderCommandEncoder-æ¸²æŸ“ 3D ç¼–ç å™¨</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didMoveToWindow</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">super</span>.didMoveToWindow()</div><div class="line">    render()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">render</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> drawable = metalLayer.nextDrawable() <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">/// æ¸²æŸ“çš„æŒ‡ä»¤å±æ€§</span></div><div class="line">    <span class="comment">///</span></div><div class="line">    <span class="comment">/// textureï¼šå…³è”çš„çº¹ç†ï¼Œå³æ¸²æŸ“ç›®æ ‡ã€‚å¿…é¡»è®¾ç½®ï¼Œä¸ç„¶å†…å®¹ä¸çŸ¥é“è¦æ¸²æŸ“åˆ°å“ªé‡Œã€‚ä¸è®¾ç½®ä¼šæŠ¥é”™ï¼šfailed assertion `No rendertargets set in RenderPassDescriptor.'</span></div><div class="line">    <span class="comment">/// loadActionï¼šå†³å®šå‰ä¸€æ¬¡ texture çš„å†…å®¹éœ€è¦æ¸…é™¤ã€è¿˜æ˜¯ä¿ç•™</span></div><div class="line">    <span class="comment">/// storeActionï¼šå†³å®šè¿™æ¬¡æ¸²æŸ“çš„å†…å®¹éœ€è¦å­˜å‚¨ã€è¿˜æ˜¯ä¸¢å¼ƒ</span></div><div class="line">    <span class="comment">/// clearColorï¼šå½“ loadAction æ˜¯ MTLLoadActionClear æ—¶ï¼Œåˆ™ä¼šä½¿ç”¨å¯¹åº”çš„é¢œè‰²æ¥è¦†ç›–å½“å‰ textureï¼ˆç”¨æŸä¸€è‰²å€¼é€åƒç´ å†™å…¥ï¼‰</span></div><div class="line">    <span class="keyword">let</span> renderPassDescriptor = <span class="type">MTLRenderPassDescriptor</span>()</div><div class="line">    renderPassDescriptor.colorAttachments[<span class="number">0</span>].clearColor = <span class="type">MTLClearColorMake</span>(<span class="number">0.48</span>, <span class="number">0.74</span>, <span class="number">0.92</span>, <span class="number">1</span>)</div><div class="line">    renderPassDescriptor.colorAttachments[<span class="number">0</span>].texture = drawable.texture</div><div class="line">    renderPassDescriptor.colorAttachments[<span class="number">0</span>].loadAction = .clear</div><div class="line">    renderPassDescriptor.colorAttachments[<span class="number">0</span>].storeAction = .store</div><div class="line">    renderPassDescriptor.colorAttachments[<span class="number">0</span>].clearColor = <span class="type">MTLClearColorMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)</div><div class="line">    </div><div class="line">    <span class="comment">/// æ¸²æŸ“çš„æŒ‡ä»¤ï¼ŒMetalç®¡ç†,æäº¤æŒ‡ä»¤</span></div><div class="line">    <span class="keyword">let</span> commandQueue = device?.makeCommandQueue()</div><div class="line">    <span class="keyword">let</span> commandBuffer = commandQueue?.makeCommandBuffer()</div><div class="line">    <span class="comment">/// åˆ›å»º3Dæ¸²æŸ“ç¼–ç å™¨</span></div><div class="line">    <span class="keyword">let</span> renderCommandEncoder = commandBuffer?.makeRenderCommandEncoder(descriptor: renderPassDescriptor)</div><div class="line">    </div><div class="line">    <span class="comment">///</span></div><div class="line">    <span class="comment">/// åˆ›å»ºé¡¶ç‚¹æ•°æ®ï¼Œæœ¬ä¾‹ç›¸å¯¹openglä¾‹å­çš„æ”¹è¿›å°±æ˜¯ï¼Œé¢œè‰²é€šè¿‡ç¼“å­˜æ•°æ®ä¼ å…¥</span></div><div class="line">    <span class="keyword">let</span> vertices = [</div><div class="line">        <span class="type">DwVertex</span>(position: [<span class="number">0.5</span>, -<span class="number">0.5</span>], color: [<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>]),</div><div class="line">        <span class="type">DwVertex</span>(position: [-<span class="number">0.5</span>, -<span class="number">0.5</span>], color: [<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>]),</div><div class="line">        <span class="type">DwVertex</span>(position: [<span class="number">0.0</span>, <span class="number">0.5</span>], color: [<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>])</div><div class="line">    ]</div><div class="line">    <span class="comment">// åˆ›å»ºæ¸²æŸ“ç¼“å†²åŒº</span></div><div class="line">    <span class="keyword">let</span> buffer = device?.makeBuffer(bytes: vertices, length: <span class="type">MemoryLayout</span>&lt;<span class="type">DwVertex</span>&gt;.size * <span class="number">3</span>, options: .cpuCacheModeWriteCombined)</div><div class="line">    <span class="comment">// å°†æ•°æ®è®¾ç½®åˆ°æ¸²æŸ“ç¼–ç å™¨</span></div><div class="line">    renderCommandEncoder?.setVertexBuffer(buffer, offset: <span class="number">0</span>, index: <span class="number">0</span>)</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="comment">// è®¾ç½®æ¸²æŸ“ç®¡çº¿</span></div><div class="line">    renderCommandEncoder?.setRenderPipelineState(pipelineState!)</div><div class="line">    </div><div class="line">    <span class="comment">// ç»˜åˆ¶ä¸‰è§’å½¢</span></div><div class="line">    <span class="comment">// è¿™é‡Œæœ‰ä¸ªå‘è¦æ³¨æ„ä¸‹ï¼Œå¿…é¡»å…ˆè®¾ç½®æ¸²æŸ“ç®¡çº¿åæ‰èƒ½è®¾ç½®åŸºç¡€å›¾å…ƒç±»å‹</span></div><div class="line">    renderCommandEncoder?.drawPrimitives(type: .triangle, vertexStart: <span class="number">0</span>, vertexCount: <span class="number">3</span>)</div><div class="line">    </div><div class="line">    renderCommandEncoder?.endEncoding()</div><div class="line">    <span class="comment">// æ¸²æŸ“ç¼“å†²åŒºæäº¤åˆ°æ˜¾ç¤º</span></div><div class="line">    commandBuffer?.present(drawable)</div><div class="line">    commandBuffer?.commit()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h4><p><img src="http://image.runmaf.com/2020-06-17-15923569380658.jpg" alt=""></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ€åæ¢³ç†ä¸‹çš„æµç¨‹:</p>
<ul>
<li>é…ç½® Device å’Œ Queue</li>
<li>è·å– CommandBuffer</li>
<li>é…ç½® CommandBufferEncoder </li>
<li>é…ç½® PipelineState </li>
<li>åˆ›å»ºèµ„æºæˆ–è€…é¡¶ç‚¹</li>
<li>Encoder Buffer(å¦‚æœ‰éœ€è¦çš„è¯å¯ä»¥ç”¨ Threadgroups æ¥åˆ†ç»„ Encoder æ•°æ®)</li>
<li>æäº¤åˆ° Queue ä¸­</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2020/06/17/HelloOpenGLAndMetal/" itemprop="url">
                  Hello OpenGL ES
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2020-06-17T06:46:47+08:00" content="2020-06-17">
              2020-06-17
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>è¦æ¢å·¥ä½œäº†ï¼Œç¾å›¾ç§€ç§€æ˜¯å›¾åƒã€éŸ³è§†é¢‘æ–¹é¢ç›¸å…³çš„åº”ç”¨ï¼Œæ‰€ä»¥èµ¶ç´§å­¦ä¹ ç‚¹ç‚¹è¿™æ–¹é¢çš„åŸºç¡€çŸ¥è¯†ï¼Œå°±å…ˆä»å›¾åƒæ¸²æŸ“å¼€å§‹äº†ã€‚</p>
</blockquote>
<p><strong>OpenGL(Open Graphics Library)</strong> æ˜¯ä¸€ç§åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼Œå®ƒæ˜¯ä¸€ç§å¯ä»¥å¯¹å›¾å½¢ç¡¬ä»¶è®¾å¤‡ç‰¹æ€§è¿›è¡Œè®¿é—®çš„è½¯ä»¶åº“è§„èŒƒï¼Œå®ƒæ˜¯ç¡¬ä»¶æ— å…³çš„ã€‚å®ƒä¸»è¦ä¸ºæˆ‘ä»¬å®šä¹‰äº†ç”¨æ¥æ“ä½œå›¾å½¢å’Œå›¾ç‰‡çš„ä¸€ç³»åˆ—å‡½æ•°çš„ APIï¼ŒOpenGL æœ¬èº«å¹¶é APIã€‚<br><strong>OpenGL ES(OpenGL for Embedded Systems)</strong> æ˜¯ OpenGL çš„å­é›†ï¼Œä¸ºæ‰‹æœºç­‰åµŒå…¥å¼è®¾å¤‡è€Œè®¾è®¡ã€‚å®ƒå»é™¤äº†å››è¾¹å½¢ã€å¤šè¾¹å½¢ç­‰å¤æ‚å›¾å…ƒç­‰ä¸€äº›éç»å¯¹å¿…è¦ç‰¹æ€§ï¼Œç®—æ˜¯OpenGLåœ¨ç§»åŠ¨ç«¯ä¸Šçš„ç²¾ç®€è§„èŒƒã€‚<br><strong>Metal</strong> æ˜¯ä¸€ä¸ªå’Œ OpenGL ES ç±»ä¼¼çš„é¢å‘åº•å±‚çš„å›¾å½¢ç¼–ç¨‹æ¥å£ï¼Œé€šè¿‡ä½¿ç”¨ç›¸å…³çš„ api å¯ä»¥ç›´æ¥æ“ä½œ GPUï¼Œ æ˜¯ iOS å¹³å°ç‹¬æœ‰çš„ï¼Œæ„å‘³ç€å®ƒä¸èƒ½åƒ OpenGL ES é‚£æ ·æ”¯æŒè·¨å¹³å°ï¼Œä½†æ˜¯å®ƒèƒ½æœ€å¤§çš„æŒ–æ˜è‹¹æœç§»åŠ¨è®¾å¤‡çš„ GPU èƒ½åŠ›ï¼Œè¿›è¡Œå¤æ‚çš„è¿ç®—ï¼Œåƒ Unity ç­‰æ¸¸æˆå¼•æ“éƒ½é€šè¿‡ Metal å¯¹ 3D èƒ½åŠ›è¿›è¡Œäº†ä¼˜åŒ–ï¼Œ App Store è¿˜æœ‰ç›¸åº”çš„è¿ç”¨ Metal æŠ€æœ¯çš„æ¸¸æˆä¸“é¢˜ã€‚<br><strong>GLSL</strong> (OpenGL Shading Language) æ˜¯OpenGLçš„ç€è‰²å™¨è¯­è¨€ï¼ŒMetalä¹Ÿæ˜¯ç”¨è¯¥è¯­æ³•ã€‚å®ƒCçš„å­é›†ï¼Œè¯­æ³•ä¸Cç±»ä¼¼ï¼Œæœ‰äº†è‡ªå·±ç‹¬ç‰¹çš„ä¸€äº›æ•°æ®ç»“æ„åŠçŠ¶æ€æ§åˆ¶æµç¨‹ã€‚</p>
<h2 id="iOSæ¸²æŸ“çš„è¿‡ç¨‹"><a href="#iOSæ¸²æŸ“çš„è¿‡ç¨‹" class="headerlink" title="iOSæ¸²æŸ“çš„è¿‡ç¨‹"></a>iOSæ¸²æŸ“çš„è¿‡ç¨‹</h2><p><a href="https://github.com/RickeyBoy/Rickey-iOS-Notes/blob/master/%E7%AC%94%E8%AE%B0/iOS%20Rendering.md" target="_blank" rel="external">å…·ä½“å…³äºiOS GPUæ¸²æŸ“çš„çŸ¥è¯†ï¼Œå¯ä»¥çœ‹ç“œç¥çš„è¿™ç¯‡æ–‡ç« å°±å¤Ÿäº†ã€‚</a></p>
<p>ä¸ç®¡æ˜¯OpenGL è¿˜æ˜¯Metalï¼Œåœ¨å›¾å…ƒæ¸²æŸ“è¿‡ç¨‹ï¼Œé¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡æ®µç€è‰²å™¨æ˜¯å¯ç¼–ç¨‹çš„éƒ¨åˆ†ã€‚</p>
<p><img src="https://lymanli-1258009115.cos.ap-guangzhou.myqcloud.com/image/blog/render-texture-image-3.jpg" alt=""></p>
<p>è¿™é‡Œä¸å±•å¼€è¯´æ¸²æŸ“ï¼Œå…·ä½“è¿˜æ˜¯çœ‹ç“œç¥çš„æ–‡ç« å§ã€‚</p>
<h2 id="æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹"><a href="#æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹" class="headerlink" title="æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹"></a>æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹</h2><p><a href="https://github.com/yuezaixz/DwGPUImageLearning" target="_blank" rel="external">æœ¬ä¾‹DEMOä»£ç ä»“åº“</a></p>
<h3 id="OpenGL-ES-æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹"><a href="#OpenGL-ES-æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹" class="headerlink" title="OpenGL ES æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹"></a>OpenGL ES æ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢çš„ç¼–å†™æµç¨‹</h3><p>è‹¹æœé€šè¿‡GLKitæä¾›äº†ä¸€äº›åˆ—æ–¹ä¾¿ä½¿ç”¨OpenGLçš„APIï¼Œæœ¬å®ä¾‹ä¸ºäº†å­¦ä¹ åº•å±‚æ¸²æŸ“æµç¨‹ï¼Œæ‰€ä»¥ä¸å¼•å…¥è¯¥åº“ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">// å¼•å…¥æœ€åŸºç¡€çš„GLåº“</div><div class="line">import OpenGLES</div></pre></td></tr></table></figure>
<h4 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><ul>
<li>contextï¼ŒOpenGL ES æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œç›¸å…³çš„é…ç½®ä¿¡æ¯ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ä¸­ï¼Œè¿™ä¸ªäº›å€¼ä¼šè¢«ä¸€ç›´ä¿å­˜ï¼Œç›´åˆ°è¢«ä¿®æ”¹ã€‚ä½†æˆ‘ä»¬å¯ä»¥é…ç½®å¤šä¸ªä¸Šä¸‹æ–‡ï¼Œé€šè¿‡è°ƒç”¨ EAGLContext.setCurrent(self.eagContext) æ¥åˆ‡æ¢ã€‚</li>
<li>ç¨‹åºæŒ‚è½½æ ‡è¯† programï¼ŒæŒ‚è½½ç€è‰²å™¨çš„progarm</li>
<li>å¸§ç¼“å­˜ frameBufferï¼Œä¸€ä¸ªæ¥æ”¶æ¸²æŸ“ç»“æœçš„ç¼“å†²åŒºï¼Œä¸º GPU æŒ‡å®šå­˜å‚¨æ¸²æŸ“ç»“æœçš„åŒºåŸŸã€‚æ›´é€šä¿—ç‚¹ï¼Œå¯ä»¥ç†è§£æˆå­˜å‚¨å±å¹•ä¸Šæœ€ç»ˆæ˜¾ç¤ºçš„ä¸€å¸§ç”»é¢çš„åŒºåŸŸã€‚æˆ‘ä»¬éœ€è¦å°†å®ƒæŒ‚åœ¨åˆ°æ¸²æŸ“ç¼“å†²å¯¹è±¡ä¸Šï¼Œå†æœ€åå±•ç¤ºåˆ°å±å¹•ä¸Šã€‚</li>
<li>æ¸²æŸ“ç¼“å†²å¯¹è±¡ renderBufferï¼Œæ˜¯æœ€åè¦å±•ç¤ºçš„ç»“æœé€šè¿‡ renderbufferStorage:fromDrawable:è¿›è¡Œæ¸²æŸ“å±‚ç»‘å®šï¼Œå†presentRenderbufferå‘ˆç°åˆ°å±å¹•ä¸Šã€‚</li>
</ul>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼Œè¿‡ç¨‹å¦‚ä¸‹</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">   <span class="comment">// CALayeræ”¯æŒOpen GLç»˜åˆ¶Conentsçš„å­ç±»ã€‚</span></div><div class="line">   <span class="keyword">private</span> <span class="keyword">var</span> metalLayer: <span class="type">CAEAGLLayer</span> &#123;</div><div class="line">       <span class="keyword">return</span> layer <span class="keyword">as</span>! <span class="type">CAEAGLLayer</span></div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   <span class="keyword">override</span> <span class="class"><span class="keyword">class</span> <span class="title">var</span> <span class="title">layerClass</span>: <span class="title">AnyClass</span> </span>&#123;</div><div class="line">       <span class="keyword">return</span> <span class="type">CAEAGLLayer</span>.<span class="keyword">self</span></div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   <span class="comment">// å½“å‰çº¿ç¨‹OpenGL ESçŠ¶æ€æœºï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸‹æ–‡</span></div><div class="line">   <span class="keyword">private</span> <span class="keyword">var</span> eagContext: <span class="type">EAGLContext</span>?</div><div class="line">   </div><div class="line">   <span class="comment">// æŒ‚è½½ç€è‰²å™¨çš„progarm</span></div><div class="line">   <span class="keyword">private</span> <span class="keyword">var</span> program: <span class="type">GLuint</span> = <span class="number">0</span></div><div class="line">   <span class="comment">// æ¸²æŸ“è¿‡ç¨‹çš„ç¼“å†²åŒºï¼Œä¹Ÿå«å¸§ç¼“å†²åŒºï¼Œæ˜¯æœ€åè¦å±•ç¤ºçš„ç»“æœ</span></div><div class="line">   <span class="keyword">private</span> <span class="keyword">var</span> renderBuffer: <span class="type">GLuint</span> = <span class="number">0</span></div><div class="line">   <span class="comment">// æ¸²æŸ“ç¼“å­˜</span></div><div class="line">   <span class="keyword">private</span> <span class="keyword">var</span> frameBuffer: <span class="type">GLuint</span> = <span class="number">0</span></div><div class="line">   </div><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">commonInit</span><span class="params">()</span></span> &#123;</div><div class="line">       <span class="comment">// åˆ›å»ºOpenGL ES2 çš„ä¸Šä¸‹æ–‡</span></div><div class="line">       eagContext = <span class="type">EAGLContext</span>(api: .openGLES2)</div><div class="line">       <span class="comment">// åˆå§‹åŒ–OpenGLç»˜åˆ¶Layerçš„ä¸€äº›å±æ€§</span></div><div class="line">       <span class="keyword">self</span>.metalLayer.frame = <span class="keyword">self</span>.bounds</div><div class="line">       <span class="keyword">self</span>.metalLayer.isOpaque = <span class="literal">true</span></div><div class="line">       metalLayer.drawableProperties = [kEAGLDrawablePropertyRetainedBacking : <span class="literal">false</span>,</div><div class="line">                                              kEAGLDrawablePropertyColorFormat : kEAGLColorFormatRGBA8]</div><div class="line">       <span class="comment">// åˆå§‹åŒ–ä¸€ä¸‹renderBufferå’ŒFrameBuffer</span></div><div class="line">       genBuffer()</div><div class="line">       <span class="comment">// åˆå§‹åŒ–ç€è‰²å™¨ç¨‹åº</span></div><div class="line">       loadShader()</div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   <span class="function"><span class="keyword">func</span> <span class="title">genBuffer</span><span class="params">()</span></span> &#123;</div><div class="line">       <span class="type">EAGLContext</span>.setCurrent(<span class="keyword">self</span>.eagContext)</div><div class="line">       </div><div class="line">       <span class="comment">// ç”Ÿæˆç¼“å†²åŒº</span></div><div class="line">       glGenFramebuffers(<span class="number">1</span>, &amp;<span class="keyword">self</span>.frameBuffer)</div><div class="line">       glGenRenderbuffers(<span class="number">1</span>, &amp;<span class="keyword">self</span>.renderBuffer)</div><div class="line">       </div><div class="line">       <span class="comment">// ç»‘å®šç¼“å†²åŒº</span></div><div class="line">       glBindFramebuffer(<span class="type">GLenum</span>(<span class="type">GL_FRAMEBUFFER</span>), <span class="keyword">self</span>.frameBuffer)</div><div class="line">       glBindRenderbuffer(<span class="type">GLenum</span>(<span class="type">GL_RENDERBUFFER</span>), <span class="keyword">self</span>.renderBuffer)</div><div class="line">       </div><div class="line">       <span class="comment">// æ¸²æŸ“å±‚ç»‘å®š</span></div><div class="line">       <span class="keyword">self</span>.eagContext?.renderbufferStorage(<span class="type">Int</span>(<span class="type">GL_RENDERBUFFER</span>), from: <span class="keyword">self</span>.metalLayer)</div><div class="line">       </div><div class="line">       <span class="comment">// å°†æ¸²æŸ“ç¼“å­˜ç»‘å®šåˆ°å¸§ç¼“å­˜ä¸Š</span></div><div class="line">       glFramebufferRenderbuffer(<span class="type">GLenum</span>(<span class="type">GL_FRAMEBUFFER</span>), <span class="type">GLenum</span>(<span class="type">GL_COLOR_ATTACHMENT0</span>), <span class="type">GLenum</span>(<span class="type">GL_RENDERBUFFER</span>), <span class="keyword">self</span>.renderBuffer)</div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   <span class="function"><span class="keyword">func</span> <span class="title">loadShader</span><span class="params">()</span></span> &#123;</div><div class="line">       <span class="comment">// å·²åŠ è½½åˆ™åˆ é™¤</span></div><div class="line">       <span class="keyword">if</span> <span class="keyword">self</span>.program &gt; <span class="number">0</span> &#123;</div><div class="line">           glDeleteProgram(<span class="keyword">self</span>.program)</div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       <span class="comment">// é¡¶ç‚¹ç€è‰²å™¨ï¼Œç®€å•çš„ä¼ é€’</span></div><div class="line">       <span class="keyword">let</span> vertexSources =</div><div class="line">           <span class="string">"attribute vec3 position;"</span> +</div><div class="line">           <span class="string">"void main() &#123;"</span> +</div><div class="line">           <span class="string">"  gl_Position = vec4(position, 1.0);"</span> +</div><div class="line">           <span class="string">"&#125;"</span></div><div class="line">       <span class="comment">// ç‰‡æ®µç€è‰²å™¨ï¼Œç®€å•çš„ç”¨çº¢è‰²ç€è‰²</span></div><div class="line">       <span class="keyword">let</span> fragmentSources =</div><div class="line">           <span class="string">"precision mediump float;"</span> +</div><div class="line">           <span class="string">"void main() &#123;"</span> +</div><div class="line">           <span class="string">"  gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);"</span> +</div><div class="line">           <span class="string">"&#125;"</span></div><div class="line">       <span class="comment">// ç¼–è¯‘ä¸¤ä¸ªç€è‰²å™¨</span></div><div class="line">       <span class="keyword">let</span> vertexShader = compilerShader(<span class="type">GLenum</span>(<span class="type">GL_VERTEX_SHADER</span>), vertexSources)</div><div class="line">       <span class="keyword">let</span> fragmentShader = compilerShader(<span class="type">GLenum</span>(<span class="type">GL_FRAGMENT_SHADER</span>), fragmentSources)</div><div class="line">       </div><div class="line">       <span class="comment">// åˆ›å»ºç€è‰²å™¨ç¨‹åºæ ‡è¯†</span></div><div class="line">       <span class="keyword">self</span>.program = glCreateProgram()</div><div class="line">       </div><div class="line">       <span class="comment">// ç»‘å®šä¸Šç›¸åº”ç€è‰²å™¨</span></div><div class="line">       glAttachShader(<span class="keyword">self</span>.program, vertexShader)</div><div class="line">       glAttachShader(<span class="keyword">self</span>.program, fragmentShader)</div><div class="line">       </div><div class="line">       <span class="comment">// è®¾ç½®ç´¢å¼•å’Œå˜é‡ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œå½“å‰ç€è‰²å™¨ä¼ å…¥çš„å°±æ˜¯ä¸€ä¸ªpositionï¼Œç´¢å¼•ä¸º3ï¼Œä¸åé¢ç”¨åˆ°çš„glVertexAttribPointerç›¸å…³è”</span></div><div class="line">       glBindAttribLocation(<span class="keyword">self</span>.program, <span class="number">3</span>, (<span class="string">"position"</span> <span class="keyword">as</span> <span class="type">NSString</span>).utf8String)</div><div class="line">       </div><div class="line">       <span class="comment">// å°†ç¨‹åºè¿æ¥åˆ°OpenGL</span></div><div class="line">       glLinkProgram(<span class="keyword">self</span>.program)</div><div class="line">       </div><div class="line">       <span class="keyword">var</span> linkSuccess: <span class="type">GLint</span> = <span class="number">1</span></div><div class="line">       glGetProgramiv(<span class="keyword">self</span>.program, <span class="type">GLenum</span>(<span class="type">GL_LINK_STATUS</span>), &amp;linkSuccess)</div><div class="line">       </div><div class="line">       <span class="keyword">if</span> linkSuccess == <span class="type">GL_FALSE</span> &#123;</div><div class="line">           <span class="comment">// é“¾æ¥å¤±è´¥</span></div><div class="line">           <span class="keyword">var</span> message = [<span class="type">GLchar</span>](repeating: <span class="type">GLchar</span>(<span class="number">0</span>), <span class="built_in">count</span>: <span class="number">256</span>)</div><div class="line">           <span class="keyword">var</span> len = <span class="type">GLsizei</span>(<span class="number">0</span>)</div><div class="line">           glGetProgramInfoLog(<span class="keyword">self</span>.program, <span class="number">256</span>, &amp;len, &amp;message)</div><div class="line">           <span class="keyword">let</span> log = <span class="type">String</span>.<span class="keyword">init</span>(utf8String: message)</div><div class="line">           <span class="built_in">print</span>(<span class="string">"program link error is \(String(describing: log))"</span>)</div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       <span class="comment">// æ¸…é™¤å·²ç»ç»‘å®šäº†çš„ç€è‰²å™¨</span></div><div class="line">       glDeleteShader(vertexShader)</div><div class="line">       glDeleteShader(fragmentShader)</div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   <span class="function"><span class="keyword">func</span> <span class="title">compilerShader</span><span class="params">(<span class="number">_</span> shaderType: GLenum, <span class="number">_</span> sources: String)</span></span> -&gt; <span class="type">GLuint</span> &#123;</div><div class="line">       <span class="keyword">let</span> shader = glCreateShader(shaderType)</div><div class="line">       <span class="keyword">var</span> sourcePointer = (sources <span class="keyword">as</span> <span class="type">NSString</span>).utf8String</div><div class="line">       <span class="keyword">var</span> len = <span class="type">GLint</span>((sources <span class="keyword">as</span> <span class="type">NSString</span>).length)</div><div class="line">       glShaderSource(shader, <span class="number">1</span>, &amp;sourcePointer, &amp;len)</div><div class="line">       </div><div class="line">       glCompileShader(shader)</div><div class="line">       </div><div class="line">       <span class="keyword">var</span> success: <span class="type">GLint</span> = <span class="number">1</span></div><div class="line">       glGetShaderiv(shader, <span class="type">GLenum</span>(<span class="type">GL_COMPILE_STATUS</span>), &amp;success)</div><div class="line">       </div><div class="line">       <span class="keyword">if</span> success == <span class="type">GL_FALSE</span> &#123;</div><div class="line">           <span class="keyword">var</span> message = [<span class="type">GLchar</span>](repeating: <span class="type">GLchar</span>(<span class="number">0</span>), <span class="built_in">count</span>: <span class="number">256</span>)</div><div class="line">           <span class="keyword">var</span> len = <span class="type">GLsizei</span>(<span class="number">0</span>)</div><div class="line">           glGetShaderInfoLog(shader, <span class="number">256</span>, &amp;len, &amp;message)</div><div class="line">           <span class="keyword">let</span> log = <span class="type">String</span>.<span class="keyword">init</span>(utf8String: message)</div><div class="line">           <span class="built_in">print</span>(<span class="string">"shader:\(shaderType) compile error is \(String(describing: log))"</span>)</div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       <span class="keyword">return</span> shader</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<h4 id="æ¸²æŸ“"><a href="#æ¸²æŸ“" class="headerlink" title="æ¸²æŸ“"></a>æ¸²æŸ“</h4><p>éœ€è¦çš„ç€è‰²å™¨ã€ç¼“å†²åŒºã€ä¸Šä¸‹æ–‡ã€æ¸²æŸ“Layeréƒ½å‡†å¤‡å¥½äº†ï¼Œé‚£å‰©ä¸‹çš„å°±æ˜¯è¿›è¡Œæ¸²æŸ“äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">	<span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didMoveToWindow</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.didMoveToWindow()</div><div class="line">        render()</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">render</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">// è®¾ç½®ä¸Šä¸‹æ–‡</span></div><div class="line">        <span class="type">EAGLContext</span>.setCurrent(<span class="keyword">self</span>.eagContext)</div><div class="line">        </div><div class="line">        <span class="comment">// å¼•å…¥ç¨‹åºåº“</span></div><div class="line">        glUseProgram(<span class="keyword">self</span>.program)</div><div class="line">        <span class="comment">// ç»‘å®šå¸§ç¼“å†²åŒº</span></div><div class="line">        glBindFramebuffer(<span class="type">GLenum</span>(<span class="type">GL_FRAMEBUFFER</span>), <span class="keyword">self</span>.frameBuffer)</div><div class="line">        </div><div class="line">        <span class="comment">// ç”¨é»‘è‰²æ¸…é™¤èƒŒæ™¯è‰²ï¼Œclearè®¾ç½®èƒŒæ™¯è‰²ä¼šæ¯”è¾ƒå¿«ï¼Œå¤§æ¦‚è®¤ä¸º clear æ”¹çš„æ˜¯ cache é‡Œçš„å€¼ï¼Œå¹¶ä¸ä¼šçœŸå¾—å†™åˆ°æ˜¾å­˜é‡Œï¼Œæ‰€ä»¥ç‰¹åˆ«å¿«ã€‚cache å’Œ shader çš„æ‰§è¡Œå•å…ƒç¦»å¾—è¿‘ï¼Œæ˜¾å­˜å’Œ shader çš„æ‰§è¡Œå•å…ƒç¦»å¾—è¿œï¼Œèƒ½å°‘èµ°ç‚¹è·¯å°±å°‘èµ°ç‚¹è·¯ã€‚</span></div><div class="line">        glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1.0</span>)</div><div class="line">        glClear(<span class="type">GLbitfield</span>(<span class="type">GL_COLOR_BUFFER_BIT</span>))</div><div class="line">        </div><div class="line">        <span class="comment">// xï¼Œy ä»¥åƒç´ ä¸ºå•ä½ï¼ŒæŒ‡å®šäº†è§†å£çš„å·¦ä¸‹è§’ä½ç½®ã€‚</span></div><div class="line">        <span class="comment">// widthï¼Œheight è¡¨ç¤ºè¿™ä¸ªè§†å£çŸ©å½¢çš„å®½åº¦å’Œé«˜åº¦ï¼Œæ ¹æ®çª—å£çš„å®æ—¶å˜åŒ–é‡ç»˜çª—å£</span></div><div class="line">        glViewport(<span class="number">0</span>, <span class="number">0</span>, <span class="type">GLsizei</span>(<span class="keyword">self</span>.frame.width), <span class="type">GLsizei</span>(<span class="keyword">self</span>.frame.height))</div><div class="line">        </div><div class="line">        <span class="comment">// è¿™é‡Œåªä½¿ç”¨ä½ç½®ï¼Œä¸ä½¿ç”¨é¢œè‰²å˜é‡ã€‚ä½ç½®çš„ç´¢å¼•ä¸º3</span></div><div class="line">        <span class="keyword">let</span> positionLocaltion: <span class="type">GLuint</span> = <span class="number">3</span></div><div class="line"><span class="comment">//        let colorLocation: GLuint = 4</span></div><div class="line">        </div><div class="line">        <span class="keyword">let</span> vertices:[<span class="type">GLfloat</span>] =</div><div class="line">            [-<span class="number">0.5</span>, -<span class="number">0.5</span>, <span class="number">0.0</span>,</div><div class="line">             <span class="number">0.5</span>, -<span class="number">0.5</span>, <span class="number">0.0</span>,</div><div class="line">             <span class="number">0.0</span>, <span class="number">0.5</span>, <span class="number">0.0</span>]</div><div class="line">        <span class="comment">// åœ¨å†…å­˜ä¸­é‡‡ç”¨äº¤å‰æ¨¡å¼å­˜å‚¨ï¼Œå‘gpuä¼ å…¥é¡¶ç‚¹æ•°æ®çš„æ–¹æ³•</span></div><div class="line">        <span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç´¢å¼•ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é•¿åº¦ï¼Œåé¢æ˜¯ç±»å‹</span></div><div class="line">        glVertexAttribPointer(positionLocaltion, <span class="number">3</span>, <span class="type">GLenum</span>(<span class="type">GL_FLOAT</span>), <span class="type">GLboolean</span>(<span class="type">GL_FALSE</span>), <span class="number">0</span>, vertices)</div><div class="line">        glEnableVertexAttribArray(positionLocaltion)</div><div class="line">        </div><div class="line">        <span class="comment">// ä½¿ç”¨ç¼“å­˜çš„æ•°æ®è¿›è¡Œç»˜åˆ¶</span></div><div class="line">        glDrawArrays(<span class="type">GLenum</span>(<span class="type">GL_TRIANGLES</span>), <span class="number">0</span>, <span class="number">3</span>)</div><div class="line">        </div><div class="line">        <span class="comment">// å°†ç»‘å®šçš„æ¸²æŸ“ç¼“å­˜å‘ˆç°åˆ°å±å¹•ä¸Š</span></div><div class="line">        <span class="keyword">let</span> finished = eagContext?.presentRenderbuffer(<span class="type">Int</span>(<span class="type">GL_RENDERBUFFER</span>)) ?? <span class="literal">false</span></div><div class="line">        <span class="built_in">print</span>(<span class="string">"finished is: \(finished)"</span>)</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h4 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h4><p><img src="http://image.runmaf.com/2020-06-17-15923569380658.jpg" alt=""></p>
<h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>åˆå­¦ï¼Œæˆ–è®¸æœ‰ä¸€äº›ç†è§£ä¸Šåå·®ã€‚</p>
<p>ä¸‹ä¸€ç¯‡ç”¨Metalå®ç°ä¸ªä¸€æ ·çš„ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2020/06/10/NeumorphismAndSomeShadowStyle/" itemprop="url">
                  ä»Šå¹´æµè¡Œçš„æ‹Ÿæ€Neumorphismä¸å¸¸è§çš„å‡ ç§é˜´å½±å½¢å¼
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2020-06-10T00:23:55+08:00" content="2020-06-10">
              2020-06-10
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://github.com/yuezaixz/DwShadowDemo" target="_blank" rel="external">DEMOåœ°å€:https://github.com/yuezaixz/DwShadowDemo</a></p>
<p>æœ€è¿‘åº”ç”¨ä¸­ç”¨åˆ°çš„é˜´å½±æ¯”è¾ƒå¤šï¼ŒåŠ ä¸Šè‡ªå·±ç‹¬ç«‹å¼€å‘çš„åº”ç”¨ä¹Ÿå°è¯•äº†ä»Šå¹´æµè¡Œçš„æ‹Ÿæ€Neumorphismè®¾è®¡ï¼Œæ‰€ä»¥ç¨å¾®ç ”ç©¶äº†ä¸‹å¸¸è§çš„å‡ ç§é˜´å½±åœ¨è®¾è®¡å’Œå¼€å‘å®ç°ä¸Šå½¢å¼ã€‚</p>
<h2 id="iOSçš„é˜´å½±API"><a href="#iOSçš„é˜´å½±API" class="headerlink" title="iOSçš„é˜´å½±API"></a>iOSçš„é˜´å½±API</h2><h3 id="shadowColor"><a href="#shadowColor" class="headerlink" title="shadowColor"></a>shadowColor</h3><p>è‡ªå®šä¹‰é˜´å½±çš„é¢œè‰²ã€‚é»˜è®¤é¢œè‰²æ˜¯UIColor.black.cgColorï¼Œå®ƒä¼šäº§ç”Ÿæ·±è‰²é˜´å½±ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥è®¾ç½®æµ…è‰²ä»¥åˆ›å»ºå‘å…‰æ•ˆæœï¼Œæˆ–å…¶ä»–ä»»ä½•é¢œè‰²ã€‚</p>
<h3 id="shadowOpacity"><a href="#shadowOpacity" class="headerlink" title="shadowOpacity"></a>shadowOpacity</h3><p>è‡ªå®šä¹‰é˜´å½±çš„ä¸é€æ˜åº¦ï¼Œä»‹äº0å’Œ1ä¹‹é—´ã€‚å€¼ä¸º0è¡¨ç¤ºé˜´å½±å°†ä¸å¯è§ã€‚</p>
<h3 id="shadowRadius"><a href="#shadowRadius" class="headerlink" title="shadowRadius"></a>shadowRadius</h3><p>è‡ªå®šä¹‰é˜´å½±çš„æ¨¡ç³Šåº¦ã€‚0è¡¨ç¤ºé˜´å½±å®Œå…¨ä¸ä¼šæ¨¡ç³Šã€‚</p>
<h3 id="shadowOffset"><a href="#shadowOffset" class="headerlink" title="shadowOffset"></a>shadowOffset</h3><p>ä»è§†å›¾ä¸­è‡ªå®šä¹‰é˜´å½±çš„ä½ç½®ã€‚å¦‚æœè¦å‘ç•Œé¢æ·»åŠ æ·±åº¦ï¼Œæ­¤å±æ€§ç‰¹åˆ«æœ‰ç”¨ã€‚ CGSize.zeroå€¼è¡¨ç¤ºé˜´å½±å°†ä¸å…¶çˆ¶è§†å›¾å®Œç¾å¯¹é½ã€‚é»˜è®¤ä¸º-3ï¼Œåœ¨iOSä¸Šè¡¨ç°æ˜¯å‘ä¸Šåç§»3ä¸ªç‚¹ï¼Œåœ¨macOSä¸Šæ˜¯å‘ä¸‹åç§»ï¼Œåº”è¯¥æ˜¯å› ä¸ºmacOSçš„åŸå› ï¼Œæ­£å¸¸æ„Ÿè§‰ï¼Œé˜´å½±åº”è¯¥æ˜¯åœ¨ä¸‹æ–¹çš„ï¼Œå› ä¸ºç°å®ä¸–ç•Œä¸­ï¼Œå¾ˆå°‘å…‰æºå¤„äºä½è§†è§’ã€‚</p>
<h3 id="shadowPath"><a href="#shadowPath" class="headerlink" title="shadowPath"></a>shadowPath</h3><p>è‡ªå®šä¹‰é˜´å½±çš„å½¢çŠ¶ã€‚æ­¤å±æ€§çš„é»˜è®¤å€¼ä¸ºnilï¼Œè¿™æ„å‘³ç€UIKitå°†è‡ªè¡Œç¡®å®šçˆ¶è§†å›¾çš„å½¢çŠ¶ã€‚<br>ä¸è®¾ç½®shadowPathä¼šå®æ—¶è®¡ç®—é˜´å½±ï¼Œè¿™ä¼šæ˜¯ä¸€ä¸ªéå¸¸æ¶ˆè€—èµ„æºçš„ï¼Œå°¤å…¶æ˜¯å›¾å±‚æœ‰å¤šä¸ªå­å›¾å±‚ï¼Œæ¯ä¸ªå›¾å±‚è¿˜æœ‰ä¸€ä¸ªæœ‰é€æ˜æ•ˆæœçš„å¯„å®¿å›¾çš„æ—¶å€™ã€‚<br>å› æ­¤ï¼Œå¦‚æœå½¢çŠ¶æ˜¯å¯æ§çš„è¯ï¼Œå°½é‡è®¾ç½®ä»–ã€‚</p>
<h2 id="é˜´å½±çš„å¸¸è§å½¢å¼"><a href="#é˜´å½±çš„å¸¸è§å½¢å¼" class="headerlink" title="é˜´å½±çš„å¸¸è§å½¢å¼"></a>é˜´å½±çš„å¸¸è§å½¢å¼</h2><h3 id="æ‹Ÿæ€Neumorphism"><a href="#æ‹Ÿæ€Neumorphism" class="headerlink" title="æ‹Ÿæ€Neumorphism"></a>æ‹Ÿæ€Neumorphism</h3><p>ç«Ÿç„¶ä»Šå¤©è¿™ç¯‡æ–‡ç« å› ä»–è€Œèµ·ï¼Œå°±å…ˆè¯´ä»–å§ã€‚<br>æ‹Ÿæ€æ˜¯ä»Šå¹´æ¯”è¾ƒç«çš„ä¸€ç§è®¾è®¡å½¢å¼ï¼Œdribbleå’Œä¸€äº›ä¸ªäººåº”ç”¨å¼€å‘ä¸Šæ¯”è¾ƒå¸¸è§ã€‚å•†ä¸šåº”ç”¨ç”±äºé£æ ¼ç»Ÿä¸€é—®é¢˜ï¼Œæš‚æ—¶åº”è¯¥è¿˜å¾ˆéš¾çœ‹åˆ°ã€‚<br><a href="https://uxdesign.cc/neumorphism-in-user-interfaces-b47cef3bf3a6" target="_blank" rel="external">æœ‰å…´è¶£äº†è§£çš„è¯ï¼Œå¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« </a></p>
<p>ä¸ªäººå¼€å‘åº”ç”¨ä¸­ï¼Œæˆ‘å·²ç»å°è¯•èµ·è¿™ç§å½¢å¼äº†ã€‚</p>
<p><img src="http://image.runmaf.com/2020-06-10-15917206259996.jpg" alt=""></p>
<p>å…¶å®ä»–çš„åŸç†å°±æ˜¯ä¸¤æ®µå¼çš„é˜´å½±ç»„åˆï¼Œå·¦ä¾§å’Œä¸Šä¾§ç”¨æš—è‰²é˜´å½±ï¼Œå³ä¾§å’Œä¸‹ä¾§ç”¨äº®è‰²é˜´å½±ï¼Œç»„åˆå…¶ä»–å°±æ˜¯ä¸€ä¸ªå‡¹é™·çš„æ•ˆæœã€‚åä¹‹ï¼Œå°±æ˜¯ä¸€ä¸ªå‡¸å‡ºçš„æ•ˆæœã€‚</p>
<h3 id="æ­£é¢æŠ•å½±ï¼ˆå…‰æºè¾ƒè¿œï¼‰"><a href="#æ­£é¢æŠ•å½±ï¼ˆå…‰æºè¾ƒè¿œï¼‰" class="headerlink" title="æ­£é¢æŠ•å½±ï¼ˆå…‰æºè¾ƒè¿œï¼‰"></a>æ­£é¢æŠ•å½±ï¼ˆå…‰æºè¾ƒè¿œï¼‰</h3><p>æ­£é¢æŠ•å½±åº”è¯¥æ˜¯æœ€ç»å…¸é˜´å½±äº†ï¼Œä¹Ÿæ˜¯æœ€å¸¸è§çš„é˜´å½±ã€‚é€šè¿‡ä»Viewçš„Boundsåˆ›å»ºUIBezierPathæ¥ä¸ºæ­¤åŸºæœ¬é˜´å½±æŒ‡å®šè·¯å¾„ï¼ŒåŠ ä¸Šåç§»ã€æ¨¡ç³Šã€é¢œè‰²ç­‰ï¼Œå°±å¿«é€Ÿå®ç°äº†é˜´å½±ã€‚</p>
<p><img src="http://image.runmaf.com/2020-06-10-15917209241272.jpg" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">imageView.layer.shadowRadius = 10</div><div class="line">imageView.layer.shadowOffset = .zero</div><div class="line">imageView.layer.shadowOpacity = 0.5</div><div class="line">imageView.layer.shadowColor = UIColor.black.cgColor</div><div class="line">imageView.layer.shadowPath = UIBezierPath(rect: imageView.bounds).cgPath</div><div class="line">imageView.layer.masksToBounds = false</div></pre></td></tr></table></figure>
<h3 id="é«˜å¤„æŠ•å½±"><a href="#é«˜å¤„æŠ•å½±" class="headerlink" title="é«˜å¤„æŠ•å½±"></a>é«˜å¤„æŠ•å½±</h3><p>å½“å…‰æºåœ¨é«˜å¤„è¯•ç‰©ä½“äº§ç”ŸæŠ•å½±ã€‚äº§ç”Ÿçš„é˜´å½±æ˜¯ä¸€ä¸ªæ¤­åœ†å½¢ã€‚è¿™ç§é˜´å½±å¾ˆåƒå¤ªé˜³å…‰ä½¿å„ç§ç‰©ä½“äº§ç”Ÿçš„é˜´å½±æ•ˆæœã€‚</p>
<p><img src="http://image.runmaf.com/2020-06-10-15917212274721.jpg" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// é˜´å½±çš„åšåº¦</span></div><div class="line"><span class="keyword">let</span> size: <span class="type">CGFloat</span> = <span class="number">20</span></div><div class="line"><span class="comment">// é˜´å½±åœ¨ä¸‹æ–¹çš„è·ç¦»</span></div><div class="line"><span class="keyword">let</span> <span class="built_in">distance</span>: <span class="type">CGFloat</span> = <span class="number">80</span></div><div class="line"><span class="keyword">let</span> rect = <span class="type">CGRect</span>(</div><div class="line">    x: -size,</div><div class="line">    y: imageView.frame.height - (size * <span class="number">0.4</span>) + <span class="built_in">distance</span>,</div><div class="line">    width: imageView.frame.width + size * <span class="number">2</span>,</div><div class="line">    height: size</div><div class="line">)</div><div class="line"></div><div class="line">imageView.layer.shadowColor = <span class="type">UIColor</span>.black.cgColor</div><div class="line">imageView.layer.shadowRadius = <span class="number">7</span></div><div class="line">imageView.layer.shadowOpacity = <span class="number">0.5</span></div><div class="line">imageView.layer.shadowPath = <span class="type">UIBezierPath</span>(ovalIn: rect).cgPath</div><div class="line">imageView.layer.masksToBounds = <span class="literal">false</span></div></pre></td></tr></table></figure>
<h3 id="æ­£é¢é˜´å½±ï¼ˆè¾ƒè¿‘ä¸”å¯ä»¥æ°´å¹³ç§»åŠ¨å…‰æºï¼‰"><a href="#æ­£é¢é˜´å½±ï¼ˆè¾ƒè¿‘ä¸”å¯ä»¥æ°´å¹³ç§»åŠ¨å…‰æºï¼‰" class="headerlink" title="æ­£é¢é˜´å½±ï¼ˆè¾ƒè¿‘ä¸”å¯ä»¥æ°´å¹³ç§»åŠ¨å…‰æºï¼‰"></a>æ­£é¢é˜´å½±ï¼ˆè¾ƒè¿‘ä¸”å¯ä»¥æ°´å¹³ç§»åŠ¨å…‰æºï¼‰</h3><p>å½“å…‰æºåœ¨ä½ æ­£é¢æˆ–èƒŒé¢ï¼Œä¸”å¯ä»¥æ°´å¹³ç§»åŠ¨ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿä»¥åæ­£é¢æˆ–èƒŒé¢çš„æŠ•å½±ã€‚æœ‰ç‚¹åƒæ™šä¸Šåœ¨é©¬è·¯ä¸Šï¼Œè¿œå¤„è·¯ç¯äº§ç”Ÿçš„æŠ•å½±æ•ˆæœã€‚</p>
<p><img src="http://image.runmaf.com/2020-06-10-15917214247257.jpg" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">// height è´Ÿæ•°ï¼Œå…‰æºåœ¨æ­£é¢ï¼Œé˜´å½±ç»˜åˆ¶åœ¨èƒŒå½±ã€‚æ­£æ•°ï¼Œå…‰æºåœ¨èƒŒé¢ï¼Œé˜´å½±ç»˜åˆ¶åœ¨å‰å½±</div><div class="line">let scale = CGSize(width: 0.8, height: -0.6)</div><div class="line">// å…‰æºæ°´å¹³ä½ç½®</div><div class="line">let offsetX: CGFloat = 100</div><div class="line"></div><div class="line">let shadowPath = UIBezierPath()</div><div class="line">shadowPath.move(to:</div><div class="line">    CGPoint(</div><div class="line">        x: 0,</div><div class="line">        y: imageView.frame.height</div><div class="line">    )</div><div class="line">)</div><div class="line">shadowPath.addLine(to:</div><div class="line">    CGPoint(</div><div class="line">        x: imageView.frame.width,</div><div class="line">        y: imageView.frame.height</div><div class="line">    )</div><div class="line">)</div><div class="line">shadowPath.addLine(to:</div><div class="line">    CGPoint(</div><div class="line">        x: imageView.frame.width * scale.width + offsetX,</div><div class="line">        y: imageView.frame.height * (1 + scale.height)</div><div class="line">    )</div><div class="line">)</div><div class="line">shadowPath.addLine(to:</div><div class="line">    CGPoint(</div><div class="line">        x: imageView.frame.width * (1 - scale.width) + offsetX,</div><div class="line">        y: imageView.frame.height * (1 + scale.height)</div><div class="line">    )</div><div class="line">)</div><div class="line">imageView.layer.shadowColor = UIColor.black.cgColor</div><div class="line">imageView.layer.shadowRadius = 7</div><div class="line">imageView.layer.shadowOpacity = 0.5</div><div class="line">imageView.layer.shadowPath = shadowPath.cgPath</div><div class="line">imageView.layer.masksToBounds = false</div></pre></td></tr></table></figure>
<h3 id="å¼§å½¢é˜´å½±"><a href="#å¼§å½¢é˜´å½±" class="headerlink" title="å¼§å½¢é˜´å½±"></a>å¼§å½¢é˜´å½±</h3><p>å¼§å½¢é˜´å½±ç®—æˆ‘æ¯”è¾ƒå–œæ¬¢çš„é˜´å½±æ•ˆæœä¹‹ä¸€äº†ã€‚ä¸€æ˜¯åœ†æ»‘çš„æ›²çº¿æ˜¾å¾—ä¸ä¼šé‚£ä¹ˆç”Ÿç¡¬ï¼Œç„¶åæ•´ä½“ç«‹ä½“æ„Ÿä¹Ÿæ¯”è¾ƒå¥½ã€‚<br>å¯ä»¥è°ƒèŠ‚å¼§åº¦å’Œæ¨¡ç³Šåº¦æ¥è®©å¼§åº¦æ›´æ˜æ˜¾ï¼Œä¸è¿‡æˆ‘è§‰å¾—è‡ªç„¶ç‚¹æ›´é‡è¦ã€‚</p>
<p><img src="http://image.runmaf.com/2020-06-10-15917217072946.jpg" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// æ›²å½¢é˜´å½±çš„æ›²åº¦</span></div><div class="line"><span class="keyword">let</span> curve: <span class="type">CGFloat</span> = <span class="number">15</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> shadowPath = <span class="type">UIBezierPath</span>()</div><div class="line">shadowPath.move(to: <span class="type">CGPoint</span>.zero)</div><div class="line">shadowPath.addLine(to: <span class="type">CGPoint</span>(</div><div class="line">    x: imageView.frame.width,</div><div class="line">    y: <span class="number">0</span></div><div class="line">))</div><div class="line">shadowPath.addLine(to: <span class="type">CGPoint</span>(</div><div class="line">    x: imageView.frame.width,</div><div class="line">    y: imageView.frame.height + curve</div><div class="line">))</div><div class="line">shadowPath.addCurve(</div><div class="line">    to: <span class="type">CGPoint</span>(</div><div class="line">        x: <span class="number">0</span>,</div><div class="line">        y: imageView.frame.height + curve</div><div class="line">    ),</div><div class="line">    controlPoint1: <span class="type">CGPoint</span>(</div><div class="line">        x: imageView.frame.width,</div><div class="line">        y: imageView.frame.height</div><div class="line">    ),</div><div class="line">    controlPoint2: <span class="type">CGPoint</span>(</div><div class="line">        x: <span class="number">0</span>,</div><div class="line">        y: imageView.frame.height</div><div class="line">    )</div><div class="line">)</div><div class="line">imageView.layer.shadowPath = shadowPath.cgPath</div><div class="line">imageView.layer.shadowRadius = <span class="number">10</span></div><div class="line">imageView.layer.shadowOffset = <span class="type">CGSize</span>(width: <span class="number">0</span>, height: <span class="number">10</span>)</div><div class="line">imageView.layer.shadowOpacity = <span class="number">0.5</span></div><div class="line">imageView.layer.shadowColor = <span class="type">UIColor</span>.black.cgColor</div><div class="line">imageView.layer.masksToBounds = <span class="literal">false</span></div></pre></td></tr></table></figure>
<h3 id="æ‰å¹³é˜´å½±"><a href="#æ‰å¹³é˜´å½±" class="headerlink" title="æ‰å¹³é˜´å½±"></a>æ‰å¹³é˜´å½±</h3><p>è¿™ç§é˜´å½±ç”¨çš„å¾ˆå°‘ï¼Œç®€å•çœ‹çœ‹æ•ˆæœå¸¦è¿‡å§ã€‚</p>
<p><img src="http://image.runmaf.com/2020-06-10-15917216653737.jpg" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">let</span> scale = <span class="type">CGSize</span>(width: <span class="number">1.5</span>, height: <span class="number">1.5</span>)</div><div class="line"><span class="keyword">let</span> offset = <span class="type">CGPoint</span>(x: imageView.frame.width, y: -imageView.frame.height)</div><div class="line"></div><div class="line"><span class="keyword">let</span> shadowPath = <span class="type">UIBezierPath</span>()</div><div class="line">shadowPath.move(to:</div><div class="line">    <span class="type">CGPoint</span>(</div><div class="line">        x: <span class="number">0</span>,</div><div class="line">        y: imageView.frame.height + (copysign(<span class="number">1</span>, scale.height) * copysign(<span class="number">1</span>, offset.x) == <span class="number">1</span> ? <span class="number">0</span> : offset.y)</div><div class="line">    )</div><div class="line">)</div><div class="line">shadowPath.addLine(to:</div><div class="line">    <span class="type">CGPoint</span>(</div><div class="line">        x: imageView.frame.width,</div><div class="line">        y: imageView.frame.height + (copysign(<span class="number">1</span>, scale.height) * copysign(<span class="number">1</span>, offset.x) == -<span class="number">1</span> ? <span class="number">0</span> : offset.y)</div><div class="line">    )</div><div class="line">)</div><div class="line">shadowPath.addLine(to:</div><div class="line">    <span class="type">CGPoint</span>(</div><div class="line">        x: imageView.frame.width * scale.width + offset.x,</div><div class="line">        y: imageView.frame.height * (<span class="number">1</span> + scale.height) + offset.y</div><div class="line">    )</div><div class="line">)</div><div class="line">shadowPath.addLine(to:</div><div class="line">    <span class="type">CGPoint</span>(</div><div class="line">        x: imageView.frame.width * (<span class="number">1</span> - scale.width) + offset.x,</div><div class="line">        y: imageView.frame.height * (<span class="number">1</span> + scale.height) + offset.y</div><div class="line">    )</div><div class="line">)</div><div class="line">imageView.layer.shadowPath = shadowPath.cgPath</div><div class="line">imageView.layer.shadowRadius = <span class="number">0</span></div><div class="line">imageView.layer.shadowOffset = .zero</div><div class="line">imageView.layer.shadowOpacity = <span class="number">0.2</span></div><div class="line">imageView.layer.shadowColor = <span class="type">UIColor</span>.black.cgColor</div><div class="line">imageView.layer.masksToBounds = <span class="literal">false</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2020/06/02/SwiftMagicInLeetCode/" itemprop="url">
                  Swiftåˆ·LeetCodeæ—¶å€™çš„ä¸€äº›æ–¹ä¾¿çš„API
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2020-06-02T18:29:20+08:00" content="2020-06-02">
              2020-06-02
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Swiftåˆ·LeetCodeæ—¶å€™çš„ä¸€äº›æ–¹ä¾¿çš„API"><a href="#Swiftåˆ·LeetCodeæ—¶å€™çš„ä¸€äº›æ–¹ä¾¿çš„API" class="headerlink" title="Swiftåˆ·LeetCodeæ—¶å€™çš„ä¸€äº›æ–¹ä¾¿çš„API"></a>Swiftåˆ·LeetCodeæ—¶å€™çš„ä¸€äº›æ–¹ä¾¿çš„API</h1><p>ç”¨Swiftåˆ·äº†1ä¸ªæœˆLeetCodeï¼Œä¸€äº›å‡½æ•°åº“ã€APIã€æ•°æ®ç»“æ„ç›¸æ¯”Pythonç¡®å®æœ‰ç‚¹å·®è·ï¼Œä¸è¿‡è¿˜æ˜¯å‘ç°äº†ä¸€äº›ä»¥å‰ä¸çŸ¥é“çš„å°æŠ€å·§ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹ã€‚</p>
<h2 id="ObjectIdentifier"><a href="#ObjectIdentifier" class="headerlink" title="ObjectIdentifier"></a>ObjectIdentifier</h2><p>å­—å…¸ç¼“å­˜ç»“æœæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„ç©ºé—´æ¢æ—¶é—´çš„æŠ€å·§ï¼Œä½†æ˜¯TreeNodeæˆ–ListNodeè¿™ç§ï¼Œå¦‚æœä»–ä»¬çš„valä¸æ˜¯å”¯ä¸€å­˜åœ¨çš„ï¼Œé‚£ä¹ˆç”¨ä»€ä¹ˆä½œä¸ºå­—å…¸çš„keyå‘¢ï¼Ÿ<br>è¿™æ—¶å€™å°±æ˜¯è‹±é›„å‡ºåœºçš„æ—¶å€™äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> <span class="keyword">left</span>: <span class="type">TreeNode</span>?</div><div class="line">    <span class="keyword">var</span> <span class="keyword">right</span>: <span class="type">TreeNode</span>?</div><div class="line">    <span class="keyword">var</span> val: <span class="type">Int</span></div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(<span class="number">_</span> val: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.val = val</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> empty = <span class="type">TreeNode</span>(-<span class="number">1</span>)</div><div class="line"></div><div class="line"><span class="keyword">let</span> root = <span class="type">TreeNode</span>(<span class="number">0</span>)</div><div class="line">root.<span class="keyword">left</span> = <span class="type">TreeNode</span>(<span class="number">1</span>)</div><div class="line">root.<span class="keyword">right</span> = <span class="type">TreeNode</span>(<span class="number">2</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> dict = [<span class="type">ObjectIdentifier</span>: <span class="type">TreeNode</span>]()</div><div class="line">dict[<span class="type">ObjectIdentifier</span>(root)] = root</div><div class="line"><span class="built_in">print</span>(dict)</div><div class="line"><span class="built_in">print</span>(dict[<span class="type">ObjectIdentifier</span>(root), <span class="keyword">default</span>: empty].val)</div><div class="line"><span class="comment">//[ObjectIdentifier(0x0000600002d32b80): __lldb_expr_15.TreeNode]</span></div><div class="line"><span class="comment">//0</span></div></pre></td></tr></table></figure>
<p>å‰å®³äº†å§ï¼Œç›´æ¥å¯ä»¥ç”¨ObjectIdentifieråškeyï¼Œä¸çŸ¥é“å®ƒä¹‹å‰ï¼Œæˆ‘è¿˜è‡ªå·±å†™ä¸ªhashå‡½æ•°å»å®ç°Hashableã€‚</p>
<h3 id="ObjectIdentifierçš„åŸç†"><a href="#ObjectIdentifierçš„åŸç†" class="headerlink" title="ObjectIdentifierçš„åŸç†"></a>ObjectIdentifierçš„åŸç†</h3><p>é‚£ä¹ˆä»–æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿçœ‹ä¸‹é¢ä»£ç ä½ å°±çŸ¥é“äº†ï¼Œå…¶å®ä»–å°±æ˜¯ç”¨æŒ‡é’ˆåœ°å€æ¥åšçš„ã€‚ç„¶åå†ç»™ä»–å®ç°Hashableå’ŒEquatableæ¥å£ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">ObjectIdentifier</span> </span>&#123;</div><div class="line">  <span class="keyword">internal</span> <span class="keyword">let</span> _value: <span class="type">Builtin</span>.<span class="type">RawPointer</span></div><div class="line">  <span class="keyword">public</span> <span class="keyword">init</span>(<span class="number">_</span> x: <span class="type">AnyObject</span>) &#123;</div><div class="line">    <span class="keyword">self</span>._value = <span class="type">Builtin</span>.bridgeToRawPointer(x)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">public</span> <span class="keyword">init</span>(<span class="number">_</span> x: <span class="type">Any</span>.<span class="type">Type</span>) &#123;</div><div class="line">    <span class="keyword">self</span>._value = <span class="built_in">unsafeBitCast</span>(x, to: <span class="type">Builtin</span>.<span class="type">RawPointer</span>.<span class="keyword">self</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ObjectIdentifier</span>: <span class="title">Equatable</span> </span>&#123;</div><div class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> == <span class="params">(x: ObjectIdentifier, y: ObjectIdentifier)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="type">Bool</span>(<span class="type">Builtin</span>.cmp_eq_RawPointer(x._value, y._value))</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ObjectIdentifier</span>: <span class="title">Hashable</span> </span>&#123;</div><div class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">hash</span><span class="params">(into hasher: <span class="keyword">inout</span> Hasher)</span></span> &#123;</div><div class="line">    hasher.combine(<span class="type">Int</span>(<span class="type">Builtin</span>.ptrtoint_Word(_value)))</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h3><p>å¦‚æœé¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨åˆ°è¿™ä¸ªçš„è¯ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªæ–¹ä¾¿çš„åè®®æ‰©å±•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">Identifiable</span> </span>&#123;</div><div class="line">  associatedtype <span class="type">ID</span>: <span class="type">Hashable</span></div><div class="line">  <span class="keyword">var</span> id: <span class="type">ID</span> &#123; <span class="keyword">get</span> &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Identifiable</span> <span class="title">where</span> <span class="title">Self</span>: <span class="title">AnyObject</span> </span>&#123;</div><div class="line">  <span class="keyword">public</span> <span class="keyword">var</span> id: <span class="type">ObjectIdentifier</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="type">ObjectIdentifier</span>(<span class="keyword">self</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="dump-å‡½æ•°"><a href="#dump-å‡½æ•°" class="headerlink" title="dump å‡½æ•°"></a>dump å‡½æ•°</h2><p>printæ‰“å°å¯¹è±¡çš„è¯ï¼Œæ— æ³•æ‰“å°å‡ºå¯¹è±¡çš„å±‚æ¬¡ç»“æ„ï¼Œåˆ·LeetCodeå‡ºé”™çš„æ—¶å€™ï¼Œè°ƒè¯•å°±ä¸æ–¹ä¾¿äº†ï¼Œæœ‰æ—¶å€™éœ€è¦ä¸ºäº†è°ƒè¯•ä¿¡æ¯å†™å¾ˆé•¿çš„printä»£ç ã€‚<br>è¿™æ—¶å€™æœ‰dumpä½ æ¥æ–¹ä¾¿äº†ï¼Œæ¥å‰é¢çš„TreeNodeå¯¹è±¡ï¼Œå¯¹ä»–è¿›è¡Œè¾“å‡ºã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">print</span>(root)</div><div class="line"><span class="comment">// __lldb_expr_31.TreeNode</span></div><div class="line"></div><div class="line"><span class="built_in">dump</span>(root)</div><div class="line"><span class="comment">//â–¿ __lldb_expr_17.TreeNode #0</span></div><div class="line"><span class="comment">//â–¿ left: Optional(__lldb_expr_17.TreeNode)</span></div><div class="line"><span class="comment">//  â–¿ some: __lldb_expr_17.TreeNode #1</span></div><div class="line"><span class="comment">//    - left: nil</span></div><div class="line"><span class="comment">//    - right: nil</span></div><div class="line"><span class="comment">//    - val: 1</span></div><div class="line"><span class="comment">//â–¿ right: Optional(__lldb_expr_17.TreeNode)</span></div><div class="line"><span class="comment">//  â–¿ some: __lldb_expr_17.TreeNode #2</span></div><div class="line"><span class="comment">//    - left: nil</span></div><div class="line"><span class="comment">//    - right: nil</span></div><div class="line"><span class="comment">//    - val: 2</span></div><div class="line"><span class="comment">//- val: 0</span></div></pre></td></tr></table></figure>
<p>æ˜¯ä¸æ˜¯å¾ˆå¥½ç”¨ï¼Ÿ</p>
<h2 id="sequence"><a href="#sequence" class="headerlink" title="sequence"></a>sequence</h2><p>åšé“¾è¡¨é¢˜æ—¶å€™ç»å¸¸æœ‰è¿™ä¸ªéœ€æ±‚ï¼Œéå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œéœ€è¦ç”¨whileï¼Œç„¶åç”¨ä¸ªä¸´æ—¶å¯¹è±¡ä¸€å±‚ä¸€å±‚çš„å¾€ä¸‹èµ°ã€‚<br>ç»“æœæ˜¯ä¸€æ ·ï¼Œä¸ªäººè®¤ä¸ºä»£ç å¯è¯»æ€§ä¸Šæ¯”è¾ƒå·®ï¼Œå¯ä»¥æ¢æˆsequenceæ¥åšã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">let</span> firstNode = <span class="type">ListNode</span>(<span class="number">0</span>)</div><div class="line">firstNode.next = <span class="type">ListNode</span>(<span class="number">1</span>)</div><div class="line">firstNode.next?.next = <span class="type">ListNode</span>(<span class="number">2</span>)</div><div class="line">firstNode.next?.next?.next = <span class="type">ListNode</span>(<span class="number">3</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> curr: <span class="type">ListNode</span>? = firstNode</div><div class="line"><span class="keyword">while</span> curr != <span class="literal">nil</span> &#123;</div><div class="line">    <span class="built_in">print</span>(curr!.val)</div><div class="line">    curr = curr?.next</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// æ•ˆæœä¸€æ ·</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> curr <span class="keyword">in</span> sequence(first: firstNode, next: &#123; $<span class="number">0</span>.next &#125; ) &#123;</div><div class="line">    <span class="built_in">print</span>(curr.val)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//0</span></div><div class="line"><span class="comment">//1</span></div><div class="line"><span class="comment">//2</span></div><div class="line"><span class="comment">//3</span></div></pre></td></tr></table></figure>
<h2 id="swap"><a href="#swap" class="headerlink" title="swap"></a>swap</h2><p>è¿™ä¸ªä¹Ÿä¸»è¦æ˜¯å¯è¯»æ€§ï¼Œä¸ç„¶tuppleæ–¹å¼å°±å¯ä»¥æå®šäº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = <span class="string">"a"</span></div><div class="line"><span class="keyword">var</span> b = <span class="string">"b"</span></div><div class="line"></div><div class="line">(a, b) = (b, a)</div><div class="line"><span class="built_in">print</span>(a, b)</div><div class="line"></div><div class="line"><span class="comment">// æ•ˆæœç›¸åŒ</span></div><div class="line"></div><div class="line"><span class="built_in">swap</span>(&amp;a, &amp;b)</div><div class="line"><span class="built_in">print</span>(a, b)</div><div class="line"><span class="comment">// b a</span></div></pre></td></tr></table></figure>
<h2 id="repeating-å’Œ-Repeated"><a href="#repeating-å’Œ-Repeated" class="headerlink" title="repeating å’Œ Repeated"></a>repeating å’Œ Repeated</h2><p>å¿«é€Ÿåˆ›å»ºåŒæ ·å…ƒç´ æ•°ç»„çš„ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
<p>å¿«æ·åˆ›å»ºåŠ¨è§„äºŒå…ƒæ•°ç»„æˆ–è€…åšæ‰¹é‡æ›¿æ¢æ—¶å€™ç‰¹åˆ«å¥½ç”¨ã€‚</p>
<font color="red">è¦æ³¨æ„çš„æ˜¯ï¼Œé‡å¤çš„å€¼å¦‚æœæ˜¯å¯¹è±¡çš„è¯ï¼Œæ˜¯åŒä¸€ä¸ªå¼•ç”¨çš„å“¦ã€‚</font>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> nums = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</div><div class="line"><span class="keyword">var</span> dp = <span class="type">Array</span>(repeating: <span class="type">Array</span>(repeating: <span class="number">0</span>, <span class="built_in">count</span>: nums.<span class="built_in">count</span>), <span class="built_in">count</span>: nums.<span class="built_in">count</span>)</div><div class="line"><span class="built_in">print</span>(dp)</div><div class="line"><span class="comment">// [[0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0]]</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> repeated: <span class="type">Repeated</span>&lt;<span class="type">String</span>&gt; = repeatElement(<span class="string">"SwiftRocks"</span>, <span class="built_in">count</span>: <span class="number">3</span>)</div><div class="line"><span class="keyword">for</span> value <span class="keyword">in</span> repeated &#123;</div><div class="line">    <span class="built_in">print</span>(value)</div><div class="line">&#125;</div><div class="line"><span class="comment">//SwiftRocks</span></div><div class="line"><span class="comment">//SwiftRocks</span></div><div class="line"><span class="comment">//SwiftRocks</span></div><div class="line"></div><div class="line">nums.replaceSubrange(<span class="number">2</span>...<span class="number">5</span>, with: [<span class="type">Int</span>](repeating: <span class="number">1</span>, <span class="built_in">count</span>: <span class="number">4</span>))</div><div class="line"><span class="built_in">print</span>(nums)</div><div class="line"><span class="comment">//[1, 2, 1, 1, 1, 1]</span></div><div class="line">nums.replaceSubrange(<span class="number">2</span>...<span class="number">5</span>, with: repeatElement(<span class="number">3</span>, <span class="built_in">count</span>: <span class="number">4</span>))</div><div class="line"><span class="built_in">print</span>(nums)</div><div class="line"><span class="comment">//[1, 2, 3, 3, 3, 3]</span></div></pre></td></tr></table></figure>
<h2 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h2><p>æŠŠä¸¤ä¸ªæ•°ç»„å‹åˆ°ä¸€èµ·ï¼Œé¢˜ç›®æœ‰ä¸¤ä¸ªåŒæ ·é•¿åº¦çš„æ•°ç»„éœ€è¦ä¸€èµ·éå†ï¼Œè¿™ä¸ªå°±å¾ˆå¥½ç”¨äº†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> nums = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</div><div class="line"></div><div class="line"><span class="keyword">var</span> strs = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>]</div><div class="line"></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">zip</span>(nums, strs) &#123;</div><div class="line">    <span class="built_in">print</span>(item)</div><div class="line">&#125;</div><div class="line"><span class="comment">//(1, "a")</span></div><div class="line"><span class="comment">//(2, "b")</span></div><div class="line"><span class="comment">//(3, "c")</span></div></pre></td></tr></table></figure>
<h2 id="stride"><a href="#stride" class="headerlink" title="stride"></a>stride</h2><p>åå‘éå†ï¼Œè·³è·ƒéå†ã€‚æ³¨æ„ï¼Œtoä¸åŒ…å«å“¦ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">// åå‘éå†ï¼Œtoä¸åŒ…å«ï¼Œæ‰€ä»¥è¦åˆ°-1</div><div class="line">for i in stride(from: 10, to: -1, by: -1) &#123;</div><div class="line">    print(i)</div><div class="line">&#125;</div><div class="line">// è·³è·ƒéå†</div><div class="line">for i in stride(from: 0, to: 10, by: 2) &#123;</div><div class="line">    print(i)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p>max min pow absï¼Œæ¯”è¾ƒåŸºç¡€ï¼ŒåŸºæœ¬æ²¡äººä¸çŸ¥é“äº†ï¼Œå°±ä¸è¯´äº†ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2020/05/28/SwiftCodePoisoningManual/" itemprop="url">
                  SwiftæŠ•æ¯’åˆ©å™¨dynamicMemberLookup
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2020-05-28T19:02:36+08:00" content="2020-05-28">
              2020-05-28
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜"><a href="#è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜" class="headerlink" title="è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜"></a>è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜</h1><h2 id="é¢˜å¤–è¯"><a href="#é¢˜å¤–è¯" class="headerlink" title="é¢˜å¤–è¯"></a>é¢˜å¤–è¯</h2><p>å¼€å§‹æ¢å¤å†™æ–‡ç« ï¼Œä¸è¿‡éƒ½å†™çš„éƒ½å¥½ä»“ä¿ƒï¼Œå†™æ–‡ç« çš„ç›®çš„å…¶å®æ˜¯ä¸ºäº†è‡ªå·±é€šè¿‡å†™å‡ºæ¥èƒ½å¢åŠ è‡ªå·±çš„ç†è§£ï¼Œç°åœ¨è¿™æ ·ç¡®å®æœ‰ç‚¹åç¦»åˆè¡·äº†ã€‚<br>ç°åœ¨å¤§å¤šæ˜¯6ç‚¹ä¸‹ç­åï¼Œ7ç‚¹å¼€å§‹åŠ ç­å‰æŠŠæ—©ä¸Šåœ°é“ä¸Šçœ‹çš„ä¸œè¥¿è‡ªå·±æ•²ä»£ç ç†è§£ä¸‹ï¼Œé¡ºä¾¿è®°å½•ä¸‹ï¼Œæ—¶é—´ä»“ä¿ƒã€‚ä½†æ˜¯ä¸å½“å¤©å°±å†™ï¼Œéš”å¤©åŸºæœ¬å°±æ‡’å¾—å†™äº†ï¼Œå»å¹´åŸºæœ¬æ˜¯è¿™ä¸ªæ ·ï¼Œæ‰€ä»¥å…ˆåšæŒåšèµ·æ¥å†å¢åŠ è´¨é‡å§ã€‚</p>
<h2 id="åŠ¨æ€æˆå‘˜æŸ¥æ‰¾"><a href="#åŠ¨æ€æˆå‘˜æŸ¥æ‰¾" class="headerlink" title="åŠ¨æ€æˆå‘˜æŸ¥æ‰¾"></a>åŠ¨æ€æˆå‘˜æŸ¥æ‰¾</h2><p>è¿™æ˜¯ä¸ªSwift4.2æ·»åŠ çš„ç‰¹æ€§ï¼Œä¸è¿‡å®˜æ–¹åœ¨å½“æ—¶çš„Sessioné‡Œå¹¶æ²¡æœ‰æåˆ°ä»–ï¼Œå¯èƒ½ä¹Ÿæ˜¯è€ƒè™‘åˆ°è¿™å¤§å¤§é™ä½äº†Swiftçš„å®‰å…¨æ€§ï¼Œä¼šå¯¼è‡´ç¼–è¯‘å™¨æ ¹æœ¬æ²¡æ³•åœ¨ç¼–è¯‘æœŸé—´æ£€æŸ¥å‡ºè°ƒç”¨é”™è¯¯ï¼Œä¹Ÿä¼šè®©ä½ åœ¨ç¼–å†™ä»£ç æ—¶å€™ï¼Œæ²¡æœ‰codingé”™è¯¯çš„æç¤ºã€‚<br>åšè¿‡JavaScriptçš„åŒå­¦åº”è¯¥æ˜¯å¾ˆç†Ÿæ‚‰è¿™ä¸ªç‰¹æ€§çš„ï¼Œé€šè¿‡.çš„è°ƒç”¨æ–¹å¼æ›¿ä»£[]çš„æ–¹å¼ã€‚</p>
<h3 id="Hello-DynamicMemberLookup"><a href="#Hello-DynamicMemberLookup" class="headerlink" title="Hello DynamicMemberLookup"></a>Hello DynamicMemberLookup</h3><p>ç»™ç±»ã€ç»“æ„ä½“ã€æšä¸¾æ·»åŠ è¿™ä¸ªæ³¨è§£ã€‚<br>æ·»åŠ åï¼Œé€šè¿‡.xxxçš„éƒ½ä¼šè¿›å…¥åˆ°subscriptå‡½æ•°ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">@dynamicMemberLookup</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">subscript</span>(dynamicMember member: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">let</span> properties = [<span class="string">"nickName"</span>: <span class="string">"David_Woo"</span>, <span class="string">"hoby"</span>: <span class="string">"marathon"</span>]</div><div class="line">        <span class="keyword">return</span> properties[member, <span class="keyword">default</span>: <span class="string">"ä¸ï¼Œä½ æ²¡æœ‰"</span>]</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> me = <span class="type">Person</span>()</div><div class="line"><span class="built_in">print</span>(me.nickName) <span class="comment">//David_Woo</span></div><div class="line"><span class="built_in">print</span>(me.hoby) <span class="comment">// marathon</span></div><div class="line"><span class="built_in">print</span>(me.villa) <span class="comment">//ä¸ï¼Œä½ æ²¡æœ‰</span></div></pre></td></tr></table></figure>
<p>å…¶å®ä»–å°±æ˜¯ç¼–è¯‘æ—¶æŠŠme.xxxå˜æˆäº†me[xxx]ï¼Œç„¶åå°±æ˜¯ä½ ç†Ÿæ‚‰çš„ä¸‹æ ‡çŸ¥è¯†ç‚¹äº†ã€‚</p>
<h3 id="One-More"><a href="#One-More" class="headerlink" title="One More"></a>One More</h3><p>ä¸ä¸‹æ ‡ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç¼–è¯‘å¤šä¸ªï¼Œé€šè¿‡è¿”å›å€¼æ¥åŒºåˆ†ã€‚ä¸è¿‡å®šä¹‰å¤šä¸ªä»¥åè°ƒç”¨å°±å˜éº»çƒ¦äº†ï¼Œå¦‚æœä½ åœ¨è°ƒç”¨å¤„æ˜ç¡®ç±»å‹ï¼Œé‚£ç¼–è¯‘å™¨å°±ä¸çŸ¥é“åŒ¹é…åˆ°é‚£ä¸ªè„šæœ¬äº†ï¼Œå°±ä¼šç¼–è¯‘æŠ¥é”™ã€‚</p>
<p>æœ‰ä¸ªå¥½çš„å°±æ˜¯å¯ä»¥é€šè¿‡ä»–æ¥è¿”å›å‡½æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">@dynamicMemberLookup</div><div class="line">struct Person &#123;</div><div class="line">    subscript(dynamicMember member: String) -&gt; String &#123;</div><div class="line">        let properties = [&quot;nickName&quot;: &quot;David_Woo&quot;, &quot;hoby&quot;: &quot;marathon&quot;]</div><div class="line">        return properties[member, default: &quot;something unexpected&quot;]</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    subscript(dynamicMember member: String) -&gt; () -&gt; () &#123;</div><div class="line">        return &#123;</div><div class="line">            print(&quot;This is fun&quot;)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">let me = Person()</div><div class="line"></div><div class="line">let nickName: String = me.nickName</div><div class="line">let hoby: String = me.hoby</div><div class="line">let villa: String = me.villa</div><div class="line"></div><div class="line">me.a() // This is fun</div></pre></td></tr></table></figure>
<h3 id="é‡ç‚¹æ¥äº†ï¼Œå¦‚ä½•æŠ•æ¯’"><a href="#é‡ç‚¹æ¥äº†ï¼Œå¦‚ä½•æŠ•æ¯’" class="headerlink" title="é‡ç‚¹æ¥äº†ï¼Œå¦‚ä½•æŠ•æ¯’"></a>é‡ç‚¹æ¥äº†ï¼Œå¦‚ä½•æŠ•æ¯’</h3><p>å¯æ€•çš„æ¥äº†ï¼Œè¿™ä¸ªç‰¹æ€§æ˜¯å¯ä»¥ç»§æ‰¿çš„ã€‚ä¹Ÿå°±æ˜¯è¯´åŸºç±»ä¸Šå®šä¹‰äº†ï¼Œé‚£ä¹ˆæ‰€æœ‰ç»§æ‰¿çš„å­ç±»ä¹Ÿéƒ½æœ‰è¿™ä¸ªç‰¹æ€§äº†ï¼Œè¿™æ ·ä¸å°å¿ƒä¸€äº›å±æ€§è°ƒç”¨æ•²é”™é”®ç›˜ç¼–è¯‘å™¨éƒ½ä¸ä¼šæç¤ºä½ äº†ã€‚</p>
<font color="red">å°½å¯èƒ½ä¸è¦åœ¨åŸºç±»ä¸Šä½¿ç”¨è¿™ä¸ªç‰¹æ€§</font>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">@dynamicMemberLookup</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">subscript</span>(dynamicMember member: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">let</span> properties = [<span class="string">"nickName"</span>: <span class="string">"David_Woo"</span>, <span class="string">"hoby"</span>: <span class="string">"marathon"</span>]</div><div class="line">        <span class="keyword">return</span> properties[member, <span class="keyword">default</span>: <span class="string">"something unexpected"</span>]</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span>: <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="comment">// ä¸ºä»€ä¹ˆå·¥èµ„æ˜¯ä¸å¯å˜ç±»å‹ï¼Œé‚£ä½ å¾—é—®è€æ¿</span></div><div class="line">    <span class="keyword">let</span> salary: <span class="type">Int</span></div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</div><div class="line">        salary = <span class="number">0</span></div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(<span class="number">_</span> salary: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.salary = salary</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> me = <span class="type">Employee</span>(<span class="number">0</span>)</div><div class="line"><span class="built_in">print</span>(me.nickName)</div><div class="line"><span class="built_in">print</span>(me.hoby)</div><div class="line"><span class="built_in">print</span>(me.villa) <span class="comment">// ç¼–è¯‘å™¨ä¸ä¼šæç¤ºé”™è¯¯</span></div><div class="line"><span class="built_in">print</span>(me.salary) <span class="comment">// ä½†æ˜¯IDEè¿˜æ˜¯ä¼šè‡ªåŠ¨æç¤ºçš„</span></div><div class="line"></div><div class="line"><span class="comment">// åœ¨æ­¤æŠ•æ¯’</span></div><div class="line">@dynamicMemberLookup</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">VVBaseViewController</span> : <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    <span class="keyword">subscript</span>(dynamicMember member: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Congratulations! U will be fired!"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ä¸å¯ä»¥ç”¨æ¥æ»¡è¶³åè®®"><a href="#ä¸å¯ä»¥ç”¨æ¥æ»¡è¶³åè®®" class="headerlink" title="ä¸å¯ä»¥ç”¨æ¥æ»¡è¶³åè®®"></a>ä¸å¯ä»¥ç”¨æ¥æ»¡è¶³åè®®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">protocol Namable &#123;</div><div class="line">    var nickName: String &#123; get &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@dynamicMemberLookup</div><div class="line">class Person &#123;</div><div class="line">    subscript(dynamicMember member: String) -&gt; String &#123;</div><div class="line">        let properties = [&quot;nickName&quot;: &quot;David_Woo&quot;, &quot;hoby&quot;: &quot;marathon&quot;]</div><div class="line">        return properties[member, default: &quot;something unexpected&quot;]</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// ä¼šç¼–è¯‘å‡ºé”™ï¼Œè¿˜æ˜¯è¦æ‰‹åŠ¨å®ç°nickName</div><div class="line">class Employee: Person, Namable &#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2020/05/28/HelloSwiftPropertyWrappers/" itemprop="url">
                  Swiftçš„å±æ€§è£…é¥°å™¨
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2020-05-28T01:09:31+08:00" content="2020-05-28">
              2020-05-28
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Swiftçš„å±æ€§è£…é¥°å™¨"><a href="#Swiftçš„å±æ€§è£…é¥°å™¨" class="headerlink" title="Swiftçš„å±æ€§è£…é¥°å™¨"></a>Swiftçš„å±æ€§è£…é¥°å™¨</h1><p>åšPythonå¼€å‘çš„ï¼Œè‚¯å®šå¯¹å±æ€§è£…é¥°å™¨è¿™ä¸œè¥¿æ˜¯åˆçˆ±åˆæ¨ã€‚çˆ±æ˜¯å› ä¸ºå¸¦æ¥äº†å¾ˆå¤šéå†ï¼Œç®€åŒ–ä»£ç ï¼Œå‰¥ç¦»ä¸€äº›å±æ€§çš„å¤„ç†é€»è¾‘ã€‚ç‹ æ˜¯æ»¥ç”¨ä»¥åï¼Œå¯è¯»æ€§å¾ˆå·®ï¼Œä¸€å †çš„è£…é¥°å™¨ï¼Œä¸ç†Ÿæ‚‰è¿™ä¸ªæ¨¡å—çš„è¯å¾—å»çœ‹ä¸€å †çš„è£…é¥°å™¨æºç ã€‚</p>
<p>è‹¹æœåœ¨å»å¹´Swift4.1å°±å‘å¸ƒäº†è¿™ä¸ªåŠŸèƒ½ï¼Œå¹¶ä¸”WWDCæœ‰ä¸€ä¸ªSessionä¸“é—¨ä»‹ç»äº†è¿™ä¸ªæ–°ç‰¹æ€§ã€‚</p>
<p><a href="https://docs.swift.org/swift-book/LanguageGuide/Properties.html" target="_blank" rel="external">Swift.orgä¹Ÿæœ‰è¯¦ç»†çš„è¯´æ˜äº†ï¼Œç‚¹è¿™é‡Œè·³è½¬</a></p>
<p>ç¡®å®å¯¹WWDCå…³æ³¨å¤ªå°‘äº†ï¼Œè¿™ä¹ˆé‡è¦ä¿¡æ¯ç°åœ¨æ‰å‘ç°ã€‚ä¹‹å‰å­¦SwiftUIæ—¶å€™è¿˜æš—è‡ªæŠ±æ€¨æ€ä¹ˆSwift Foundationæ€ä¹ˆä¸åŠ å…¥è¿™ä¸ªå‘¢ã€‚çœ‹æ¥åªæ˜¯è‡ªå·±å¤ªLowäº†ã€‚</p>
<h2 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h2><ul>
<li>é€šè¿‡ç»“æ„ä½“è£…é¥°ä¸€ä¸ªå€¼ï¼ŒåŒ…è£…ä»–çš„getterå’Œsetter</li>
<li>ä¼ å…¥åˆå§‹å€¼</li>
<li>æ³¨å…¥ä¸€äº›é™„åŠ å€¼ï¼Œæ”¯æ’‘å½“å‰è£…é¥°å™¨å®Œæˆéœ€è¦çš„é€»è¾‘ï¼Œæ¯”å¦‚é™åˆ¶èŒƒå›´çš„è£…é¥°å™¨ï¼Œé‚£å°±éœ€è¦ä¼ å…¥ä¸€ä¸ªèŒƒå›´</li>
<li>å¤šä¸ªæ„é€ å™¨ï¼Œè®©é™„åŠ å€¼æˆ–è€…å½“å‰å€¼éƒ½å˜æˆå¯é€‰çš„</li>
<li>projectedValueï¼Œæ¯”å¦‚å‰é¢çš„é™åˆ¶èŒƒå›´ï¼Œé‚£ä¹ˆä¼ å…¥çš„å€¼ä¸åˆæ³•ï¼Œè¿™ä¸ªå€¼å°±ä¼šè®©è°ƒç”¨è€…å¯ä»¥è·Ÿè¸ªä¼ å…¥çš„åˆæ³•æ€§äº†</li>
</ul>
<h2 id="Hello-Swift-Property-Wrappers"><a href="#Hello-Swift-Property-Wrappers" class="headerlink" title="Hello Swift Property Wrappers"></a>Hello Swift Property Wrappers</h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ï¼Œä»–çš„ä½œç”¨å°±æ˜¯å»é™¤ç©ºæ ¼ã€‚<br>è£…é¥°å™¨éƒ½æ˜¯ç»“æ„ä½“ï¼Œéšè—ä¸€ä¸ªå®é™…ç¤ºä¾‹å˜é‡çš„ç§æœ‰å±æ€§ï¼Œé€šè¿‡è£…é¥°å±æ€§æ¥setterå’Œgetterã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">@propertyWrapper</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Trimmed</span> </span>&#123;</div><div class="line">    <span class="comment">// å®é™…å€¼ï¼Œè®¾ç½®æˆç§æœ‰å±æ€§ï¼Œä¿æŠ¤èµ·æ¥</span></div><div class="line">    <span class="keyword">private</span>(<span class="keyword">set</span>) <span class="keyword">var</span> value: <span class="type">String</span> = <span class="string">""</span></div><div class="line"></div><div class="line">    <span class="comment">// è£…é¥°å±æ€§åçš„getterå’Œsetteræ–¹æ³•</span></div><div class="line">    <span class="keyword">var</span> wrappedValue: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123; value &#125;</div><div class="line">        <span class="keyword">set</span> &#123; value = newValue.trimmingCharacters(<span class="keyword">in</span>: .whitespacesAndNewlines) &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// è£…é¥°å™¨çš„åˆå§‹åŒ–å™¨ï¼Œå¯ä»¥åˆå§‹é»˜è®¤å€¼</span></div><div class="line">    <span class="keyword">init</span>(wrappedValue initialValue: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.wrappedValue = initialValue</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="comment">//è£…é¥°å™¨,å› ä¸ºæ„é€ å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥å¿…é¡»æŒ‰ä¸€ä¸‹ä¸€ç§æ–¹å¼åˆå§‹åŒ–</span></div><div class="line">    @<span class="type">Trimmed</span>(wrappedValue: <span class="string">"  David "</span>) <span class="keyword">var</span> firstName: <span class="type">String</span></div><div class="line">    @<span class="type">Trimmed</span> <span class="keyword">var</span> lastName: <span class="type">String</span> = <span class="string">"  Woo "</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å¦‚ä½•å®ç°çš„ï¼Ÿ"><a href="#å¦‚ä½•å®ç°çš„ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°çš„ï¼Ÿ"></a>å¦‚ä½•å®ç°çš„ï¼Ÿ</h2><p>å…¶å®è£…é¥°å™¨å°±æ˜¯å¸®ä½ ç®€åŒ–äº†è¿™ä¸€å¤§å¨ä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="comment">//è£…é¥°å™¨,å› ä¸ºæ„é€ å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥å¿…é¡»æŒ‰ä¸€ä¸‹ä¸€ç§æ–¹å¼åˆå§‹åŒ–</span></div><div class="line">    @<span class="type">Trimmed</span>(wrappedValue: <span class="string">"  David "</span>) <span class="keyword">var</span> firstName: <span class="type">String</span></div><div class="line">    @<span class="type">Trimmed</span> <span class="keyword">var</span> lastName: <span class="type">String</span> = <span class="string">"  Woo "</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// å…¶å®è£…é¥°å™¨å°±æ˜¯å¸®ä½ æŠŠè¿™balabalaè¿™ä¹ˆå¤šä»£ç ï¼Œç®€åŒ–äº†</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person2</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> _firstName = <span class="type">Trimmed</span>(wrappedValue: <span class="string">"  David "</span>)</div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> _lastName = <span class="type">Trimmed</span>(wrappedValue: <span class="string">"  Woo "</span>)</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> firstName: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> _firstName.wrappedValue &#125;</div><div class="line">        <span class="keyword">set</span> &#123; _firstName.wrappedValue = newValue &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> lastName: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> _lastName.wrappedValue &#125;</div><div class="line">        <span class="keyword">set</span> &#123; _lastName.wrappedValue = newValue &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="é™„åŠ å±æ€§"><a href="#é™„åŠ å±æ€§" class="headerlink" title="é™„åŠ å±æ€§"></a>é™„åŠ å±æ€§</h2><p>åœ¨è£…é¥°å™¨ä¸­ä¼ å…¥ä¸€ä¸ªå€¼ï¼Œè®©è¿™ä¸ªå€¼åœ¨setteræˆ–getterä¸­å‘å…‰å‘çƒ­</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Folder</span> </span>&#123;</div><div class="line">		<span class="comment">// æ–‡ä»¶å¤¹çš„æœ€å¤§å®¹é‡ä¸èƒ½è¶…è¿‡100ä¸ªå­æ–‡ä»¶</span></div><div class="line">    @<span class="type">SmallNumber</span>(<span class="number">100</span>) <span class="keyword">var</span> capacity: <span class="type">Int</span> = <span class="number">0</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">@propertyWrapper</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SmallNumber</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> number: <span class="type">Int</span></div><div class="line">    <span class="comment">// ä¸€ä¸ªæœ€å¤§å€¼çš„é™„åŠ å€¼ï¼Œè£…é¥°çš„å¯¹è±¡ä¸èƒ½è¶…è¿‡è¿™ä¸ªå€¼ï¼Œç”¨ä»–åœ¨setterçš„æ—¶å€™åšçº¦æŸ</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> maxNumber: <span class="type">Int</span></div><div class="line">    <span class="comment">// å¢åŠ äº†é™„åŠ å€¼çš„åˆå§‹åŒ–å™¨</span></div><div class="line">    <span class="keyword">init</span>(wrappedValue value: <span class="type">Int</span>, <span class="number">_</span> maxNumber: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.number = value</div><div class="line">        <span class="keyword">self</span>.maxNumber = maxNumber</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> wrappedValue: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> number &#125;</div><div class="line">        <span class="comment">// åœ¨setterä¸­èµ·ä½œç”¨</span></div><div class="line">        <span class="keyword">set</span> &#123;</div><div class="line">            <span class="keyword">if</span> newValue &gt; maxNumber &#123;</div><div class="line">                number = maxNumber</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                number = newValue</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Folder</span> </span>&#123;</div><div class="line">		<span class="comment">// æ–‡ä»¶å¤¹çš„æœ€å¤§å®¹é‡ä¸èƒ½è¶…è¿‡100ä¸ªå­æ–‡ä»¶</span></div><div class="line">    @<span class="type">SmallNumber</span>(<span class="number">100</span>) <span class="keyword">var</span> capacity: <span class="type">Int</span> = <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Projecting-Value"><a href="#Projecting-Value" class="headerlink" title="Projecting Value"></a>Projecting Value</h2><p>è®¡å…¥ä¼ å…¥çš„å€¼åˆæ³•æ€§ï¼Œæ˜¯å¦è¢«é™åˆ¶æˆ–è°ƒæ•´äº†ï¼Œè®©è°ƒç”¨è€…å¯ä»¥è·Ÿè¸ªåˆ°ä¼ å…¥çš„åˆæ³•æ€§</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Folder</span> </span>&#123;</div><div class="line">    @<span class="type">SmallNumber</span>(<span class="number">100</span>) <span class="keyword">var</span> capacity: <span class="type">Int</span> = <span class="number">0</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> f = <span class="type">Folder</span>()</div><div class="line">f.capacity = <span class="number">10</span></div><div class="line"><span class="built_in">print</span>(f.$capacity) <span class="comment">// false æ­£å¸¸å†™å…¥</span></div><div class="line">f.capacity = <span class="number">200</span></div><div class="line"><span class="built_in">print</span>(f.$capacity) <span class="comment">// true ä¸åˆæ³•ï¼Œè¢«ä¿®æ”¹å†™å…¥å€¼</span></div><div class="line"></div><div class="line">@propertyWrapper</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SmallNumber</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> number: <span class="type">Int</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> maxNumber: <span class="type">Int</span></div><div class="line">    <span class="comment">// åˆæ³•æ€§å±æ€§</span></div><div class="line">    <span class="keyword">var</span> projectedValue: <span class="type">Bool</span></div><div class="line">    <span class="keyword">init</span>(wrappedValue value: <span class="type">Int</span>, <span class="number">_</span> maxNumber: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.number = value</div><div class="line">        <span class="keyword">self</span>.maxNumber = maxNumber</div><div class="line">        <span class="keyword">self</span>.projectedValue = <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> wrappedValue: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> number &#125;</div><div class="line">        <span class="keyword">set</span> &#123;</div><div class="line">            <span class="keyword">if</span> newValue &gt; maxNumber &#123;</div><div class="line">                number = maxNumber</div><div class="line">                <span class="comment">// è®¾ç½®è¾“å…¥å€¼æ˜¯ä¸åˆæ³•çš„</span></div><div class="line">                projectedValue = <span class="literal">true</span></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                number = newValue</div><div class="line">                projectedValue = <span class="literal">false</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Happy-Ending-With-Testing"><a href="#Happy-Ending-With-Testing" class="headerlink" title="Happy Ending With Testing"></a>Happy Ending With Testing</h2><p>å•å…ƒæµ‹è¯•éƒ¨åˆ†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">testExample</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">var</span> iOSProjectRootFolder = <span class="type">Folder</span>(title: <span class="string">"  Swift Property Wrappers  "</span>, body: <span class="string">"  Body   "</span>)</div><div class="line">        <span class="type">XCTAssertEqual</span>(iOSProjectRootFolder.title, <span class="string">"Swift Property Wrappers"</span>)</div><div class="line"></div><div class="line">        iOSProjectRootFolder.title = <span class="string">"      @propertyWrapper     "</span></div><div class="line">        <span class="type">XCTAssertEqual</span>(iOSProjectRootFolder.title, <span class="string">"@propertyWrapper"</span>)</div><div class="line">        </div><div class="line">        iOSProjectRootFolder.size = <span class="number">10</span></div><div class="line">        <span class="type">XCTAssertEqual</span>(iOSProjectRootFolder.size, <span class="number">10.0</span>)</div><div class="line">        <span class="type">XCTAssertEqual</span>(iOSProjectRootFolder.$size, <span class="literal">false</span>)</div><div class="line">        iOSProjectRootFolder.size = <span class="number">100</span></div><div class="line">        <span class="type">XCTAssertEqual</span>(iOSProjectRootFolder.size, <span class="number">14.0</span>)</div><div class="line">        <span class="type">XCTAssertEqual</span>(iOSProjectRootFolder.$size, <span class="literal">true</span>)</div><div class="line">        </div><div class="line">        iOSProjectRootFolder.capacity = <span class="number">120</span></div><div class="line">        <span class="type">XCTAssertEqual</span>(iOSProjectRootFolder.capacity, <span class="number">100</span>)</div><div class="line">        <span class="type">XCTAssertEqual</span>(iOSProjectRootFolder.$capacity, <span class="literal">true</span>)</div><div class="line">        </div><div class="line">        iOSProjectRootFolder.capacity = <span class="number">20</span></div><div class="line">        <span class="type">XCTAssertEqual</span>(iOSProjectRootFolder.capacity, <span class="number">20</span>)</div><div class="line">        <span class="type">XCTAssertEqual</span>(iOSProjectRootFolder.$capacity, <span class="literal">false</span>)</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>ä»£ç éƒ¨åˆ†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">import Foundation</div><div class="line"></div><div class="line">@propertyWrapper</div><div class="line">struct Trimmed &#123;</div><div class="line">    // å®é™…å€¼ï¼Œè®¾ç½®æˆç§æœ‰å±æ€§ï¼Œä¿æŠ¤èµ·æ¥</div><div class="line">    private(set) var value: String = &quot;&quot;</div><div class="line"></div><div class="line">    // è£…é¥°å±æ€§åçš„getterå’Œsetteræ–¹æ³•</div><div class="line">    var wrappedValue: String &#123;</div><div class="line">        get &#123; value &#125;</div><div class="line">        set &#123; value = newValue.trimmingCharacters(in: .whitespacesAndNewlines) &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // è£…é¥°å™¨çš„åˆå§‹åŒ–å™¨ï¼Œå¯ä»¥åˆå§‹é»˜è®¤å€¼</div><div class="line">    init(wrappedValue initialValue: String) &#123;</div><div class="line">        self.wrappedValue = initialValue</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Person &#123;</div><div class="line">    //è£…é¥°å™¨,å› ä¸ºæ„é€ å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥å¿…é¡»æŒ‰ä¸€ä¸‹ä¸€ç§æ–¹å¼åˆå§‹åŒ–</div><div class="line">    @Trimmed(wrappedValue: &quot;  David &quot;) var firstName: String</div><div class="line">    @Trimmed var lastName: String = &quot;  Woo &quot;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// å…¶å®è£…é¥°å™¨å°±æ˜¯å¸®ä½ æŠŠè¿™balabalaè¿™ä¹ˆå¤šä»£ç ï¼Œç®€åŒ–äº†</div><div class="line">class Person2 &#123;</div><div class="line">    private var _firstName = Trimmed(wrappedValue: &quot;  David &quot;)</div><div class="line">    private var _lastName = Trimmed(wrappedValue: &quot;  Woo &quot;)</div><div class="line">    </div><div class="line">    var firstName: String &#123;</div><div class="line">        get &#123; return _firstName.wrappedValue &#125;</div><div class="line">        set &#123; _firstName.wrappedValue = newValue &#125;</div><div class="line">    &#125;</div><div class="line">    var lastName: String &#123;</div><div class="line">        get &#123; return _lastName.wrappedValue &#125;</div><div class="line">        set &#123; _lastName.wrappedValue = newValue &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@propertyWrapper</div><div class="line">struct Clamping&lt;Value: Comparable&gt; &#123;</div><div class="line">    var value: Value</div><div class="line">    let range: ClosedRange&lt;Value&gt;</div><div class="line">    var projectedValue: Bool</div><div class="line"></div><div class="line">    init(wrappedValue value: Value, _ range: ClosedRange&lt;Value&gt;) &#123;</div><div class="line">        precondition(range.contains(value))</div><div class="line">        self.value = value</div><div class="line">        self.range = range</div><div class="line">        self.projectedValue = false</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    var wrappedValue: Value &#123;</div><div class="line">        get &#123; value &#125;</div><div class="line">        set &#123;</div><div class="line">            value = min(max(range.lowerBound, newValue), range.upperBound)</div><div class="line">            projectedValue = value != newValue</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@propertyWrapper</div><div class="line">struct SmallNumber &#123;</div><div class="line">    private var number: Int</div><div class="line">    // ä¸€ä¸ªæœ€å¤§å€¼çš„é™„åŠ å€¼ï¼Œè£…é¥°çš„å¯¹è±¡ä¸èƒ½è¶…è¿‡è¿™ä¸ªå€¼ï¼Œç”¨ä»–åœ¨setterçš„æ—¶å€™åšçº¦æŸ</div><div class="line">    private var maxNumber: Int</div><div class="line">    // åˆæ³•æ€§å±æ€§</div><div class="line">    var projectedValue: Bool</div><div class="line">    // å¢åŠ äº†é™„åŠ å€¼çš„åˆå§‹åŒ–å™¨</div><div class="line">    init(wrappedValue value: Int, _ maxNumber: Int) &#123;</div><div class="line">        self.number = value</div><div class="line">        self.maxNumber = maxNumber</div><div class="line">        self.projectedValue = false</div><div class="line">    &#125;</div><div class="line">    var wrappedValue: Int &#123;</div><div class="line">        get &#123; return number &#125;</div><div class="line">        // åœ¨setterä¸­èµ·ä½œç”¨</div><div class="line">        set &#123;</div><div class="line">            if newValue &gt; maxNumber &#123;</div><div class="line">                // è®¾ç½®è¾“å…¥å€¼æ˜¯ä¸åˆæ³•çš„</div><div class="line">                number = maxNumber</div><div class="line">                projectedValue = true</div><div class="line">            &#125; else &#123;</div><div class="line">                number = newValue</div><div class="line">                projectedValue = false</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">struct Folder &#123;</div><div class="line">    @Trimmed var title: String</div><div class="line">    @Trimmed var body: String</div><div class="line">    </div><div class="line">    @Clamping(0...14) var size: Double = 10.0</div><div class="line">    </div><div class="line">    @SmallNumber(100) var capacity: Int = 0</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2020/05/27/optimize-big-amount-cell-image-load/" itemprop="url">
                  ä¼˜åŒ–æ— é™æ•°é‡å¿«é€Ÿæ»‘åŠ¨æƒ…å†µçš„Cell ImageåŠ è½½è¿‡ç¨‹
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2020-05-27T20:49:19+08:00" content="2020-05-27">
              2020-05-27
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="TableViewå›¾ç‰‡åŠ è½½ä¼˜åŒ–"><a href="#TableViewå›¾ç‰‡åŠ è½½ä¼˜åŒ–" class="headerlink" title="TableViewå›¾ç‰‡åŠ è½½ä¼˜åŒ–"></a>TableViewå›¾ç‰‡åŠ è½½ä¼˜åŒ–</h1><h2 id="Situation"><a href="#Situation" class="headerlink" title="Situation"></a>Situation</h2><p>æ˜¨å¤©è¢«ä½å¤§ä½¬é—®åˆ°å½“ä¸€ä¸ªTableViewæœ‰æ— é™å¤šçš„Cellï¼Œå½“å¿«é€Ÿæ»‘åŠ¨æ—¶å€™ï¼Œå¦‚ä½•é¿å…ç”±äºåŠ è½½å›¾ç‰‡é€ æˆçš„å¡é¡¿é—®é¢˜ã€‚<br>UITableViewç®—æœ€å¸¸ç”¨çš„UIKitæ§ä»¶ä¹‹ä¸€äº†ï¼Œè‹¹æœå·²ç»ä¸ºå®ƒåšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œæ¯”å¦‚é‡ç”¨æ± å°±è§£å†³äº†åå¤åˆ›å»ºCellé€ æˆçš„æ€§èƒ½é—®é¢˜ã€‚<br>ä½†åƒiPhone5Sä¸Šè¿˜æ˜¯æ— æ³•è¿è¡Œæµç•…æ»‘åŠ¨TableViewï¼ŒCellçš„ç¦»å±æ¸²æŸ“ã€Cellè¿‡å¤§ã€Cellæ»‘åŠ¨è¿‡ç¨‹å¤§å›¾ç‰‡åŠ è½½ã€ä¸šåŠ¡é€»è¾‘é˜»å¡çº¿ç¨‹ç­‰éƒ½æ˜¯é€ æˆæ»‘åŠ¨ä¸æµç•…çš„åŸå› ã€‚<br>å¤§å›¾ç‰‡å¯ä»¥è€ƒè™‘æŠŠåŠ è½½å›¾ç‰‡çš„blockæ·»åŠ åˆ°DefaultRunLoopModeä¸Šæ‰§è¡Œï¼Œä½†å¤§ä½¬è¯´çš„å›¾ç‰‡è¾ƒå°ï¼Œéœ€è¦æ»‘åŠ¨è¿‡ç¨‹å°±ç«‹å³å±•ç°ï¼Œç¡®å®å¾ˆå°‘ä¼šæœ‰è¿™ç§æƒ…å†µï¼Œå› ä¸ºä¸€èˆ¬äº§å“è®¾è®¡å’Œäº¤äº’è®¾è®¡ä¸Šï¼Œéƒ½ä¼šæœ‰åˆ†é¡µåŠ è½½é€»è¾‘ï¼Œä¸ä¼šå‡ºç°å¯ä»¥è®©ç”¨æˆ·ç–¯ç‹‚æ— é™æ»‘åŠ¨æƒ…å†µã€‚</p>
<p>ä¸è¿‡è¿™ä¸ªé—®é¢˜è¿˜æ˜¯å¯ä»¥ç ”ç©¶ä¸€ä¸‹çš„TableViewå›¾ç‰‡åŠ è½½ä¼˜åŒ–ã€‚</p>
<p><a href="https://github.com/yuezaixz/DwOptimizeCellImageLoad/tree/start_project" target="_blank" rel="external">åˆå§‹å·¥ç¨‹åˆ†æ”¯</a></p>
<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><ul>
<li>å¤§é‡å›¾ç‰‡ï¼Œurlä¸ä¸€è‡´ä¸ä¼šè¢«cacheå‘½ä¸­ã€‚</li>
<li>å¿«é€Ÿæ»‘åŠ¨å¡é¡¿æˆ–è€…æ»‘åŠ¨ç»“æŸåå›¾ç‰‡æ— æ³•åŠ è½½ï¼Œå› ä¸ºä¸­é—´Nå¼ å›¾ç‰‡æ­£åœ¨åŠ è½½ï¼Œä½“éªŒç³Ÿç³•</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">extension ViewController: UITableViewDelegate, UITableViewDataSource &#123;</div><div class="line">    </div><div class="line">    func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat &#123;</div><div class="line">        return 60.0</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123;</div><div class="line">        10000</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123;</div><div class="line">        let cell = tableView.dequeueReusableCell(withIdentifier: ImageTableViewCell.kReuseIdentifier, for: indexPath) as! ImageTableViewCell</div><div class="line">        cell.loadImage(imageUrlStr: imageUrlStrs[indexPath.row % 8] + &quot;?random=&quot; + randomStrUtil.getRandomStringOfLength(length: 10))</div><div class="line">        return cell</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h2><p>å¯ä»¥ä»å‡ ä¸ªæ–¹é¢å»è€ƒè™‘ä¼˜åŒ–ï¼š</p>
<ul>
<li>å¼‚æ­¥æ¸²æŸ“ï¼Œæœ¬æ¡ˆä¾‹ä¸­ä¸ä½¿ç”¨è¿™ä¸ªæ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨AsyncDisplayKit(ç°åœ¨å«Texture)</li>
<li>æ ¹æ®è¡Œä¸ºåŒºåˆ†åŠ è½½ç­–ç•¥ï¼Œå¿«é€Ÿæ»‘åŠ¨æ—¶å€™ï¼ŒåªåŠ è½½å†…å­˜ç¼“å­˜çš„å›¾ç‰‡ï¼Œå› ä¸ºç£ç›˜åŠ è½½è¿˜éœ€è¦è§£ç ï¼Œç”Ÿæˆä½å›¾ï¼Œä¹Ÿæ˜¯è€—æ—¶æ“ä½œï¼›æ»‘åŠ¨æˆ–è€…å‡é€Ÿåæ‰æ­£å¸¸é€šè¿‡å…¨ç¼“å­˜å’Œç½‘ç»œè¿›è¡ŒåŠ è½½</li>
</ul>
<h2 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h2><h3 id="æ ¹æ®æ»šåŠ¨çš„äº¤äº’ï¼Œæ¥æ§åˆ¶load"><a href="#æ ¹æ®æ»šåŠ¨çš„äº¤äº’ï¼Œæ¥æ§åˆ¶load" class="headerlink" title="æ ¹æ®æ»šåŠ¨çš„äº¤äº’ï¼Œæ¥æ§åˆ¶load"></a>æ ¹æ®æ»šåŠ¨çš„äº¤äº’ï¼Œæ¥æ§åˆ¶load</h3><ul>
<li>finalPureLandä¸ºæ”¾å¼€æ‹–åŠ¨æ—¶å€™çš„åŒºåŸŸfinalPureLand</li>
<li>åˆšåˆšæ‹–æ‹½æ—¶:finalPureLand=nil</li>
<li>æ‹–æ‹½å®Œæ¯•çš„å‡é€Ÿè¿‡ç¨‹:é€Ÿåº¦è¶…è¿‡ä¸€ä¸ªå¸¸é‡åˆ™finalPureLand=Rectï¼Œå¦åˆ™è¿˜æ˜¯nilï¼ŒfinalPureLandæœ‰å€¼æƒ…å†µï¼Œåˆ¤æ–­å½“å‰ç•Œé¢å±•ç°çš„cellæ˜¯å¦åœ¨ç›¸åº”èŒƒå›´å†…ï¼Œåœ¨çš„è¯åŠ è½½å†…å­˜ä¸­å›¾ç‰‡ï¼Œæ²¡åŠ è½½åˆ°åˆ™ä¸åŠ è½½</li>
<li>å‡é€Ÿè¿˜æœªå®Œå…¨åœæ­¢æ—¶å†æ¬¡æ‹–æ‹½:finalPureLand=nil</li>
<li>æ‰‹åŠ¿è·Ÿéšè¿‡ç¨‹ä¸­ï¼Œä»ç„¶åŠ è½½å›¾ç‰‡</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">extension ViewController: UIScrollViewDelegate &#123;</div><div class="line">    </div><div class="line">    // åˆšå¼€å§‹æ‹–åŠ¨ï¼Œå¯ä»¥åŠ è½½å›¾ç‰‡</div><div class="line">    func scrollViewWillBeginDragging(_ scrollView: UIScrollView) &#123;</div><div class="line">        finalPureLand = nil</div><div class="line">        </div><div class="line">        loadImageIfNeed()</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    // æ»šåŠ¨è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ‰‹åŠ¿è·Ÿéšï¼ŒåŠ è½½å›¾ç‰‡</div><div class="line">    func scrollViewDidScroll(_ scrollView: UIScrollView) &#123;</div><div class="line">        if scrollView.isTracking &#123;</div><div class="line">            loadImageIfNeed()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    // æ‰‹åŠ¿æ”¾å¼€ï¼Œæ ¹æ®é€Ÿåº¦åˆ¤æ–­æ˜¯å¦è¦å¯ç”¨å†…å­˜åŠ è½½æœºåˆ¶</div><div class="line">    func scrollViewWillEndDragging(_ scrollView: UIScrollView, withVelocity velocity: CGPoint, targetContentOffset: UnsafeMutablePointer&lt;CGPoint&gt;) &#123;</div><div class="line">        // é€Ÿåº¦ä½çš„è¯ï¼ŒåŠ è½½ï¼Œé€Ÿåº¦å¿«çš„è¯ï¼Œç­‰å‡é€Ÿ</div><div class="line">        // 1 æ˜¯ä¸ªmagicNumï¼ŒDEMOé¡¹ç›®ä¸è¦å¤ªæ³¨æ„ç»†èŠ‚ =ã€‚ã€‚=</div><div class="line">        if velocity.y &gt; 1 &#123;</div><div class="line">            finalPureLand = CGRect(x: targetContentOffset.pointee.x, y: targetContentOffset.pointee.y, width: scrollView.frame.size.width, height: scrollView.frame.size.height)</div><div class="line">        &#125; else &#123;</div><div class="line">            finalPureLand = nil</div><div class="line">            loadImageIfNeed()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    // ç»“æŸå‡é€Ÿï¼Œæ­£å¸¸åŠ è½½å›¾ç‰‡</div><div class="line">    func scrollViewDidEndDecelerating(_ scrollView: UIScrollView) &#123;</div><div class="line">        finalPureLand = nil</div><div class="line">        loadImageIfNeed()</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    func loadImageIfNeed() &#123;</div><div class="line">        for cell in tableView.visibleCells &#123;</div><div class="line">            if let indexPath = tableView.indexPath(for: cell), let imageCell = cell as? ImageTableViewCell &#123;</div><div class="line">                </div><div class="line">                // åˆ¶é€ ä¸€äº›å¯ä»¥åœ¨å†…å­˜ä¸­å±•ç°çš„cell</div><div class="line">                let urlStr = indexPath.row / 10 % 5 == 1 ? imageUrlStrs[indexPath.row % 8] : (imageUrlStrs[indexPath.row % 8] + &quot;?random=\(indexPath.row)&quot;)</div><div class="line">                let cellRect = tableView.rectForRow(at: indexPath)</div><div class="line">                imageCell.loadImage(imageUrlStr: urlStr, landRect: finalPureLand, cellFrame: cellRect)</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç£ç›˜åŠ è½½æœºåˆ¶"><a href="#ç£ç›˜åŠ è½½æœºåˆ¶" class="headerlink" title="ç£ç›˜åŠ è½½æœºåˆ¶"></a>ç£ç›˜åŠ è½½æœºåˆ¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">func loadImage(imageUrlStr: String, landRect: CGRect?, cellFrame: CGRect) &#123;</div><div class="line">        guard !isLoad else &#123; return &#125;</div><div class="line">        if let landRect = landRect, !landRect.intersects(cellFrame) &#123;</div><div class="line">            // å¦‚æœæ»‘åŠ¨ä¸­ä¸ºå‡é€Ÿï¼Œåˆ™åªåŠ è½½å†…å­˜ä¸­çš„ã€‚</div><div class="line">            // å¦‚æœåŠ è½½ç¡¬ç›˜ä¸­çš„ï¼Œç¡¬ç›˜ä¸­çš„åŠ è½½åè¦è§£æè½¬æ¢æˆä½å›¾ï¼Œä¹Ÿä¼šé€ æˆå¡é¡¿</div><div class="line">            if let image = ImageCache.default.retrieveImageInMemoryCache(forKey: imageUrlStr) &#123;</div><div class="line">                isLoad = true</div><div class="line">                avatarImageView.image = image</div><div class="line">            &#125;</div><div class="line">        &#125; else &#123;</div><div class="line">            loadImage(imageUrlStr: imageUrlStr)</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h2><p>æ•ˆæœä¸Šçœ‹èµ·æ¥ï¼Œæ¯”startåˆ†æ”¯çš„æ•ˆæœå’Œä½“éªŒå¥½å¤ªå¤šäº†ã€‚<br>æœ¬DEMOåªæ˜¯ä¸ªå®ä¾‹ï¼Œå…·ä½“åº”ç”¨è¿˜éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå¹¶ä¸”éœ€è¦é€šè¿‡TableViewå’ŒImageViewçš„æ‰©å±•æˆ–è€…ç»§æ‰¿æ¥å®ç°ï¼Œè¾¾åˆ°ç»„ä»¶å¤ç”¨ã€‚</p>
<p><a href="https://github.com/yuezaixz/DwOptimizeCellImageLoad" target="_blank" rel="external">æºç åœ°å€</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2020/05/17/stupid-man-s-Greedy-algo/" itemprop="url">
                  å­¦æ¸£çš„è´ªå©ªç®—æ³•
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2020-05-17T22:24:39+08:00" content="2020-05-17">
              2020-05-17
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å­¦æ¸£çš„è´ªå©ªç®—æ³•"><a href="#å­¦æ¸£çš„è´ªå©ªç®—æ³•" class="headerlink" title="å­¦æ¸£çš„è´ªå©ªç®—æ³•"></a>å­¦æ¸£çš„è´ªå©ªç®—æ³•</h1><p>è´ªå©ªç®—æ³•æ˜¯å¯»æ‰¾æœ€ä¼˜è§£çš„å¸¸ç”¨ç®—æ³•ã€‚<br>ä¸€èˆ¬å…ˆè¦ç¡®å®šæ¯ä¸€æ­¥è´ªå©ªçš„é€»è¾‘æ˜¯ä»€ä¹ˆï¼Œä¹Ÿå°±æ˜¯åœ¨å½“å‰çŠ¶æ€ä¸‹æœ€å¥½/æœ€ä¼˜çš„é€‰æ‹©åˆ¤æ–­æ–¹å¼ï¼Œå¹¶ä»¥æ­¤å¸Œæœ›æœ€åæ¨å¯¼å‡ºæ¥çš„ç»“æœæ˜¯æœ€å¥½çš„ã€‚</p>
<h2 id="æ²Ÿé€šäº¤æµ"><a href="#æ²Ÿé€šäº¤æµ" class="headerlink" title="æ²Ÿé€šäº¤æµ"></a>æ²Ÿé€šäº¤æµ</h2><p>mail: xiao303178394@gmail.com<br>wechat: xiao303178394</p>
<h2 id="æœ‰æ—¶å€™ä¸æ˜¯æœ€ä¼˜è§£"><a href="#æœ‰æ—¶å€™ä¸æ˜¯æœ€ä¼˜è§£" class="headerlink" title="æœ‰æ—¶å€™ä¸æ˜¯æœ€ä¼˜è§£"></a>æœ‰æ—¶å€™ä¸æ˜¯æœ€ä¼˜è§£</h2><p>ç”±äºåªæ˜¯è´ªå©ªå±€éƒ¨åˆ©ç›Šçš„æœ€å¤§åŒ–ï¼Œä»–æœ‰æ—¶å€™çš„ç»“æœå¹¶ä¸æ˜¯æœ€ä¼˜è§£ã€‚</p>
<p>æ¯”å¦‚è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦æ‰¾ç»™é¡¾å®¢41åˆ†é’±ï¼Œç°åœ¨çš„è´§å¸åªæœ‰ 25 åˆ†ã€20åˆ†ã€10 åˆ†ã€5 åˆ†å’Œ 1 åˆ†å››ç§ç¡¬å¸</p>
<p>è´ªå©ªç®—æ³•çš„è¯ï¼Œå°±æ˜¯å°½å¯èƒ½ç»™æ›´å¤§é¢é¢çš„é’±ï¼Œé‚£ä¹ˆå°±æ˜¯ 25-&gt;10-&gt;5-&gt;1ï¼Œä½†å…¶å®20-&gt;20-&gt;1æ‰æ˜¯æœ€ä¼˜è§£ã€‚</p>
<h2 id="ä¸‰æ­¥éª¤"><a href="#ä¸‰æ­¥éª¤" class="headerlink" title="ä¸‰æ­¥éª¤"></a>ä¸‰æ­¥éª¤</h2><ul>
<li>ä»æŸä¸ªåˆå§‹è§£å‡ºå‘ï¼Œè®¾å®šå¥½æœ€ä¼˜ç­–ç•¥</li>
<li>é‡‡ç”¨è¿­ä»£çš„è¿‡ç¨‹ï¼Œå½“å¯ä»¥å‘ç›®æ ‡å‰è¿›ä¸€æ­¥æ—¶ï¼Œå°±æ ¹æ®å±€éƒ¨æœ€ä¼˜ç­–ç•¥ï¼Œå¾—åˆ°ä¸€éƒ¨åˆ†è§£ï¼Œç¼©å°é—®é¢˜è§„æ¨¡ï¼›</li>
<li>å°†æ‰€æœ‰è§£ç»¼åˆèµ·æ¥ã€‚</li>
</ul>
<h2 id="è¯¾ç¨‹é—®é¢˜"><a href="#è¯¾ç¨‹é—®é¢˜" class="headerlink" title="è¯¾ç¨‹é—®é¢˜"></a>è¯¾ç¨‹é—®é¢˜</h2><p>è¿™é‡Œæœ‰ n é—¨ä¸åŒçš„åœ¨çº¿è¯¾ç¨‹ï¼Œä»–ä»¬æŒ‰ä» 1 åˆ° n ç¼–å·ã€‚æ¯ä¸€é—¨è¯¾ç¨‹æœ‰ä¸€å®šçš„æŒç»­ä¸Šè¯¾æ—¶é—´ï¼ˆè¯¾ç¨‹æ—¶é—´ï¼‰t ä»¥åŠå…³é—­æ—¶é—´ç¬¬ d å¤©ã€‚ä¸€é—¨è¯¾è¦æŒç»­å­¦ä¹  t å¤©ç›´åˆ°ç¬¬ d å¤©æ—¶è¦å®Œæˆï¼Œä½ å°†ä¼šä»ç¬¬ 1 å¤©å¼€å§‹ã€‚</p>
<p>ç»™å‡º n ä¸ªåœ¨çº¿è¯¾ç¨‹ç”¨ (t, d) å¯¹è¡¨ç¤ºã€‚ä½ çš„ä»»åŠ¡æ˜¯æ‰¾å‡ºæœ€å¤šå¯ä»¥ä¿®å‡ é—¨è¯¾ã€‚</p>
<p><a href="https://leetcode-cn.com/problems/course-schedule-iii" target="_blank" rel="external">ç›´è¾¾é“¾æ¥</a></p>
<h3 id="æœ€ä¼˜ç­–ç•¥"><a href="#æœ€ä¼˜ç­–ç•¥" class="headerlink" title="æœ€ä¼˜ç­–ç•¥"></a>æœ€ä¼˜ç­–ç•¥</h3><p>ä»¥ä¸‹æ˜¯LeetCodeå®˜æ–¹çš„æœ€ä¼˜ç­–ç•¥ï¼ŒæŒºå¦™çš„ï¼Œç¡®å®æˆ‘è¿™è„‘å­æƒ³ä¸åˆ°ï¼š</p>
<blockquote>
<p>å¦‚æœä¸¤é—¨è¯¾ (t1, d1) å’Œ (t2, d2) æ»¡è¶³ d1 &lt;= d2ï¼Œå³åè€…çš„ç»“æŸæ—¶é—´ä¸æ™šäºå‰è€…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆå­¦ä¹ å‰è€…å†å­¦ä¹ åè€…æ€»æ˜¯æœ€ä¼˜çš„ã€‚å› ä¸ºå¦‚æœå…ˆå­¦ä¹ å‰è€…ï¼Œå³éœ€è¦æ»¡è¶³ x + t1 &lt;= d1 ä¸” x + t1 + t2 &lt;= d2ï¼›å¦‚æœå…ˆå­¦ä¹ åè€…ï¼Œåˆ™éœ€è¦æ»¡è¶³ x + t2 &lt;= d2 ä¸” x + t1 + t2 &lt;= d1ã€‚å¦‚æœåè€…ä¸­çš„ x + t1 + t2 &lt;= d1 æˆç«‹ï¼Œé‚£ä¹ˆæ˜¾ç„¶æœ‰ x + t1 &lt;= d1 ä¸” x + t1 + t2 &lt;= d1 &lt;= d2ï¼Œå³å‰è€…ä¸€å®šæˆç«‹ï¼›åä¹‹å¦‚æœ x = 0, (t1, d1) = (2, 3), (t2, d2) = (5, 100)ï¼Œé‚£ä¹ˆå‰è€…æˆç«‹ä¸”åè€…ä¸æˆç«‹ã€‚å› æ­¤å…ˆå­¦ä¹ å‰è€…å†å­¦ä¹ åè€…æ€»æ˜¯æœ€ä¼˜çš„ã€‚</p>
</blockquote>
<p>åŸºäºä¸Šé¢çš„ç»“è®ºï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯¾ç¨‹æŒ‰ç…§å®Œæˆæ—¶é—´ d é€’å¢æ’åºã€‚</p>
<h3 id="å›æº¯è°ƒæ•´"><a href="#å›æº¯è°ƒæ•´" class="headerlink" title="å›æº¯è°ƒæ•´"></a>å›æº¯è°ƒæ•´</h3><p>tiä¸diä¸ºå½“å‰éå†åˆ°çš„è¯¾ç¨‹å¼€å§‹æ—¶é—´ä¸ç»“æŸæ—¶é—´</p>
<p>å¦‚æœå½“å‰ä¼˜å…ˆé˜Ÿåˆ—ä¸­æ‰€æœ‰è¯¾ç¨‹çš„æ—¶é—´ä¹‹å’Œ t ä¸ ti ä¹‹å’Œå¤§äº diï¼Œé‚£ä¹ˆæ‰¾åˆ°å½“å‰ä¼˜å…ˆé˜Ÿåˆ—ä¸­è¯¾ç¨‹æ—¶é—´æœ€å¤§çš„è¯¾ç¨‹ (tj, dj)ï¼Œå¦‚æœ tj &gt; tiï¼Œåˆ™å°†å®ƒç§»å‡ºä¼˜å…ˆé˜Ÿåˆ—ï¼Œå¹¶æŠŠ (ti, di) åŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—ä¸­ã€‚</p>
<h3 id="ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦"><a href="#ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦" class="headerlink" title="ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦"></a>ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦</h3><p>å› ä¸ºæ¯æ¬¡éƒ½è¦è°ƒæ•´é˜Ÿåˆ—çš„è€—æ—¶åœ¨é•¿åº¦å¼‚å¸¸å¤§æƒ…å†µä¸‹è€—æ—¶ä¸¥é‡ï¼Œæ‰€ä»¥åšä¸ªå°ä¼˜åŒ–ï¼Œè®°å½•ä¸‹å½“å‰çš„æœ€å¤§æ—¶é—´ï¼Œåªå½“æ»¡è¶³éœ€è¦æ›¿æ¢æ¡ä»¶çš„æ—¶å€™ï¼Œæ‰åšé˜Ÿåˆ—æ’åºã€‚</p>
<h3 id="è§£é¢˜"><a href="#è§£é¢˜" class="headerlink" title="è§£é¢˜"></a>è§£é¢˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">class Solution &#123;</div><div class="line">    func scheduleCourse(_ courses: [[Int]]) -&gt; Int &#123;</div><div class="line">        let courses = courses.sorted &#123; (c1, c2) -&gt; Bool in</div><div class="line">            if c1[1] == c2[1] &#123;</div><div class="line">                return c1[0] &lt; c2[0]</div><div class="line">            &#125;</div><div class="line">            return c1[1] &lt; c2[1]</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        var sum = 0</div><div class="line">        </div><div class="line">        var queue:[Int] = []</div><div class="line">        // ä¸€ä¸ªå°ä¼˜åŒ–ï¼Œä¸ç„¶æ—¶é—´è¾¾ä¸åˆ°è¦æ±‚ï¼Œæ¯æ¬¡éƒ½è¦æ’åº</div><div class="line">        var maxCTime: Int = 0</div><div class="line">        </div><div class="line">        for c in courses &#123;</div><div class="line">            if sum + c[0] &lt;= c[1] &#123;</div><div class="line">                sum += c[0]</div><div class="line">                queue.append(c[0])</div><div class="line">                maxCTime = max(c[0], maxCTime)</div><div class="line">            &#125; else &#123;</div><div class="line">                if maxCTime &gt; c[0] &#123;</div><div class="line">                    queue.sort()</div><div class="line">                    sum += c[0] - queue.removeLast()</div><div class="line">                    maxCTime = queue.last ?? 0</div><div class="line">                    queue.append(c[0])</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        return queue.count</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="double-100"><a href="#double-100" class="headerlink" title="double 100%"></a>double 100%</h3><p><img src="http://image.runmaf.com/2020-05-17-15897250256218.jpg" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2020/05/11/stupid-man-s-dfs/" itemprop="url">
                  å­¦æ¸£çš„åˆ†æ²»ç®—æ³•
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2020-05-11T17:25:30+08:00" content="2020-05-11">
              2020-05-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å­¦æ¸£çš„åˆ†æ²»ç®—æ³•"><a href="#å­¦æ¸£çš„åˆ†æ²»ç®—æ³•" class="headerlink" title="å­¦æ¸£çš„åˆ†æ²»ç®—æ³•"></a>å­¦æ¸£çš„åˆ†æ²»ç®—æ³•</h1><p>ä¸ªäººæ„Ÿè§‰åˆ†æ²»ç®—æ³•å’ŒåŒºåŸŸåŠ¨è§„å¾ˆåƒï¼Œéƒ½æ˜¯æŠŠä¸€ä¸ªå¤§é—®é¢˜æ‹†è§£æˆå¾ˆå¤šå°é—®é¢˜ã€‚<br>ä¸åŒçš„æ˜¯åŒºåŸŸåŠ¨è§„æ˜¯ä»ä¸Šå¾€ä¸‹ã€‚<br>è€Œåˆ†æ²»ç®—æ³•æ˜¯ä»ä¸‹å¾€ä¸Šã€‚</p>
<h2 id="ä¸€èˆ¬æ­¥éª¤ï¼š"><a href="#ä¸€èˆ¬æ­¥éª¤ï¼š" class="headerlink" title="ä¸€èˆ¬æ­¥éª¤ï¼š"></a>ä¸€èˆ¬æ­¥éª¤ï¼š</h2><ul>
<li>åˆ†è§£ï¼Œå°†é—®é¢˜åˆ’åˆ†æˆè‹¥å¹²è§„æ¨¡è¾ƒå°çš„åŒç±»é—®é¢˜</li>
<li>æ±‚è§£ï¼Œå½“å­é—®é¢˜è¶³å¤Ÿå°ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“çš„å¾—åˆ°ç­”æ¡ˆ</li>
<li>åˆå¹¶ï¼ŒæŒ‰åŸé—®é¢˜çš„è¦æ±‚ï¼Œå°†å­é—®é¢˜çš„è§£é€å±‚åˆå¹¶æ„æˆåŸé—®é¢˜çš„è§£</li>
</ul>
<h2 id="äºŒåˆ†æ³•"><a href="#äºŒåˆ†æ³•" class="headerlink" title="äºŒåˆ†æ³•"></a>äºŒåˆ†æ³•</h2><p>åˆ†æ²»ç®—æ³•æ‰€éœ€æ—¶é—´å–å†³äºåˆ†è§£åå­é—®é¢˜çš„ä¸ªæ•°ã€å­é—®é¢˜çš„å¤æ‚åº¦ç­‰ã€‚<br>è€ŒäºŒåˆ†æ³•ï¼Œå…¶åˆ’åˆ†ç®€å•ã€å‡åŒ€ï¼Œæ˜¯ç»å¸¸é‡‡ç”¨çš„ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•ï¼Œå¦‚äºŒåˆ†æ£€ç´¢</p>
<h2 id="è§£é¢˜-è¾“å‡ºäºŒå‰æ ‘"><a href="#è§£é¢˜-è¾“å‡ºäºŒå‰æ ‘" class="headerlink" title="è§£é¢˜-è¾“å‡ºäºŒå‰æ ‘"></a>è§£é¢˜-è¾“å‡ºäºŒå‰æ ‘</h2><p>åœ¨ä¸€ä¸ª m*n çš„äºŒç»´å­—ç¬¦ä¸²æ•°ç»„ä¸­è¾“å‡ºäºŒå‰æ ‘ï¼Œå¹¶éµå®ˆä»¥ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li>è¡Œæ•° m åº”å½“ç­‰äºç»™å®šäºŒå‰æ ‘çš„é«˜åº¦ã€‚</li>
<li>åˆ—æ•° n åº”å½“æ€»æ˜¯å¥‡æ•°ã€‚</li>
<li>æ ¹èŠ‚ç‚¹çš„å€¼ï¼ˆä»¥å­—ç¬¦ä¸²æ ¼å¼ç»™å‡ºï¼‰åº”å½“æ”¾åœ¨å¯æ”¾ç½®çš„ç¬¬ä¸€è¡Œæ­£ä¸­é—´ã€‚æ ¹èŠ‚ç‚¹æ‰€åœ¨çš„è¡Œä¸åˆ—ä¼šå°†å‰©ä½™ç©ºé—´åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼ˆå·¦ä¸‹éƒ¨åˆ†å’Œå³ä¸‹éƒ¨åˆ†ï¼‰ã€‚ä½ åº”è¯¥å°†å·¦å­æ ‘è¾“å‡ºåœ¨å·¦ä¸‹éƒ¨åˆ†ï¼Œå³å­æ ‘è¾“å‡ºåœ¨å³ä¸‹éƒ¨åˆ†ã€‚å·¦ä¸‹å’Œå³ä¸‹éƒ¨åˆ†åº”å½“æœ‰ç›¸åŒçš„å¤§å°ã€‚å³ä½¿ä¸€ä¸ªå­æ ‘ä¸ºç©ºè€Œå¦ä¸€ä¸ªéç©ºï¼Œä½ ä¸éœ€è¦ä¸ºç©ºçš„å­æ ‘è¾“å‡ºä»»ä½•ä¸œè¥¿ï¼Œä½†ä»éœ€è¦ä¸ºå¦ä¸€ä¸ªå­æ ‘ç•™å‡ºè¶³å¤Ÿçš„ç©ºé—´ã€‚ç„¶è€Œï¼Œå¦‚æœä¸¤ä¸ªå­æ ‘éƒ½ä¸ºç©ºåˆ™ä¸éœ€è¦ä¸ºå®ƒä»¬ç•™å‡ºä»»ä½•ç©ºé—´ã€‚</li>
<li>æ¯ä¸ªæœªä½¿ç”¨çš„ç©ºé—´åº”åŒ…å«ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²â€â€ã€‚</li>
<li>ä½¿ç”¨ç›¸åŒçš„è§„åˆ™è¾“å‡ºå­æ ‘ã€‚</li>
</ul>
<p><a href="https://leetcode-cn.com/problems/print-binary-tree" target="_blank" rel="external">ç›´è¾¾é“¾æ¥</a></p>
<h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>è¿™é“é¢˜éœ€è¦å…ˆæ„å»ºäºŒä½æ•°ç»„ï¼Œæ‰€ä»¥éœ€è¦å…ˆé€’å½’è·å–åˆ°é«˜åº¦ï¼Œé€šè¿‡é«˜åº¦è®¡ç®—å‡ºå®½åº¦ã€‚<br>ç„¶åå°±å¯ä»¥ç®€å•çš„é€šè¿‡äºŒåˆ†æœç´¢æ¥å¡«å……è¿™ä¸ªäºŒä½æ•°ç»„äº†ã€‚</p>
<h3 id="è§£é¢˜"><a href="#è§£é¢˜" class="headerlink" title="è§£é¢˜"></a>è§£é¢˜</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">var</span> val: <span class="type">Int</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">var</span> <span class="keyword">left</span>: <span class="type">TreeNode</span>?</div><div class="line">    <span class="keyword">public</span> <span class="keyword">var</span> <span class="keyword">right</span>: <span class="type">TreeNode</span>?</div><div class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(<span class="number">_</span> val: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.val = val</div><div class="line">        <span class="keyword">self</span>.<span class="keyword">left</span> = <span class="literal">nil</span></div><div class="line">        <span class="keyword">self</span>.<span class="keyword">right</span> = <span class="literal">nil</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">printTree</span><span class="params">(<span class="number">_</span> root: TreeNode?)</span></span> -&gt; [[<span class="type">String</span>]] &#123;</div><div class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> root = root <span class="keyword">else</span> &#123; <span class="keyword">return</span> [] &#125;</div><div class="line">        <span class="keyword">if</span> root.<span class="keyword">left</span> == <span class="literal">nil</span> &amp;&amp; root.<span class="keyword">right</span> == <span class="literal">nil</span> &#123; <span class="keyword">return</span> [[<span class="type">String</span>(root.val)]] &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> height = treeHeight(root)</div><div class="line">        <span class="keyword">let</span> width = <span class="number">2</span> &lt;&lt; (height - <span class="number">1</span>) - <span class="number">1</span></div><div class="line">        <span class="built_in">print</span>(height, width)</div><div class="line">        </div><div class="line">        <span class="keyword">var</span> result = <span class="type">Array</span>(repeating: <span class="type">Array</span>(repeating: <span class="string">""</span>, <span class="built_in">count</span>: width), <span class="built_in">count</span>: height)</div><div class="line">        </div><div class="line">        dfs(root, result: &amp;result, start: <span class="number">0</span>, end: width - <span class="number">1</span>, deep: <span class="number">0</span>)</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> result</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">dfs</span><span class="params">(<span class="number">_</span> root: TreeNode?, result: <span class="keyword">inout</span> [[String]] ,start: Int, end: Int, deep: Int)</span></span> &#123;</div><div class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> root = root <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</div><div class="line">        <span class="keyword">let</span> mid = (start + end) &gt;&gt; <span class="number">1</span></div><div class="line">        <span class="keyword">if</span> <span class="keyword">let</span> <span class="keyword">left</span> = root.<span class="keyword">left</span> &#123;</div><div class="line">            dfs(<span class="keyword">left</span>, result: &amp;result, start: start, end: mid - <span class="number">1</span>, deep: deep + <span class="number">1</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> <span class="keyword">let</span> <span class="keyword">right</span> = root.<span class="keyword">right</span> &#123;</div><div class="line">            dfs(<span class="keyword">right</span>, result: &amp;result, start: mid + <span class="number">1</span>, end: end, deep: deep + <span class="number">1</span>)</div><div class="line">        &#125;</div><div class="line">        result[deep][mid] = <span class="type">String</span>(root.val)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">treeHeight</span><span class="params">(<span class="number">_</span> root: TreeNode?)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> root = root <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="number">0</span> &#125;</div><div class="line">        <span class="keyword">if</span> root.<span class="keyword">left</span> == <span class="literal">nil</span> &amp;&amp; root.<span class="keyword">right</span> == <span class="literal">nil</span> &#123; <span class="keyword">return</span> <span class="number">1</span> &#125;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(treeHeight(root.<span class="keyword">left</span>), treeHeight(root.<span class="keyword">right</span>)) + <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="double-100"><a href="#double-100" class="headerlink" title="double 100%"></a>double 100%</h3><p><img src="http://image.runmaf.com/2020-05-17-15897074475037.jpg" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="David Woo" />
          <p class="site-author-name" itemprop="name">David Woo</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/">
              <span class="site-state-item-count">114</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">195</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">David Woo</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
