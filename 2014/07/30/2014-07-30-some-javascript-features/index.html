<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Javascript的一些特性 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="参考资料《node.js开发指南》，作者:Byoid
Javascript的一些特性#1 作用域如果习惯Java、C的编程语言，很容易对Javascript的作用域无法理解，比如下面代码，就会输出Hello David，因为JavaScript 的作用域完全是由函数来决定的，if、for 语句中的花括号不是独立的作用域。1234if (true) &amp;#123;var name = &apos;David&apos;&amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="Javascript的一些特性">
<meta property="og:url" content="http://yoursite.com/2014/07/30/2014-07-30-some-javascript-features/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="参考资料《node.js开发指南》，作者:Byoid
Javascript的一些特性#1 作用域如果习惯Java、C的编程语言，很容易对Javascript的作用域无法理解，比如下面代码，就会输出Hello David，因为JavaScript 的作用域完全是由函数来决定的，if、for 语句中的花括号不是独立的作用域。1234if (true) &amp;#123;var name = &apos;David&apos;&amp;">
<meta property="og:updated_time" content="2015-05-05T00:18:46.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Javascript的一些特性">
<meta name="twitter:description" content="参考资料《node.js开发指南》，作者:Byoid
Javascript的一些特性#1 作用域如果习惯Java、C的编程语言，很容易对Javascript的作用域无法理解，比如下面代码，就会输出Hello David，因为JavaScript 的作用域完全是由函数来决定的，if、for 语句中的花括号不是独立的作用域。1234if (true) &amp;#123;var name = &apos;David&apos;&amp;">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-2014-07-30-some-javascript-features" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/30/2014-07-30-some-javascript-features/" class="article-date">
  <time datetime="2014-07-29T17:57:00.000Z" itemprop="datePublished">2014-07-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>►<a class="article-category-link" href="/categories/javascript/javascript/">javascript</a>►<a class="article-category-link" href="/categories/javascript/javascript/prototype/">prototype</a>►<a class="article-category-link" href="/categories/javascript/javascript/prototype/读书笔记/">读书笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Javascript的一些特性
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>参考资料《node.js开发指南》，作者:Byoid</strong></p>
<h2 id="Javascript的一些特性"><a href="#Javascript的一些特性" class="headerlink" title="Javascript的一些特性"></a>Javascript的一些特性</h2><p>#1 作用域<br>如果习惯Java、C的编程语言，很容易对Javascript的作用域无法理解，比如下面代码，就会输出Hello David，因为JavaScript 的作用域完全是由函数来决定的，if、for 语句中的花括号不是独立的作用域。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</div><div class="line"><span class="keyword">var</span> name = <span class="string">'David'</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Hello '</span>+name) <span class="comment">// 输出 Hello David</span></div></pre></td></tr></table></figure></p>
<p>##1.1 函数作用域<br>Javascript的函数作用域，又是局部作用域。其他变成语言基本是通过花刮号或者缩进代码块来划定作用域，而Javascript的作用域通过函数来定义。当在一个函数中用到了某个变量的引用，那么会现在当前函数作用域中找，然后再去全局作用域中找。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var name = &apos;David&apos;;</div><div class="line">var f1 = function() &#123;</div><div class="line">	console.log(name); // 输出 David</div><div class="line">&#125;;</div><div class="line">f1();</div><div class="line">var f2 = function() &#123;</div><div class="line">	var name = &apos;TangY&apos;;</div><div class="line">	console.log(name); // 输出 Tangy</div><div class="line">&#125;;</div><div class="line">f2();</div></pre></td></tr></table></figure></p>
<p>###1.1.1 嵌套函数作用域<br>函数作用域可是可以嵌套的，和Java的局部作用域不一样，Java中不允许局部与父局部作用域有相同的变量(可以同对象作用域重复，对象作用域用this.var来调用)。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> name = <span class="string">"David"</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"Function 1:"</span>+name);<span class="comment">//Function 1:David</span></div><div class="line">	(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> name = <span class="string">"TangY"</span></div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"Function 2:"</span>+name);<span class="comment">//Function 2:TangY</span></div><div class="line">	&#125;)();</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<p>###1.1.2 作用域的搜索方式</p>
<p>####1.1.2.1 屏蔽作用域<br>函数的作用域会先从最近的函数作用域开始，搜索的具体逻辑可以参考如下代码。执行到变量引用的地方，变量还未定义，那变量是取局部，还是取上一次函数的作用域中的变量呢？执行代码后可发现，输出undefined，这是因为，JavaScript 会先搜索里层函数的作用域，恰巧在里层的作用域里面搜索到 scope 变量，所以上层作用域中定义的 scope 就被屏蔽了，但执行到 console.log 语句时，scope 还没被定义，或者说初始化，所以得到的就是 undefined 值了。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> name = <span class="string">"David"</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"Function 1:"</span>+name);<span class="comment">//Function 1:David</span></div><div class="line">	(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"Function 3:"</span>+name);<span class="comment">//Function 3:undefined</span></div><div class="line">		<span class="keyword">var</span> name = <span class="string">"Haha"</span></div><div class="line">	&#125;)();</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<p>####1.1.2.2 定义生效还是调用生效？<br>如下代码，为什么最后那个也是打印globalScope呢？因为函数的作用域是取定义时候的，而不是调用时候的。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> scope = <span class="string">'globalScope'</span>;</div><div class="line"><span class="keyword">var</span> f1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(scope);</div><div class="line">&#125;;</div><div class="line">f1(); <span class="comment">// 输出 'globalScope'</span></div><div class="line"><span class="keyword">var</span> f2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> scope = <span class="string">'f2Scope'</span>;</div><div class="line">	f1();</div><div class="line">&#125;;</div><div class="line">f2(); <span class="comment">// 输出 'globalScope'</span></div></pre></td></tr></table></figure></p>
<p>##1.2 全局作用域<br>在 JavaScript 中有一种特殊的对象称为 全局对象。这个对象在Node.js 对应的是 global对象，在浏览器中对应的是 window 对象。<br>满足以下条件的变量属于全局作用域：</p>
<ul>
<li>在最外层定义的变量；</li>
<li>全局对象的属性；</li>
<li>任何地方隐式定义的变量（未定义直接赋值的变量，就是没通过var定义，尽可能避免这种情况）。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	name = <span class="string">'David'</span></div><div class="line">&#125;</div><div class="line">test()<span class="comment">//这里如果不执行，就会保存因为隐式定义的代码未运行</span></div><div class="line"><span class="built_in">console</span>.log(name);<span class="comment">//David</span></div></pre></td></tr></table></figure>
<p>#2 闭包<br>对未接触过函数编程的人，闭包一直都是一个很神秘的东西，但是接触以后你会发现，其实闭包也很容易，但是也会发现，闭包是如此的神奇好用。<br>闭包的严格定义是“由函数（环境）及其封闭的自由变量组成的集合体。”这个定义对于大家来说有些晦涩难懂，所以让我们先通过例子和不那么严格的解释来说明什么是闭包。</p>
<p>##2.1 What<br>在javascript中，每个其实都是一个闭包，只是嵌套的函数比较容易体现闭包的特性。按照前面讲解的作用域，函数中的变量引用，应该取的是其定义时候作用域的值，那么， Counter返回的函数在外部调用的时候，count变量应该已经失效了，按Java的理解来说，这里应该会报错（就算Java中用匿名内部类，也需要定义成final）。这里非但没有出错，反而每次调用 counter() 时还修改并返回了 count。这是怎么回事呢？<br>这正是所谓闭包的特性。当一个函数返回它内部定义的一个函数时，就产生了一个闭包，闭包不但包括被返回的函数，还包括这个函数的定义环境。上面例子中，当函数Counter () 的内部函数被一个外部变量 counter 引用时，counter 和Counter () 的局部变量就是一个闭包。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> count = <span class="number">1</span>;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> count++;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> counter = Counter();</div><div class="line"><span class="built_in">console</span>.log(counter());<span class="comment">//1</span></div><div class="line"><span class="built_in">console</span>.log(counter());<span class="comment">//2</span></div><div class="line"><span class="built_in">console</span>.log(counter());<span class="comment">//3</span></div><div class="line"><span class="built_in">console</span>.log(counter());<span class="comment">//4</span></div><div class="line"><span class="built_in">console</span>.log(counter());<span class="comment">//5</span></div></pre></td></tr></table></figure></p>
<p>##2.2 Usage</p>
<p>###2.2.1 回调函数嵌套<br>这里举前端使用jQuery开发最常用的方法举例。这里定义的时候，不会立即执行，只是传入了一个回调函数（闭包），当点击事件发生的时候，才会去调用该回调函数。因为前端嵌套的层度不够，在node.js的mongoDb中，会嵌套N层的回调。<br>这样做还有一个好处就是隐藏内部逻辑，使用方根部不需要知道onclick这个事件怎么去监听。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">'#div_id'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"><span class="comment">//点击操作</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>###2.2.2 访问器<br>闭包还可以作为一个访问器，比如前面的Counter的例子，只有调用 counter() 才能访问到闭包内的 count 变量，并按照规则对其增加1，除此之外决无可能用其他方式找到 count 变量。<br>在javascript中是没有私有变量这概念的，不像java中有private，在javascript中只有个约定“_”开始的为私有变量，比如_name，这样很容易被修改了属性，比较不安全。</p>
<p>#3 对象<br>Java里的对象全是基于类的，而javascript不同，他都是基于原型的。如下代码可以简单的创建一个对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var man = &#123;&#125;</div><div class="line">man.name = &quot;David&quot;</div><div class="line">man.test = function()&#123;</div><div class="line">	console.log(this.name);//David</div><div class="line">&#125;</div><div class="line"></div><div class="line">man.test.testFun = function()&#123;</div><div class="line">	console.log(this.name);//无输出</div><div class="line">&#125;</div><div class="line">man.test();</div><div class="line">man.test.testFun();</div></pre></td></tr></table></figure></p>
<p>##3.1 构造函数<br>以上代码构造对象都是一次性的，如何像Java那样用固定的构造方法和参数去构造呢？以下代码为创建复杂对象的实例。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function User(name, age) &#123;</div><div class="line">	this.name = name;</div><div class="line">	this.age = age;</div><div class="line">	this.sayHi = function() &#123;</div><div class="line">		console.log(&quot;Hello World,My Name is &quot;+this.name+&quot;,I&apos;m &quot;+age+&quot; years old!&quot;)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">var somebody = new User(&apos;david&apos;,&apos;25&apos;)</div><div class="line">somebody.sayHi()//Hello World,My Name is david,I&apos;m 25 years old!</div></pre></td></tr></table></figure></p>
<p>##3.2 上下文对象<br>这个和Java中类似，this就是在对象内部调用他本身的指针。<br>把上面的例子改造了下，因为User中定义的sayHi方法的name是调用对象内部的上下文，而age则是调用原型内部的局部变量。因此，在somebody中的this指针指向的是somebody对象，而tangy对象中指向的是tangy对象。而age则是闭包原理，变量的引用的作用域为定义时候的作用域，因为构造的时候才真正定义，所以age就是new User()时候的变量了。<br>最后一个函数，由于函数是全局的，所以this指向的是全局变量。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">User</span>(<span class="params">name, age</span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.name = name;</div><div class="line">	<span class="keyword">this</span>.age = age;</div><div class="line">	<span class="keyword">this</span>.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"Hello World,My Name is "</span>+<span class="keyword">this</span>.name+<span class="string">",I'm "</span>+age+<span class="string">" years old!"</span>)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> somebody = <span class="keyword">new</span> User(<span class="string">'david'</span>,<span class="string">'25'</span>)</div><div class="line">somebody.sayHi()<span class="comment">//Hello World,My Name is david,I'm 25 years old!</span></div><div class="line"><span class="keyword">var</span> tangy = &#123;</div><div class="line">	sayHi:somebody.sayHi,</div><div class="line">	name:<span class="string">'tangy'</span>,</div><div class="line">	age:<span class="number">23</span></div><div class="line">&#125;</div><div class="line">tangy.sayHi()<span class="comment">//Hello World,My Name is tangy,I'm 25 years old!</span></div><div class="line"></div><div class="line">name = <span class="string">"global"</span></div><div class="line">sayHi = tangy.sayHi<span class="comment">//Hello World,My Name is global,I'm 25 years old!</span></div><div class="line">sayHi()</div></pre></td></tr></table></figure></p>
<p>##3.3 call与apply<br>这两个函数挺神奇的，其作用有点像Java中的反射（其实是Java通过反射来模仿call与apply的操作），call 和 apply 的功能是一致的，两者细微的差别在于 call 以参数表来接受被调用函数的参数，而 apply 以数组来接受被调用函数的参数。call 和 apply 的语法分别是：<br>func.call(thisArg[, arg1[, arg2[, …]]])<br>func.apply(thisArg[, argsArray])<br>用Java来帮助理解的话，第一个参数就是Java的Method对象的invoke方法的第一个参数，也就是代理对象。<br>如果不用Java描述，那理解就是func 是函数的引用（javascript中函数是第一等公民），thisArg 是 func 被调用时的上下文对象，arg1、arg2 或argsArray 是传入 func 的参数，看一下例子，可以看出这两个函数的作用。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">User</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.name = name;</div><div class="line">	<span class="keyword">this</span>.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params">age,favorite</span>) </span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"Hello World,My Name is "</span>+<span class="keyword">this</span>.name+<span class="string">",I'm "</span>+age+<span class="string">" years old! I like "</span>+favorite+<span class="string">"!"</span>)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">name = <span class="string">'global'</span></div><div class="line"><span class="keyword">var</span> david = <span class="keyword">new</span> User(<span class="string">'David'</span>)</div><div class="line">david.sayHi(<span class="number">25</span>,<span class="string">'basketball and football'</span>)</div><div class="line"><span class="comment">//Hello World,My Name is David,I'm 25 years old! I like basketball and football!</span></div><div class="line"><span class="keyword">var</span> tangy = &#123;</div><div class="line">	name:<span class="string">'tangy'</span></div><div class="line">&#125;</div><div class="line">david.sayHi.call(tangy,<span class="number">23</span>,<span class="string">'shopping and movie'</span>)<span class="comment">//Hello World,My Name is tangy,I'm 23 years old! I like shopping and movie!</span></div><div class="line"><span class="keyword">var</span> lily = &#123;</div><div class="line">	name:<span class="string">'lily'</span></div><div class="line">&#125;</div><div class="line">david.sayHi.apply(lily,[<span class="number">46</span>,<span class="string">'travel'</span>])<span class="comment">//Hello World,My Name is lily,I'm 46 years old! I like travel!</span></div></pre></td></tr></table></figure></p>
<p>##3.4 bind函数<br>但是，如果重复使用，每次都要传递对象作为函数的上下文，那么多不方便。这时候就可以使用bind函数。语法为：<br>func.bind(thisArg[, arg1[, arg2[, …]]])<br>参数与call一致。实例代码如下，最后一个输出，出现了重复绑定，这时候，bind已经无效了。如果要解释，就是第一次bind的时候，对象内部还是有this这个指针的，第二次bind，那么这个函数已经类似function(){func.call(david,25)},这时候已经不存在this，所以bind是无效的。这里可能有点难理解，无法理解的话就记住，bind不能重新绑定。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">function User(name) &#123;</div><div class="line">	this.name = name;</div><div class="line">	this.sayHi = function(age,favorite) &#123;</div><div class="line">		console.log(&quot;Hello World,My Name is &quot;+this.name+&quot;,I&apos;m &quot;+age+&quot; years old! I like &quot;+favorite+&quot;!&quot;)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">var david = new User(&apos;David&apos;)</div><div class="line">name = &apos;global&apos;</div><div class="line">david.sayHi(25,&apos;basketball and football&apos;)</div><div class="line">//Hello World,My Name is David,I&apos;m 25 years old! I like basketball and football!</div><div class="line">var tangy = &#123;</div><div class="line">	name:&apos;tangy&apos;</div><div class="line">&#125;</div><div class="line">tangy.sayHi = david.sayHi</div><div class="line">tangy.sayHi(23,&apos;shopping and movie&apos;)//Hello World,My Name is tangy,I&apos;m 23 years old! I like shopping and movie!</div><div class="line">tangy.sayHi2 = david.sayHi.bind(david,25,&apos;make a joke&apos;)</div><div class="line">tangy.sayHi2()//Hello World,My Name is David,I&apos;m 25 years old! I like make a joke!</div><div class="line">tangy.sayHi3 = david.sayHi.bind(david,25)</div><div class="line">tangy.sayHi3(&apos;reading&apos;)//Hello World,My Name is David,I&apos;m 25 years old! I like reading!</div><div class="line">var lily = &#123;</div><div class="line">	name:&apos;lily&apos;</div><div class="line">&#125;</div><div class="line">lily.sayHi = tangy.sayHi3.bind(lily)</div><div class="line">lily.sayHi(46,&apos;travel&apos;)//Hello World,My Name is David,I&apos;m 25 years old! I like 46!</div></pre></td></tr></table></figure></p>
<p>##3.5 原型<br>这是javascript面向对象的核心，javascript的对象都是基于原型的。这就相当于一件艺术品，一件蒙娜丽莎的微笑，javascript就是匠心独运的画匠，他100%的复制了蒙娜丽莎，并且可以通过自己的创意和灵感，赋予她新的东西。下面是一个简单的例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">Person.prototype.name = <span class="string">'David'</span>;</div><div class="line">Person.prototype.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'My name is '</span>+<span class="keyword">this</span>.name)</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person()</div><div class="line">person.showName()<span class="comment">//My name is David</span></div><div class="line">person.name = <span class="string">'tangy'</span></div><div class="line">person.showName()</div><div class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person()</div><div class="line"><span class="built_in">console</span>.log(person.func == person2.func);<span class="comment">//false</span></div><div class="line"><span class="built_in">console</span>.log(person.showName == person2.showName);<span class="comment">//true</span></div></pre></td></tr></table></figure></p>
<p>上面这段代码使用了原型而不是构造函数初始化对象。这样做与直接在构造函数内定义属性有什么不同呢？可以从最后看出，原型中的函数是同一个应用，而构造函数每次都会重复创建，由于闭包的局部变量上下文，所以有额外开销，因此可以得出下面结论：</p>
<ul>
<li>构造函数内定义的属性继承方式与原型不同，子对象需要显式调用父对象才能继承构造函数内定义的属性；</li>
<li>构造函数内定义的任何属性，包括函数在内都会被重复创建，同一个构造函数产生的两个对象不共享实例；</li>
<li>构造函数内定义的函数有运行时闭包的开销，因为构造函数内的局部变量对其中定义的函数来说也是可见的。</li>
</ul>
<p>尽管如此，并不是说在构造函数内创建属性不好，而是两者各有适合的范围。那么我们什么时候使用原型，什么时候使用构造函数内定义来创建属性呢？</p>
<ul>
<li>除非必须用构造函数闭包，否则尽量用原型定义成员函数，因为这样可以减少开销；</li>
<li>尽量在构造函数内定义一般成员，尤其是对象或数组，因为用原型定义的成员是多个实例共享的。</li>
</ul>
<p>##3.6 原型链<br>Object 与 Function是两个特殊对象，它们都是构造函数，用于生成对象，参加如下代码。Object.prototype 是所有对象的祖先，Function.prototype 是所有函数的原型，包括构造函数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Function</span>.prototype.testfunc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'this is a test func!'</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> <span class="built_in">Function</span>();</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> o)</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> f)</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> func)</div><div class="line"><span class="built_in">console</span>.log(f.testFunc == func.testFunc)</div></pre></td></tr></table></figure></p>
<p>###3.6.1 对象分类<br>javascript中的对象有三类，一类是用户创建的对象，一类是构造函数对象，一类是原型对象。用户创建的对象，即一般意义上用 new 语句显式构造的对象。构造函数对象指的是普通的构造函数（第一类是该函数构造的对象，这里就是这构造函数），即通过 new 调用生成普通对象的函数。原型对象特指构造函数 prototype 属性指向的对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> object = <span class="keyword">new</span> <span class="keyword">constructor</span>()</div><div class="line">console.log(typeof <span class="keyword">constructor</span>);//function</div><div class="line">console.log(typeof object);//object</div><div class="line">console.log(<span class="keyword">constructor</span>.prototype);//&#123;&#125;</div><div class="line"><span class="built_in">console</span>.log(object.prototype);<span class="comment">//undefined</span></div><div class="line"><span class="built_in">console</span>.log(object.__proto__);<span class="comment">//&#123;&#125;</span></div><div class="line"><span class="built_in">console</span>.log(object.__proto__ === <span class="keyword">constructor</span>.prototype);//true</div></pre></td></tr></table></figure></p>
<p>###3.6.2 <strong>proto</strong>属性<br>上面的例子也稍微提到了<strong>proto</strong>属性，可以看出，他指向该对象的原型，从任何对象沿着它开始遍历都可以追溯到 Object.prototype。<br>构造函数对象有 prototype 属性，指向一个原型对象，通过该构造函数创建对象时，被创建对象的 <strong>proto</strong> 属性将会指向构造函数的 prototype 属性。原型对象有 constructor属性，指向它对应的构造函数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function Constructor()&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line">Object.prototype.name = &quot;ObjectPrototypeAttr&quot;</div><div class="line">Constructor.prototype.name = &quot;ConstructorPrototypeAttr&quot;</div><div class="line">var constructor = new Constructor()</div><div class="line">var object = new Object()</div><div class="line">console.log(constructor.name);//ConstructorPrototypeAttr</div><div class="line">console.log(object.name);//ObjectPrototypeAttr</div><div class="line">console.log(constructor.__proto__.name);//ConstructorPrototypeAttr</div><div class="line">console.log(constructor.__proto__.__proto__.name);//ObjectPrototypeAttr</div><div class="line">console.log(constructor.__proto__.constructor.prototype.name);//ConstructorPrototypeAttr</div></pre></td></tr></table></figure></p>
<p>##3.7 对象复制</p>
<p>###3.7.1 浅复制<br>浅复制只是重新创建了一个指针（同类型变量的引用），实际上引用还是相同的对象。浅复制实现如下代码。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.prototype.clone = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="keyword">var</span> newObj = &#123;&#125;;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> <span class="keyword">this</span>) &#123;</div><div class="line">newObj[i] = <span class="keyword">this</span>[i];</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> newObj;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">name: <span class="string">'David'</span>,</div><div class="line">likes: [<span class="string">'basketball'</span>]</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> newObj = obj.clone();</div><div class="line">obj.likes.push(<span class="string">'football'</span>);</div><div class="line"><span class="built_in">console</span>.log(obj.likes); <span class="comment">//[ 'basketball', 'football' ]</span></div><div class="line"><span class="built_in">console</span>.log(newObj.likes); <span class="comment">// [ 'basketball', 'football' ]</span></div></pre></td></tr></table></figure></p>
<p>###3.7.2 深复制<br>深复制比较复杂，因为每个对象的内部逻辑都不一样，需要循环递归，而且对于函数和数组需要做特殊处理。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">Object.prototype.clone = function() &#123;</div><div class="line">	var newObj = &#123;&#125;;</div><div class="line">	for (var i in this) &#123;</div><div class="line">		if (typeof(this[i]) == &apos;object&apos; || typeof(this[i]) == &apos;function&apos;) &#123;</div><div class="line">			newObj[i] = this[i].clone();</div><div class="line">		&#125; else &#123;</div><div class="line">			newObj[i] = this[i];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	return newObj;</div><div class="line">&#125;;</div><div class="line">Array.prototype.clone = function() &#123;</div><div class="line">	var newArray = [];</div><div class="line">	for (var i = 0; i &lt; this.length; i++) &#123;</div><div class="line">		if (typeof(this[i]) == &apos;object&apos; || typeof(this[i]) == &apos;function&apos;) &#123;</div><div class="line">			newArray[i] = this[i].clone();</div><div class="line">		&#125; else &#123;</div><div class="line">			newArray[i] = this[i];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	return newArray;</div><div class="line">&#125;;</div><div class="line">Function.prototype.clone = function() &#123;</div><div class="line">	var that = this;</div><div class="line">	var newFunc = function() &#123;</div><div class="line">		return that.apply(this, arguments);</div><div class="line">	&#125;;</div><div class="line">	for (var i in this) &#123;</div><div class="line">		newFunc[i] = this[i];</div><div class="line">	&#125;</div><div class="line">	return newFunc;</div><div class="line">&#125;;</div><div class="line">var obj = &#123;</div><div class="line">	name: &apos;david&apos;,</div><div class="line">	likes: [&apos;basketball&apos;],</div><div class="line">	display: function() &#123;</div><div class="line">	console.log(this.name);</div><div class="line">&#125;,</div><div class="line">&#125;;</div><div class="line">var newObj = obj.clone();</div><div class="line">newObj.likes.push(&apos;football&apos;);</div><div class="line">console.log(obj.likes); // [ &apos;basketball&apos; ]</div><div class="line">console.log(newObj.likes); // [ &apos;basketball&apos;, &apos;football&apos; ]</div><div class="line">console.log(newObj.display == obj.display); //false</div></pre></td></tr></table></figure></p>
<p>###3.7.3 深复制的问题<br>如上代码其实存在一个问题，如果存在循环引用就会报错（如下代码加到上面那个代码）。要实现真正的深复制，那么就需要分析对象的依赖关系，像Java中的Spring初始化那样。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj1 = &#123;</div><div class="line">ref: <span class="literal">null</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> obj2 = &#123;</div><div class="line">ref: obj1</div><div class="line">&#125;;</div><div class="line">obj1.ref = obj2;</div><div class="line">obj1.clone();<span class="comment">//RangeError: Maximum call stack size exceeded</span></div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/07/30/2014-07-30-some-javascript-features/" data-id="cisgxbbk20024ep3d3odyup5b" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/08/26/2014-08-26-reconstruction-of-chatter/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          闲扯重构
        
      </div>
    </a>
  
  
    <a href="/2014/07/23/2014-07-23-architecture-design-sharing-records-of-the-company/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">公司架构设计交流分享记录</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Amazon/">Amazon</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Amazon/bezos/">bezos</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Amazon/bezos/一网打尽/">一网打尽</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Amazon/bezos/一网打尽/EverythisIsStore/">EverythisIsStore</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Amazon/bezos/天道酬勤/">天道酬勤</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Amazon/bezos/天道酬勤/KataPotter/">KataPotter</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Amazon/bezos/天道酬勤/KataPotter/CodeJourney/">CodeJourney</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Amazon/bezos/设计/">设计</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Amazon/bezos/设计/责任链/">责任链</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Amazon/bezos/设计/责任链/KataPotter/">KataPotter</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Amazon/bezos/设计/责任链/KataPotter/一网打尽/">一网打尽</a></li></ul></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/bash/">bash</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/bash/Shell/">Shell</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/bash/Shell/位置变量/">位置变量</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/bash/Shell/进程变量/">进程变量</a></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/bit/">bit</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/bit/singlenum2/">singlenum2</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/函数/">函数</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/函数/LeetCode/">LeetCode</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/函数/LeetCode/链表循环起点/">链表循环起点</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/字符串/">字符串</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/字符串/str/">str</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/字符串/str/基础/">基础</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/设计/">设计</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/设计/fizzbuzzwhizz/">fizzbuzzwhizz</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sublime/">Sublime</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Sublime/工具/">工具</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Sublime/工具/编辑器/">编辑器</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Sublime/工具/编辑器/提升工作效率/">提升工作效率</a></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/UML/">UML</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/UML/BDD/">BDD</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/UML/BDD/TDD/">TDD</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/UML/BDD/TDD/设计/">设计</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/UML/BDD/TDD/设计/KataPotter/">KataPotter</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/UML/BDD/TDD/设计/KataPotter/cucumber/">cucumber</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/UML/BDD/TDD/设计/KataPotter/cucumber/责任链设计模式/">责任链设计模式</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/UML/BDD/TDD/设计/KataPotter/cucumber/责任链设计模式/面向接口/">面向接口</a></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/bezos/">bezos</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/bezos/jobs/">jobs</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/bezos/jobs/设计/">设计</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/bezos/jobs/设计/乔布斯/">乔布斯</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/bezos/jobs/设计/乔布斯/贝索斯/">贝索斯</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/bezos/jobs/设计/乔布斯/贝索斯/干货/">干货</a></li></ul></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/AFNetworking/">AFNetworking</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/GCD/">GCD</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/GCD/obj-c/">obj-c</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/cocoa/">cocoa</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/cocoa/block/">block</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/cocoa/block/obj-c/">obj-c</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/cocoa/block/obj-c/代码块/">代码块</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/cocoa/block/obj-c/代码块/闭包/">闭包</a></li></ul></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/jvm/">jvm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/jvm/classloader/">classloader</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/maven/">maven</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/maven/TDD/">TDD</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/maven/TDD/fizzbuzzwhizz/">fizzbuzzwhizz</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/maven/TDD/fizzbuzzwhizz/责任链/">责任链</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/maven/TDD/fizzbuzzwhizz/责任链/模板方法/">模板方法</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/maven/TDD/fizzbuzzwhizz/责任链/模板方法/设计模式/">设计模式</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/maven/TDD/fizzbuzzwhizz/责任链/模板方法/设计模式/趣味编程/">趣味编程</a></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/">spring</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/IoC/">IoC</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/IoC/XmlWebApplicationContext/">XmlWebApplicationContext</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/application/">application</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/application/IoC/">IoC</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/application/IoC/源码分析/">源码分析</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/application/IoC/源码分析/beanfactory/">beanfactory</a></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/resource/">resource</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/resource/IoC/">IoC</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/resource/IoC/源码分析/">源码分析</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/resource/IoC/源码分析/Resource加载/">Resource加载</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/resource/IoC/源码分析/Resource定位/">Resource定位</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/resource/IoC/源码分析/Resource注册/">Resource注册</a></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/个人随笔/">个人随笔</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/个人随笔/多线程/">多线程</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/个人随笔/多线程/synchronized/">synchronized</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/个人随笔/多线程/synchronized/人际关系/">人际关系</a></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/多线程/">多线程</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/多线程/volatile/">volatile</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/模板引擎/">模板引擎</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/模板引擎/导出Word/">导出Word</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/模板引擎/导出Word/解析Xml/">解析Xml</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/模板引擎/导出Word/解析Xml/设计/">设计</a></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/express/">express</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/express/scrum/">scrum</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/express/scrum/感悟/">感悟</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/fizzbuzzwhizz/">fizzbuzzwhizz</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/fizzbuzzwhizz/易中天/">易中天</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/fizzbuzzwhizz/易中天/百家争鸣/">百家争鸣</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/">javascript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/Node-js/">Node.js</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/Node-js/互联网/">互联网</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/Node-js/互联网/互联网思维/">互联网思维</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/Node-js/互联网/互联网思维/去中心化/">去中心化</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/Node-js/互联网/互联网思维/去中心化/全局对象/">全局对象</a></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/Node-js/工作/">工作</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/Node-js/工作/个人随笔/">个人随笔</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/Node-js/工作/个人随笔/数组/">数组</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/Node-js/工作/个人随笔/数组/兴趣/">兴趣</a></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/Regexp/">Regexp</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/Regexp/正则表达式/">正则表达式</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/Regexp/码年/">码年</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/Regexp/码年/正则表达式/">正则表达式</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/prototype/">prototype</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/prototype/读书笔记/">读书笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/个人随笔/">个人随笔</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/个人随笔/否定性思维/">否定性思维</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/个人随笔/否定性思维/自我反思/">自我反思</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/个人随笔/否定性思维/自我反思/数组/">数组</a></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/游记/">游记</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/游记/Node-js/">Node.js</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/游记/Node-js/个人随笔/">个人随笔</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/javascript/游记/Node-js/个人随笔/数组/">数组</a></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/jvm/">jvm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/jvm/vertx/">vertx</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/事件流/">事件流</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/事件流/事件/">事件</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/事件流/事件/事件冒泡/">事件冒泡</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/事件流/事件/事件冒泡/添加事件方式/">添加事件方式</a></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/scrum/">scrum</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/scrum/敏捷/">敏捷</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/scrum/敏捷/需求/">需求</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/scrum/敏捷/需求/用户故事/">用户故事</a></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/sql/">sql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/sql/join/">join</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/sql/join/连接/">连接</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/个人简历/">个人简历</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/个人随笔/">个人随笔</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/个人随笔/怨文/">怨文</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/个人随笔/怨文/年终/">年终</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/个人随笔/读后感/">读后感</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/个人随笔/项目管理/">项目管理</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/产品/">产品</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/产品/设计/">设计</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/产品/设计/极简/">极简</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/人性/">人性</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/人性/总结/">总结</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/人性/总结/利他/">利他</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/人性/总结/利他/下个人思维/">下个人思维</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/人性/总结/利他/下个人思维/高大上/">高大上</a></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/创业/">创业</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/创业/总结/">总结</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/同步/">同步</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/同步/线程安全/">线程安全</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/同步/线程安全/ConcurrentHashMap/">ConcurrentHashMap</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/同步/线程安全/ConcurrentHashMap/桶分割远离/">桶分割远离</a></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/多线程/">多线程</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/多线程/HashMap/">HashMap</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/多线程/HashMap/HashTable/">HashTable</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/多线程/HashMap/HashTable/CocurrentHashMap/">CocurrentHashMap</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/多线程/HashMap/HashTable/CocurrentHashMap/同步/">同步</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/多线程/HashMap/HashTable/CocurrentHashMap/同步/线程安全/">线程安全</a></li></ul></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/孔子/">孔子</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/孔子/儒家/">儒家</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/孔子/儒家/易中天/">易中天</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/孔子/儒家/易中天/百家争鸣/">百家争鸣</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/孔子/儒家/易中天/百家争鸣/中庸/">中庸</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/孔子/儒家/易中天/百家争鸣/中庸/仁爱/">仁爱</a></li></ul></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习/">学习</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/学习/个人随笔/">个人随笔</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/属性/">属性</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/属性/obj-c/">obj-c</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/工具/谷歌/">谷歌</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/工具/谷歌/搜索/">搜索</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/工具/谷歌/搜索/个人心得/">个人心得</a></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/总结/">总结</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/总结/obj-c/">obj-c</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/总结/obj-c/不足/">不足</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/总结/读后感/">读后感</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/总结/读后感/管理学/">管理学</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/总结/读后感/管理学/领导课/">领导课</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/总结/转变/">转变</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/日记/">日记</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/日记/女朋友/">女朋友</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/日记/女朋友/向日葵/">向日葵</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/日记/女朋友/向日葵/信念/">信念</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/日记/女朋友/向日葵/信念/自信/">自信</a></li></ul></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/架构设计/">架构设计</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/蛋疼/">蛋疼</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/蛋疼/折腾/">折腾</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/蛋疼/折腾/作死/">作死</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计/">设计</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/设计/重构/">重构</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/载记/">载记</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/载记/警世钟/">警世钟</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/重构/">重构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/项目管理/">项目管理</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/项目管理/执行力/">执行力</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/项目管理/读记/">读记</a></li></ul></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/06/07/2016-06-07-dockercong-0dao-1de-bi-ji/">Docker从0到1的笔记</a>
          </li>
        
          <li>
            <a href="/2015/07/13/2015-07-13-beginning-ios-pit-over-those-years-i/">初学IOS那些年踩过的坑（十）</a>
          </li>
        
          <li>
            <a href="/2015/06/29/2015-06-29-beginning-ios-pit-over-those-years-h/">初学IOS那些年踩过的坑（九）</a>
          </li>
        
          <li>
            <a href="/2015/05/13/2015-05-13-running-and-being-reading-notes-a/">跑步圣经读书笔记（一）</a>
          </li>
        
          <li>
            <a href="/2015/05/13/2015-05-13-beginning-ios-pit-over-those-years-g/">初学IOS那些年踩过的坑（八）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>