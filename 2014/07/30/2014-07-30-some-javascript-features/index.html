<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="参考资料《node.js开发指南》，作者:Byoid
Javascript的一些特性#1 作用域如果习惯Java、C的编程语言，很容易对Javascript的作用域无法理解，比如下面代码，就会输出Hello David，因为JavaScript 的作用域完全是由函数来决定的，if、for 语句中的花括号不是独立的作用域。1234if (true) &amp;#123;var name = &apos;David&apos;&amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="Javascript的一些特性">
<meta property="og:url" content="http://yoursite.com/2014/07/30/2014-07-30-some-javascript-features/index.html">
<meta property="og:site_name" content="大胃吴的闲话唠嗑">
<meta property="og:description" content="参考资料《node.js开发指南》，作者:Byoid
Javascript的一些特性#1 作用域如果习惯Java、C的编程语言，很容易对Javascript的作用域无法理解，比如下面代码，就会输出Hello David，因为JavaScript 的作用域完全是由函数来决定的，if、for 语句中的花括号不是独立的作用域。1234if (true) &amp;#123;var name = &apos;David&apos;&amp;">
<meta property="og:updated_time" content="2016-08-30T06:43:39.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Javascript的一些特性">
<meta name="twitter:description" content="参考资料《node.js开发指南》，作者:Byoid
Javascript的一些特性#1 作用域如果习惯Java、C的编程语言，很容易对Javascript的作用域无法理解，比如下面代码，就会输出Hello David，因为JavaScript 的作用域完全是由函数来决定的，if、for 语句中的花括号不是独立的作用域。1234if (true) &amp;#123;var name = &apos;David&apos;&amp;">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2014/07/30/2014-07-30-some-javascript-features/"/>

  <title> Javascript的一些特性 | 大胃吴的闲话唠嗑 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">大胃吴的闲话唠嗑</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">扯扯技术，唠唠闲话</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-首页">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            menu.首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-文章">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            menu.文章
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Javascript的一些特性
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2014-07-30T01:57:00+08:00" content="2014-07-30">
              2014-07-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/javascript/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/javascript/javascript/prototype/" itemprop="url" rel="index">
                    <span itemprop="name">prototype</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/javascript/javascript/prototype/读书笔记/" itemprop="url" rel="index">
                    <span itemprop="name">读书笔记</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><strong>参考资料《node.js开发指南》，作者:Byoid</strong></p>
<h2 id="Javascript的一些特性"><a href="#Javascript的一些特性" class="headerlink" title="Javascript的一些特性"></a>Javascript的一些特性</h2><p>#1 作用域<br>如果习惯Java、C的编程语言，很容易对Javascript的作用域无法理解，比如下面代码，就会输出Hello David，因为JavaScript 的作用域完全是由函数来决定的，if、for 语句中的花括号不是独立的作用域。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</div><div class="line"><span class="keyword">var</span> name = <span class="string">'David'</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Hello '</span>+name) <span class="comment">// 输出 Hello David</span></div></pre></td></tr></table></figure></p>
<h2 id="1-1-函数作用域"><a href="#1-1-函数作用域" class="headerlink" title="1.1 函数作用域"></a>1.1 函数作用域</h2><p>Javascript的函数作用域，又是局部作用域。其他变成语言基本是通过花刮号或者缩进代码块来划定作用域，而Javascript的作用域通过函数来定义。当在一个函数中用到了某个变量的引用，那么会现在当前函数作用域中找，然后再去全局作用域中找。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var name = &apos;David&apos;;</div><div class="line">var f1 = function() &#123;</div><div class="line">	console.log(name); // 输出 David</div><div class="line">&#125;;</div><div class="line">f1();</div><div class="line">var f2 = function() &#123;</div><div class="line">	var name = &apos;TangY&apos;;</div><div class="line">	console.log(name); // 输出 Tangy</div><div class="line">&#125;;</div><div class="line">f2();</div></pre></td></tr></table></figure></p>
<h2 id="1-1-1-嵌套函数作用域"><a href="#1-1-1-嵌套函数作用域" class="headerlink" title="# 1.1.1 嵌套函数作用域"></a># 1.1.1 嵌套函数作用域</h2><p>函数作用域可是可以嵌套的，和Java的局部作用域不一样，Java中不允许局部与父局部作用域有相同的变量(可以同对象作用域重复，对象作用域用this.var来调用)。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> name = <span class="string">"David"</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"Function 1:"</span>+name);<span class="comment">//Function 1:David</span></div><div class="line">	(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> name = <span class="string">"TangY"</span></div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"Function 2:"</span>+name);<span class="comment">//Function 2:TangY</span></div><div class="line">	&#125;)();</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<h2 id="1-1-2-作用域的搜索方式"><a href="#1-1-2-作用域的搜索方式" class="headerlink" title="# 1.1.2 作用域的搜索方式"></a># 1.1.2 作用域的搜索方式</h2><h2 id="1-1-2-1-屏蔽作用域"><a href="#1-1-2-1-屏蔽作用域" class="headerlink" title="# # 1.1.2.1 屏蔽作用域"></a># # 1.1.2.1 屏蔽作用域</h2><p>函数的作用域会先从最近的函数作用域开始，搜索的具体逻辑可以参考如下代码。执行到变量引用的地方，变量还未定义，那变量是取局部，还是取上一次函数的作用域中的变量呢？执行代码后可发现，输出undefined，这是因为，JavaScript 会先搜索里层函数的作用域，恰巧在里层的作用域里面搜索到 scope 变量，所以上层作用域中定义的 scope 就被屏蔽了，但执行到 console.log 语句时，scope 还没被定义，或者说初始化，所以得到的就是 undefined 值了。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> name = <span class="string">"David"</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"Function 1:"</span>+name);<span class="comment">//Function 1:David</span></div><div class="line">	(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"Function 3:"</span>+name);<span class="comment">//Function 3:undefined</span></div><div class="line">		<span class="keyword">var</span> name = <span class="string">"Haha"</span></div><div class="line">	&#125;)();</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<h2 id="1-1-2-2-定义生效还是调用生效？"><a href="#1-1-2-2-定义生效还是调用生效？" class="headerlink" title="# # 1.1.2.2 定义生效还是调用生效？"></a># # 1.1.2.2 定义生效还是调用生效？</h2><p>如下代码，为什么最后那个也是打印globalScope呢？因为函数的作用域是取定义时候的，而不是调用时候的。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> scope = <span class="string">'globalScope'</span>;</div><div class="line"><span class="keyword">var</span> f1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(scope);</div><div class="line">&#125;;</div><div class="line">f1(); <span class="comment">// 输出 'globalScope'</span></div><div class="line"><span class="keyword">var</span> f2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> scope = <span class="string">'f2Scope'</span>;</div><div class="line">	f1();</div><div class="line">&#125;;</div><div class="line">f2(); <span class="comment">// 输出 'globalScope'</span></div></pre></td></tr></table></figure></p>
<h2 id="1-2-全局作用域"><a href="#1-2-全局作用域" class="headerlink" title="1.2 全局作用域"></a>1.2 全局作用域</h2><p>在 JavaScript 中有一种特殊的对象称为 全局对象。这个对象在Node.js 对应的是 global对象，在浏览器中对应的是 window 对象。<br>满足以下条件的变量属于全局作用域：</p>
<ul>
<li>在最外层定义的变量；</li>
<li>全局对象的属性；</li>
<li>任何地方隐式定义的变量（未定义直接赋值的变量，就是没通过var定义，尽可能避免这种情况）。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	name = <span class="string">'David'</span></div><div class="line">&#125;</div><div class="line">test()<span class="comment">//这里如果不执行，就会保存因为隐式定义的代码未运行</span></div><div class="line"><span class="built_in">console</span>.log(name);<span class="comment">//David</span></div></pre></td></tr></table></figure>
<p>#2 闭包<br>对未接触过函数编程的人，闭包一直都是一个很神秘的东西，但是接触以后你会发现，其实闭包也很容易，但是也会发现，闭包是如此的神奇好用。<br>闭包的严格定义是“由函数（环境）及其封闭的自由变量组成的集合体。”这个定义对于大家来说有些晦涩难懂，所以让我们先通过例子和不那么严格的解释来说明什么是闭包。</p>
<h2 id="2-1-What"><a href="#2-1-What" class="headerlink" title="2.1 What"></a>2.1 What</h2><p>在javascript中，每个其实都是一个闭包，只是嵌套的函数比较容易体现闭包的特性。按照前面讲解的作用域，函数中的变量引用，应该取的是其定义时候作用域的值，那么， Counter返回的函数在外部调用的时候，count变量应该已经失效了，按Java的理解来说，这里应该会报错（就算Java中用匿名内部类，也需要定义成final）。这里非但没有出错，反而每次调用 counter() 时还修改并返回了 count。这是怎么回事呢？<br>这正是所谓闭包的特性。当一个函数返回它内部定义的一个函数时，就产生了一个闭包，闭包不但包括被返回的函数，还包括这个函数的定义环境。上面例子中，当函数Counter () 的内部函数被一个外部变量 counter 引用时，counter 和Counter () 的局部变量就是一个闭包。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> count = <span class="number">1</span>;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> count++;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> counter = Counter();</div><div class="line"><span class="built_in">console</span>.log(counter());<span class="comment">//1</span></div><div class="line"><span class="built_in">console</span>.log(counter());<span class="comment">//2</span></div><div class="line"><span class="built_in">console</span>.log(counter());<span class="comment">//3</span></div><div class="line"><span class="built_in">console</span>.log(counter());<span class="comment">//4</span></div><div class="line"><span class="built_in">console</span>.log(counter());<span class="comment">//5</span></div></pre></td></tr></table></figure></p>
<h2 id="2-2-Usage"><a href="#2-2-Usage" class="headerlink" title="2.2 Usage"></a>2.2 Usage</h2><h2 id="2-2-1-回调函数嵌套"><a href="#2-2-1-回调函数嵌套" class="headerlink" title="# 2.2.1 回调函数嵌套"></a># 2.2.1 回调函数嵌套</h2><p>这里举前端使用jQuery开发最常用的方法举例。这里定义的时候，不会立即执行，只是传入了一个回调函数（闭包），当点击事件发生的时候，才会去调用该回调函数。因为前端嵌套的层度不够，在node.js的mongoDb中，会嵌套N层的回调。<br>这样做还有一个好处就是隐藏内部逻辑，使用方根部不需要知道onclick这个事件怎么去监听。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">'#div_id'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"><span class="comment">//点击操作</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="2-2-2-访问器"><a href="#2-2-2-访问器" class="headerlink" title="# 2.2.2 访问器"></a># 2.2.2 访问器</h2><p>闭包还可以作为一个访问器，比如前面的Counter的例子，只有调用 counter() 才能访问到闭包内的 count 变量，并按照规则对其增加1，除此之外决无可能用其他方式找到 count 变量。<br>在javascript中是没有私有变量这概念的，不像java中有private，在javascript中只有个约定“_”开始的为私有变量，比如_name，这样很容易被修改了属性，比较不安全。</p>
<p>#3 对象<br>Java里的对象全是基于类的，而javascript不同，他都是基于原型的。如下代码可以简单的创建一个对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var man = &#123;&#125;</div><div class="line">man.name = &quot;David&quot;</div><div class="line">man.test = function()&#123;</div><div class="line">	console.log(this.name);//David</div><div class="line">&#125;</div><div class="line"></div><div class="line">man.test.testFun = function()&#123;</div><div class="line">	console.log(this.name);//无输出</div><div class="line">&#125;</div><div class="line">man.test();</div><div class="line">man.test.testFun();</div></pre></td></tr></table></figure></p>
<h2 id="3-1-构造函数"><a href="#3-1-构造函数" class="headerlink" title="3.1 构造函数"></a>3.1 构造函数</h2><p>以上代码构造对象都是一次性的，如何像Java那样用固定的构造方法和参数去构造呢？以下代码为创建复杂对象的实例。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function User(name, age) &#123;</div><div class="line">	this.name = name;</div><div class="line">	this.age = age;</div><div class="line">	this.sayHi = function() &#123;</div><div class="line">		console.log(&quot;Hello World,My Name is &quot;+this.name+&quot;,I&apos;m &quot;+age+&quot; years old!&quot;)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">var somebody = new User(&apos;david&apos;,&apos;25&apos;)</div><div class="line">somebody.sayHi()//Hello World,My Name is david,I&apos;m 25 years old!</div></pre></td></tr></table></figure></p>
<h2 id="3-2-上下文对象"><a href="#3-2-上下文对象" class="headerlink" title="3.2 上下文对象"></a>3.2 上下文对象</h2><p>这个和Java中类似，this就是在对象内部调用他本身的指针。<br>把上面的例子改造了下，因为User中定义的sayHi方法的name是调用对象内部的上下文，而age则是调用原型内部的局部变量。因此，在somebody中的this指针指向的是somebody对象，而tangy对象中指向的是tangy对象。而age则是闭包原理，变量的引用的作用域为定义时候的作用域，因为构造的时候才真正定义，所以age就是new User()时候的变量了。<br>最后一个函数，由于函数是全局的，所以this指向的是全局变量。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">User</span>(<span class="params">name, age</span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.name = name;</div><div class="line">	<span class="keyword">this</span>.age = age;</div><div class="line">	<span class="keyword">this</span>.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"Hello World,My Name is "</span>+<span class="keyword">this</span>.name+<span class="string">",I'm "</span>+age+<span class="string">" years old!"</span>)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> somebody = <span class="keyword">new</span> User(<span class="string">'david'</span>,<span class="string">'25'</span>)</div><div class="line">somebody.sayHi()<span class="comment">//Hello World,My Name is david,I'm 25 years old!</span></div><div class="line"><span class="keyword">var</span> tangy = &#123;</div><div class="line">	sayHi:somebody.sayHi,</div><div class="line">	name:<span class="string">'tangy'</span>,</div><div class="line">	age:<span class="number">23</span></div><div class="line">&#125;</div><div class="line">tangy.sayHi()<span class="comment">//Hello World,My Name is tangy,I'm 25 years old!</span></div><div class="line"></div><div class="line">name = <span class="string">"global"</span></div><div class="line">sayHi = tangy.sayHi<span class="comment">//Hello World,My Name is global,I'm 25 years old!</span></div><div class="line">sayHi()</div></pre></td></tr></table></figure></p>
<h2 id="3-3-call与apply"><a href="#3-3-call与apply" class="headerlink" title="3.3 call与apply"></a>3.3 call与apply</h2><p>这两个函数挺神奇的，其作用有点像Java中的反射（其实是Java通过反射来模仿call与apply的操作），call 和 apply 的功能是一致的，两者细微的差别在于 call 以参数表来接受被调用函数的参数，而 apply 以数组来接受被调用函数的参数。call 和 apply 的语法分别是：<br>func.call(thisArg[, arg1[, arg2[, …]]])<br>func.apply(thisArg[, argsArray])<br>用Java来帮助理解的话，第一个参数就是Java的Method对象的invoke方法的第一个参数，也就是代理对象。<br>如果不用Java描述，那理解就是func 是函数的引用（javascript中函数是第一等公民），thisArg 是 func 被调用时的上下文对象，arg1、arg2 或argsArray 是传入 func 的参数，看一下例子，可以看出这两个函数的作用。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">User</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.name = name;</div><div class="line">	<span class="keyword">this</span>.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params">age,favorite</span>) </span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"Hello World,My Name is "</span>+<span class="keyword">this</span>.name+<span class="string">",I'm "</span>+age+<span class="string">" years old! I like "</span>+favorite+<span class="string">"!"</span>)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">name = <span class="string">'global'</span></div><div class="line"><span class="keyword">var</span> david = <span class="keyword">new</span> User(<span class="string">'David'</span>)</div><div class="line">david.sayHi(<span class="number">25</span>,<span class="string">'basketball and football'</span>)</div><div class="line"><span class="comment">//Hello World,My Name is David,I'm 25 years old! I like basketball and football!</span></div><div class="line"><span class="keyword">var</span> tangy = &#123;</div><div class="line">	name:<span class="string">'tangy'</span></div><div class="line">&#125;</div><div class="line">david.sayHi.call(tangy,<span class="number">23</span>,<span class="string">'shopping and movie'</span>)<span class="comment">//Hello World,My Name is tangy,I'm 23 years old! I like shopping and movie!</span></div><div class="line"><span class="keyword">var</span> lily = &#123;</div><div class="line">	name:<span class="string">'lily'</span></div><div class="line">&#125;</div><div class="line">david.sayHi.apply(lily,[<span class="number">46</span>,<span class="string">'travel'</span>])<span class="comment">//Hello World,My Name is lily,I'm 46 years old! I like travel!</span></div></pre></td></tr></table></figure></p>
<h2 id="3-4-bind函数"><a href="#3-4-bind函数" class="headerlink" title="3.4 bind函数"></a>3.4 bind函数</h2><p>但是，如果重复使用，每次都要传递对象作为函数的上下文，那么多不方便。这时候就可以使用bind函数。语法为：<br>func.bind(thisArg[, arg1[, arg2[, …]]])<br>参数与call一致。实例代码如下，最后一个输出，出现了重复绑定，这时候，bind已经无效了。如果要解释，就是第一次bind的时候，对象内部还是有this这个指针的，第二次bind，那么这个函数已经类似function(){func.call(david,25)},这时候已经不存在this，所以bind是无效的。这里可能有点难理解，无法理解的话就记住，bind不能重新绑定。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">function User(name) &#123;</div><div class="line">	this.name = name;</div><div class="line">	this.sayHi = function(age,favorite) &#123;</div><div class="line">		console.log(&quot;Hello World,My Name is &quot;+this.name+&quot;,I&apos;m &quot;+age+&quot; years old! I like &quot;+favorite+&quot;!&quot;)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">var david = new User(&apos;David&apos;)</div><div class="line">name = &apos;global&apos;</div><div class="line">david.sayHi(25,&apos;basketball and football&apos;)</div><div class="line">//Hello World,My Name is David,I&apos;m 25 years old! I like basketball and football!</div><div class="line">var tangy = &#123;</div><div class="line">	name:&apos;tangy&apos;</div><div class="line">&#125;</div><div class="line">tangy.sayHi = david.sayHi</div><div class="line">tangy.sayHi(23,&apos;shopping and movie&apos;)//Hello World,My Name is tangy,I&apos;m 23 years old! I like shopping and movie!</div><div class="line">tangy.sayHi2 = david.sayHi.bind(david,25,&apos;make a joke&apos;)</div><div class="line">tangy.sayHi2()//Hello World,My Name is David,I&apos;m 25 years old! I like make a joke!</div><div class="line">tangy.sayHi3 = david.sayHi.bind(david,25)</div><div class="line">tangy.sayHi3(&apos;reading&apos;)//Hello World,My Name is David,I&apos;m 25 years old! I like reading!</div><div class="line">var lily = &#123;</div><div class="line">	name:&apos;lily&apos;</div><div class="line">&#125;</div><div class="line">lily.sayHi = tangy.sayHi3.bind(lily)</div><div class="line">lily.sayHi(46,&apos;travel&apos;)//Hello World,My Name is David,I&apos;m 25 years old! I like 46!</div></pre></td></tr></table></figure></p>
<h2 id="3-5-原型"><a href="#3-5-原型" class="headerlink" title="3.5 原型"></a>3.5 原型</h2><p>这是javascript面向对象的核心，javascript的对象都是基于原型的。这就相当于一件艺术品，一件蒙娜丽莎的微笑，javascript就是匠心独运的画匠，他100%的复制了蒙娜丽莎，并且可以通过自己的创意和灵感，赋予她新的东西。下面是一个简单的例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">Person.prototype.name = <span class="string">'David'</span>;</div><div class="line">Person.prototype.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'My name is '</span>+<span class="keyword">this</span>.name)</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person()</div><div class="line">person.showName()<span class="comment">//My name is David</span></div><div class="line">person.name = <span class="string">'tangy'</span></div><div class="line">person.showName()</div><div class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person()</div><div class="line"><span class="built_in">console</span>.log(person.func == person2.func);<span class="comment">//false</span></div><div class="line"><span class="built_in">console</span>.log(person.showName == person2.showName);<span class="comment">//true</span></div></pre></td></tr></table></figure></p>
<p>上面这段代码使用了原型而不是构造函数初始化对象。这样做与直接在构造函数内定义属性有什么不同呢？可以从最后看出，原型中的函数是同一个应用，而构造函数每次都会重复创建，由于闭包的局部变量上下文，所以有额外开销，因此可以得出下面结论：</p>
<ul>
<li>构造函数内定义的属性继承方式与原型不同，子对象需要显式调用父对象才能继承构造函数内定义的属性；</li>
<li>构造函数内定义的任何属性，包括函数在内都会被重复创建，同一个构造函数产生的两个对象不共享实例；</li>
<li>构造函数内定义的函数有运行时闭包的开销，因为构造函数内的局部变量对其中定义的函数来说也是可见的。</li>
</ul>
<p>尽管如此，并不是说在构造函数内创建属性不好，而是两者各有适合的范围。那么我们什么时候使用原型，什么时候使用构造函数内定义来创建属性呢？</p>
<ul>
<li>除非必须用构造函数闭包，否则尽量用原型定义成员函数，因为这样可以减少开销；</li>
<li>尽量在构造函数内定义一般成员，尤其是对象或数组，因为用原型定义的成员是多个实例共享的。</li>
</ul>
<h2 id="3-6-原型链"><a href="#3-6-原型链" class="headerlink" title="3.6 原型链"></a>3.6 原型链</h2><p>Object 与 Function是两个特殊对象，它们都是构造函数，用于生成对象，参加如下代码。Object.prototype 是所有对象的祖先，Function.prototype 是所有函数的原型，包括构造函数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Function</span>.prototype.testfunc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'this is a test func!'</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> <span class="built_in">Function</span>();</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> o)</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> f)</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> func)</div><div class="line"><span class="built_in">console</span>.log(f.testFunc == func.testFunc)</div></pre></td></tr></table></figure></p>
<h2 id="3-6-1-对象分类"><a href="#3-6-1-对象分类" class="headerlink" title="# 3.6.1 对象分类"></a># 3.6.1 对象分类</h2><p>javascript中的对象有三类，一类是用户创建的对象，一类是构造函数对象，一类是原型对象。用户创建的对象，即一般意义上用 new 语句显式构造的对象。构造函数对象指的是普通的构造函数（第一类是该函数构造的对象，这里就是这构造函数），即通过 new 调用生成普通对象的函数。原型对象特指构造函数 prototype 属性指向的对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> object = <span class="keyword">new</span> <span class="keyword">constructor</span>()</div><div class="line">console.log(typeof <span class="keyword">constructor</span>);//function</div><div class="line">console.log(typeof object);//object</div><div class="line">console.log(<span class="keyword">constructor</span>.prototype);//&#123;&#125;</div><div class="line"><span class="built_in">console</span>.log(object.prototype);<span class="comment">//undefined</span></div><div class="line"><span class="built_in">console</span>.log(object.__proto__);<span class="comment">//&#123;&#125;</span></div><div class="line"><span class="built_in">console</span>.log(object.__proto__ === <span class="keyword">constructor</span>.prototype);//true</div></pre></td></tr></table></figure></p>
<h2 id="3-6-2-proto属性"><a href="#3-6-2-proto属性" class="headerlink" title="# 3.6.2 proto属性"></a># 3.6.2 <strong>proto</strong>属性</h2><p>上面的例子也稍微提到了<strong>proto</strong>属性，可以看出，他指向该对象的原型，从任何对象沿着它开始遍历都可以追溯到 Object.prototype。<br>构造函数对象有 prototype 属性，指向一个原型对象，通过该构造函数创建对象时，被创建对象的 <strong>proto</strong> 属性将会指向构造函数的 prototype 属性。原型对象有 constructor属性，指向它对应的构造函数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function Constructor()&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line">Object.prototype.name = &quot;ObjectPrototypeAttr&quot;</div><div class="line">Constructor.prototype.name = &quot;ConstructorPrototypeAttr&quot;</div><div class="line">var constructor = new Constructor()</div><div class="line">var object = new Object()</div><div class="line">console.log(constructor.name);//ConstructorPrototypeAttr</div><div class="line">console.log(object.name);//ObjectPrototypeAttr</div><div class="line">console.log(constructor.__proto__.name);//ConstructorPrototypeAttr</div><div class="line">console.log(constructor.__proto__.__proto__.name);//ObjectPrototypeAttr</div><div class="line">console.log(constructor.__proto__.constructor.prototype.name);//ConstructorPrototypeAttr</div></pre></td></tr></table></figure></p>
<h2 id="3-7-对象复制"><a href="#3-7-对象复制" class="headerlink" title="3.7 对象复制"></a>3.7 对象复制</h2><h2 id="3-7-1-浅复制"><a href="#3-7-1-浅复制" class="headerlink" title="# 3.7.1 浅复制"></a># 3.7.1 浅复制</h2><p>浅复制只是重新创建了一个指针（同类型变量的引用），实际上引用还是相同的对象。浅复制实现如下代码。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.prototype.clone = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="keyword">var</span> newObj = &#123;&#125;;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> <span class="keyword">this</span>) &#123;</div><div class="line">newObj[i] = <span class="keyword">this</span>[i];</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> newObj;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">name: <span class="string">'David'</span>,</div><div class="line">likes: [<span class="string">'basketball'</span>]</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> newObj = obj.clone();</div><div class="line">obj.likes.push(<span class="string">'football'</span>);</div><div class="line"><span class="built_in">console</span>.log(obj.likes); <span class="comment">//[ 'basketball', 'football' ]</span></div><div class="line"><span class="built_in">console</span>.log(newObj.likes); <span class="comment">// [ 'basketball', 'football' ]</span></div></pre></td></tr></table></figure></p>
<h2 id="3-7-2-深复制"><a href="#3-7-2-深复制" class="headerlink" title="# 3.7.2 深复制"></a># 3.7.2 深复制</h2><p>深复制比较复杂，因为每个对象的内部逻辑都不一样，需要循环递归，而且对于函数和数组需要做特殊处理。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">Object.prototype.clone = function() &#123;</div><div class="line">	var newObj = &#123;&#125;;</div><div class="line">	for (var i in this) &#123;</div><div class="line">		if (typeof(this[i]) == &apos;object&apos; || typeof(this[i]) == &apos;function&apos;) &#123;</div><div class="line">			newObj[i] = this[i].clone();</div><div class="line">		&#125; else &#123;</div><div class="line">			newObj[i] = this[i];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	return newObj;</div><div class="line">&#125;;</div><div class="line">Array.prototype.clone = function() &#123;</div><div class="line">	var newArray = [];</div><div class="line">	for (var i = 0; i &lt; this.length; i++) &#123;</div><div class="line">		if (typeof(this[i]) == &apos;object&apos; || typeof(this[i]) == &apos;function&apos;) &#123;</div><div class="line">			newArray[i] = this[i].clone();</div><div class="line">		&#125; else &#123;</div><div class="line">			newArray[i] = this[i];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	return newArray;</div><div class="line">&#125;;</div><div class="line">Function.prototype.clone = function() &#123;</div><div class="line">	var that = this;</div><div class="line">	var newFunc = function() &#123;</div><div class="line">		return that.apply(this, arguments);</div><div class="line">	&#125;;</div><div class="line">	for (var i in this) &#123;</div><div class="line">		newFunc[i] = this[i];</div><div class="line">	&#125;</div><div class="line">	return newFunc;</div><div class="line">&#125;;</div><div class="line">var obj = &#123;</div><div class="line">	name: &apos;david&apos;,</div><div class="line">	likes: [&apos;basketball&apos;],</div><div class="line">	display: function() &#123;</div><div class="line">	console.log(this.name);</div><div class="line">&#125;,</div><div class="line">&#125;;</div><div class="line">var newObj = obj.clone();</div><div class="line">newObj.likes.push(&apos;football&apos;);</div><div class="line">console.log(obj.likes); // [ &apos;basketball&apos; ]</div><div class="line">console.log(newObj.likes); // [ &apos;basketball&apos;, &apos;football&apos; ]</div><div class="line">console.log(newObj.display == obj.display); //false</div></pre></td></tr></table></figure></p>
<h2 id="3-7-3-深复制的问题"><a href="#3-7-3-深复制的问题" class="headerlink" title="# 3.7.3 深复制的问题"></a># 3.7.3 深复制的问题</h2><p>如上代码其实存在一个问题，如果存在循环引用就会报错（如下代码加到上面那个代码）。要实现真正的深复制，那么就需要分析对象的依赖关系，像Java中的Spring初始化那样。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj1 = &#123;</div><div class="line">ref: <span class="literal">null</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> obj2 = &#123;</div><div class="line">ref: obj1</div><div class="line">&#125;;</div><div class="line">obj1.ref = obj2;</div><div class="line">obj1.clone();<span class="comment">//RangeError: Maximum call stack size exceeded</span></div></pre></td></tr></table></figure></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2014/07/23/2014-07-23-architecture-design-sharing-records-of-the-company/" rel="next" title="公司架构设计交流分享记录">
                <i class="fa fa-chevron-left"></i> 公司架构设计交流分享记录
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2014/08/26/2014-08-26-reconstruction-of-chatter/" rel="prev" title="闲扯重构">
                闲扯重构 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="David Woo" />
          <p class="site-author-name" itemprop="name">David Woo</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/">
              <span class="site-state-item-count">93</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">195</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Javascript的一些特性"><span class="nav-number">1.</span> <span class="nav-text">Javascript的一些特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-函数作用域"><span class="nav-number">2.</span> <span class="nav-text">1.1 函数作用域</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-1-嵌套函数作用域"><span class="nav-number">3.</span> <span class="nav-text"># 1.1.1 嵌套函数作用域</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-2-作用域的搜索方式"><span class="nav-number">4.</span> <span class="nav-text"># 1.1.2 作用域的搜索方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-2-1-屏蔽作用域"><span class="nav-number">5.</span> <span class="nav-text"># # 1.1.2.1 屏蔽作用域</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-2-2-定义生效还是调用生效？"><span class="nav-number">6.</span> <span class="nav-text"># # 1.1.2.2 定义生效还是调用生效？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-全局作用域"><span class="nav-number">7.</span> <span class="nav-text">1.2 全局作用域</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-What"><span class="nav-number">8.</span> <span class="nav-text">2.1 What</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-Usage"><span class="nav-number">9.</span> <span class="nav-text">2.2 Usage</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-1-回调函数嵌套"><span class="nav-number">10.</span> <span class="nav-text"># 2.2.1 回调函数嵌套</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-2-访问器"><span class="nav-number">11.</span> <span class="nav-text"># 2.2.2 访问器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-构造函数"><span class="nav-number">12.</span> <span class="nav-text">3.1 构造函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-上下文对象"><span class="nav-number">13.</span> <span class="nav-text">3.2 上下文对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-call与apply"><span class="nav-number">14.</span> <span class="nav-text">3.3 call与apply</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-bind函数"><span class="nav-number">15.</span> <span class="nav-text">3.4 bind函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5-原型"><span class="nav-number">16.</span> <span class="nav-text">3.5 原型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6-原型链"><span class="nav-number">17.</span> <span class="nav-text">3.6 原型链</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6-1-对象分类"><span class="nav-number">18.</span> <span class="nav-text"># 3.6.1 对象分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6-2-proto属性"><span class="nav-number">19.</span> <span class="nav-text"># 3.6.2 proto属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-7-对象复制"><span class="nav-number">20.</span> <span class="nav-text">3.7 对象复制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-7-1-浅复制"><span class="nav-number">21.</span> <span class="nav-text"># 3.7.1 浅复制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-7-2-深复制"><span class="nav-number">22.</span> <span class="nav-text"># 3.7.2 深复制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-7-3-深复制的问题"><span class="nav-number">23.</span> <span class="nav-text"># 3.7.3 深复制的问题</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">David Woo</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
