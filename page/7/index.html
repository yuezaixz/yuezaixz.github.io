<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="大胃吴的闲话唠嗑">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="大胃吴的闲话唠嗑">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="大胃吴的闲话唠嗑">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/page/7/"/>

  <title> 大胃吴的闲话唠嗑 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">大胃吴的闲话唠嗑</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">扯扯技术，唠唠闲话</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-首页">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            menu.首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-文章">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            menu.文章
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/05/01/2014-05-01-spring-framework-core-source-code-analysis-a-spring-the-overall-structure-and-the-overall-ioc-container-design-introduction/" itemprop="url">
                  Spring Framework的核心源码解读（一）-Spring整体结构以及IoC容器设计整体介绍
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Veröffentlicht am</span>
            <time itemprop="dateCreated" datetime="2014-05-01T15:19:00+08:00" content="2014-05-01">
              2014-05-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">in</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/spring/" itemprop="url" rel="index">
                    <span itemprop="name">spring</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/spring/application/" itemprop="url" rel="index">
                    <span itemprop="name">application</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/spring/application/IoC/" itemprop="url" rel="index">
                    <span itemprop="name">IoC</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/spring/application/IoC/源码分析/" itemprop="url" rel="index">
                    <span itemprop="name">源码分析</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/spring/application/IoC/源码分析/beanfactory/" itemprop="url" rel="index">
                    <span itemprop="name">beanfactory</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#前言<br>这么久没写博客？我干嘛去了呢？最主要还是项目比较忙，没有大段的时间来看书、研究、写成博文。仅有的时间也只能翻阅下书籍或者技术文章，而自己又不想天天写些心灵鸡汤类的东西。那么就只好罢工这么久了咯。终于遇到五一有空了，安静下来看看书，写写博文。最近一段时间都是Spring 源码相关的，该系列文章内容大多为《Spring技术内幕》这本书的笔记，这本书很不错，推荐阅读。也会发一段Thoughtwork的那个代码招聘的FizzBuzzWhizz相关的内容。<br>敬请期待！</p>
<p>#1 概述</p>
<h2 id="1-1-Spring的整体架构"><a href="#1-1-Spring的整体架构" class="headerlink" title="1.1 Spring的整体架构"></a>1.1 Spring的整体架构</h2><p>Spring 总共有十几个组件，其中核心组件只有三个：Core、Context 和 Beans。AOP、Web等都属于核心上层的特性功能。本文将对Spring核心内容的设计进行分析。<br><img src="http://i1.tietuku.com/154191d85dc03b0c.jpg" alt=""></p>
<p>#2 IoC容器的实现</p>
<h2 id="2-1-控制反转（IOC）"><a href="#2-1-控制反转（IOC）" class="headerlink" title="2.1 控制反转（IOC）"></a>2.1 控制反转（IOC）</h2><p>实际应用的程序基本上都是由多个类彼此合作来实现业务逻辑，这使得每个对象都需要与其合作的对象的引用。但是这样的控制就导致了程序的耦合度非常大，不易于复用，更不易于做单元测试。<br>Martin Flowler 提出了“那些方面的控制被反转了？”这个问题。他得出的结论是：依赖对象的获得被反转了。基于这个结论，他为控制反转创造了一个更好的名字：依赖注入。<br>依赖倒置也是设计模式六大原则之一。在Spring中IoC容器就是这个模式的载体，它可以通过容器对对象进行管理，在对象生成或初始化时直接将数据注入到需要其依赖的对象中。这也是Spring的核心。</p>
<h2 id="2-2-BeanFactory和ApplicationContext的区别"><a href="#2-2-BeanFactory和ApplicationContext的区别" class="headerlink" title="2.2 BeanFactory和ApplicationContext的区别"></a>2.2 BeanFactory和ApplicationContext的区别</h2><p>Spring中容器要分两类，一类是实现BeanFactory接口的简单容器系列，这类容器只实现了容器的最基本功能；另一个是ApplicationContext应用上下文，也就是我们最常用的，项目中的配置文件大多数都是ApplicationContext-xxx.xml，它作为容器的高级形态而存在。<br>用生活中的容器水杯举例，BeanFactory就定义了可以作为水桶的基本功能（装水）。从下图可以看出，Spring容器的基本功能就是获取bean、判断bean是否存在、是否为单例、是否为原型、类型是否匹配、获取bean的类型、获取bean的别名。因此BeanFactory就是Spring的基本接口。<br> <img src="http://i1.tietuku.com/75daf2c913bddbdd.jpg" alt=""><br>那么BeanFactory是杯子，那么BeanDefinition就是水。BeanDefinition是用来管理基于Spring的应用中的各种对象以及它们之间的相互依赖关系，就Spring中Bean的主要数据结构，是设计出来水的抽象。如下代码。<br><figure class="highlight java"><figcaption><span>DefaultListableBeanFactory.java</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** Map of bean definition objects, keyed by bean name */</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, BeanDefinitionbeanDefinitionMap = <span class="keyword">new</span> ConcurrentHashMap&lt;String, BeanDefinition&gt;();</div><div class="line"></div><div class="line">	<span class="comment">/** List of bean definition names, in registration order */</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> List&lt;StringbeanDefinitionNames = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div></pre></td></tr></table></figure></p>
<p>而ApplicationContext则提供了很多特殊的特性，从下图ApplicationContext接口的继承关系可以看出，它除了容器所需的基本特性外，还有其他许多附加特性，比如国际化的消息访问、资源访问、事件传播、载入多个上下文等。<br> <img src="http://i1.tietuku.com/84eaba13257e4c38.jpg" alt=""></p>
<h2 id="2-3-IoC容器的接口设计"><a href="#2-3-IoC容器的接口设计" class="headerlink" title="2.3 IoC容器的接口设计"></a>2.3 IoC容器的接口设计</h2><p>下图描述了IoC容器中的主要接口设计（图片拍自Spring技术内幕一书）。<br> <img src="http://i1.tietuku.com/8f45e01439fe6212.jpg" alt=""></p>
<h2 id="2-3-1-BeanFactory-HierarchicalBeanFactory-ConfigurableBeanFactory"><a href="#2-3-1-BeanFactory-HierarchicalBeanFactory-ConfigurableBeanFactory" class="headerlink" title="# 2.3.1 BeanFactory-HierarchicalBeanFactory-ConfigurableBeanFactory"></a># 2.3.1 BeanFactory-HierarchicalBeanFactory-ConfigurableBeanFactory</h2><p>在这条设计路径中，HierarchicalBeanFactory增加了getParentBeanFactory()的功能，是BeanFactory具备了双亲IoC容器的管理功能，在ConfigurableBeanFactory中主要定义了一些对BeanFactory的配置功能，比如通过setParentBeanFactory()设置双亲IoC容器，通过addBeanPostProcessor()定义了Bean后置处理器等。</p>
<h2 id="2-3-2-ApplicationContext路线"><a href="#2-3-2-ApplicationContext路线" class="headerlink" title="# 2.3.2 ApplicationContext路线"></a># 2.3.2 ApplicationContext路线</h2><p>该设计路线以ApplicationContext应用上下文接口为核心的接口设计，这里涉及的主要接口设计有，从BeanFactory到ListableBeanFactory，再到ApplicationContext，再到我们常用的WebApplicationContext或者ConfigurableApplicationContext接口。<br>在这个接口体系中，ListableBeanFactory和HierarchicalBeanFactory两个接口，连接BeanFactory接口定义和ApplicationConext应用上下文的接口定义。在ListableBeanFactory接口中，细化了许多BeanFactory的接口功能，比如定义了getBeanDefinitionNames()接口方法；对于HierarchicalBeanFactory接口，我们在前文中已经提到过；对于ApplicationContext接口，它通过继承MessageSource、ResourceLoader、ApplicationEventPublisher接口，在BeanFactory简单IoC容器的基础上添加了许多对高级容器的特性的支持，这些特性我们之前也都提到过了。<br>总体来说 ApplicationContext 必须要完成以下几件事：</p>
<ul>
<li>标识一个应用环境</li>
<li>利用 BeanFactory 创建 Bean 对象</li>
<li>保存对象关系表</li>
<li>能够捕获各种事件</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/28/2014-03-28-java-parse-xml-export-word/" itemprop="url">
                  Java解析Xml导出Word
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Veröffentlicht am</span>
            <time itemprop="dateCreated" datetime="2014-03-28T10:42:00+08:00" content="2014-03-28">
              2014-03-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">in</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/模板引擎/" itemprop="url" rel="index">
                    <span itemprop="name">模板引擎</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/模板引擎/导出Word/" itemprop="url" rel="index">
                    <span itemprop="name">导出Word</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/模板引擎/导出Word/解析Xml/" itemprop="url" rel="index">
                    <span itemprop="name">解析Xml</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/模板引擎/导出Word/解析Xml/设计/" itemprop="url" rel="index">
                    <span itemprop="name">设计</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#需求概述<br>不知道大家有没做过用xml定义需要导出word的格式和需要的数据，然后通过Java代码来解析Xml完成导出。<br>本文不考虑解析Xml和怎么导出Word，只考虑如何用解析后的对象来生成需要导出的数据。<br>本文使用的Xml解析方法为Dom4j，Word导出方法为Itext。</p>
<p>#最初的想法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">    	<span class="keyword">try</span> &#123;</div><div class="line">    		Object data = getData();</div><div class="line">	    	Element xmlElement = DXmlUtil.getXmlElement(<span class="string">"format.xml"</span>, <span class="string">"/Doc"</span>);</div><div class="line">		IDocFactory factory = <span class="keyword">new</span> DDocFactory();</div><div class="line">         Document doc = factory.getDocFactory(out);</div><div class="line">	    	proc(xmlElement,data, doc, factory);</div><div class="line">	    &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">	    	e.printStackTrace();</div><div class="line">	    &#125;</div><div class="line">	&#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">proc</span><span class="params">(Element element,Object obj,Document doc,IDocFactory factory)</span></span>&#123;</div><div class="line">    	<span class="comment">//TODO 接下来就是见证奇迹的时刻</span></div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight"><figcaption><span>需解析的模板</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line">&lt;Doc title="$&#123;app.name&#125;" subtitle="运维服务报告" exportpath="F:\\音乐\\哈哈哈" &gt;</div><div class="line">	&lt;chapter level="1" num="1" title="目的"&gt;</div><div class="line">		&lt;para type="content"&gt;本服务报告按月对系统运维情况进行总结，对出现的问题给与说明，以方便用户、部门领导等相关人员对系统状况和项目情况的了解，并为领导决策提供依据。&lt;/para&gt;</div><div class="line">	&lt;/chapter&gt;</div><div class="line">	&lt;chapter level="1" num="2" title="数据来源"&gt;</div><div class="line">		&lt;para type="content"&gt;本服务报告的数据来源包括以下几个部分：&lt;/para&gt;</div><div class="line">		&lt;list type="diamod"&gt;</div><div class="line">			&lt;item&gt;服务器运行状态巡检数据&lt;/item&gt;</div><div class="line">			&lt;item&gt;巨龙运维监控工具预警数据&lt;/item&gt;</div><div class="line">			&lt;item&gt;巨龙运维流程系统处置数据&lt;/item&gt;</div><div class="line">		&lt;/list&gt;</div><div class="line">	&lt;/chapter&gt;</div><div class="line">	&lt;chapter level="1" num="3" title="系统运维工作说明"&gt;</div><div class="line">		&lt;chapter level="2" num="3.1" title="系统基础情况"&gt;</div><div class="line">			&lt;para type="contentItalic"&gt;$&#123;app.name&#125;共有xx台服务器CPU资源使用达到xx%，CPU资源占用xx，CPU处理出现了等待状态；&lt;/para&gt;</div><div class="line">			&lt;para type="contentItalic"&gt;$&#123;app.name&#125;多少台内存消耗比例达到XX%，内存消耗了多少G，系统运行时剩余内存多少G，服务器内存出现XXX状态。&lt;/para&gt;</div><div class="line">			&lt;para type="contentItalic"&gt;$&#123;app.name&#125;在什么时段出现磁盘IO瓶颈情况，每秒最高达到多少M/s，最低达到多少M/s。&lt;/para&gt;</div><div class="line">			&lt;para type="contentItalic"&gt;综合以上分析，$&#123;app.name&#125;整体运行情况，系统运行资源紧张，CPU、内存、磁盘相对处于高负荷状态。其中XX系统的CPU资源使用过高，XX系统的内存使用明显异常，磁盘IO严重，磁盘增长明显过快，建议更换升级服务器资源或增加硬件资源，平衡系统资源。&lt;/para&gt;</div><div class="line">		&lt;/chapter&gt;</div><div class="line">		&lt;chapter level="2" num="3.2" title="系统运行状况"&gt;</div><div class="line">			&lt;chapter level="2" num="3.2.1" title="系统可用情况"&gt;</div><div class="line">				&lt;loop items="app.appSet"&gt;</div><div class="line">					&lt;arrow title="$&#123;name&#125;"&gt;</div><div class="line">						&lt;para type="content"&gt;故障次数$&#123;data.failTotal&#125;次，其中一级故障$&#123;data.failHigh&#125;次，二次故障$&#123;data.failMiddle&#125;次，三级故障$&#123;data.failLow&#125;次。&lt;/para&gt;</div><div class="line">						&lt;para type="content"&gt;可用性说明：本月重点人系统运行正常，业务繁忙时段xx访问测试X次，正常访问X次。&lt;/para&gt;</div><div class="line">					&lt;/arrow&gt;</div><div class="line">				&lt;/loop&gt;</div><div class="line">			&lt;/chapter&gt;</div><div class="line">			&lt;chapter level="2" num="3.2.2" title="系统可用情况"&gt;</div><div class="line">				&lt;loop items="app.appSet"&gt;</div><div class="line">					&lt;arrow title="$&#123;name&#125;"&gt;</div><div class="line">						&lt;para type="content"&gt;非计划中断次数$&#123;data.interruptNum&#125;次，系统稳定性$&#123;steady&#125;。&lt;/para&gt;</div><div class="line">					&lt;/arrow&gt;</div><div class="line">				&lt;/loop&gt;</div><div class="line">			&lt;/chapter&gt;</div><div class="line">		&lt;/chapter&gt;</div><div class="line">		</div><div class="line">		&lt;chapter level="2" num="3.3" title="系统运行状态趋势分析"&gt;</div><div class="line">			&lt;chapter level="2" num="3.3.1" title="系统故障趋势分析"&gt;</div><div class="line">				&lt;chapter level="2" num="3.3.1.1" title="XX系统"&gt;</div><div class="line">					&lt;arrow title="数据统计"&gt;</div><div class="line">						&lt;para type="desc"&gt;$&#123;app.name&#125;$&#123;app.twoPrevMonth&#125;故障数&#123;app.twoPreData.failTotal&#125;，$&#123;app.onePrevMonth&#125;故障数$&#123;app.onePreData.failTotal&#125;，本月$&#123;app.month&#125;故障数$&#123;app.data.failTotal&#125;。从故障数据分析来看，故障数呈$&#123;app.trend&#125;趋势。&lt;/para&gt;</div><div class="line">					&lt;/arrow&gt;</div><div class="line">					&lt;arrow title="原因分析"&gt;</div><div class="line">						&lt;para type="desc"&gt;描述本月故障主要集中点，分析造成原因。&lt;/para&gt;</div><div class="line">					&lt;/arrow&gt;</div><div class="line">					&lt;arrow title="改进措施"&gt;</div><div class="line">						&lt;para type="desc"&gt;针对本月故障上升的情况，提出改进措施。&lt;/para&gt;</div><div class="line">					&lt;/arrow&gt;</div><div class="line">				&lt;/chapter&gt;</div><div class="line">			&lt;/chapter&gt;</div><div class="line">		&lt;/chapter&gt;</div><div class="line">	&lt;/chapter&gt;</div><div class="line">	&lt;chapter level="1" num="4" title="运维服务情况统计"&gt;</div><div class="line">		&lt;para type="content"&gt;$&#123;app.month&#125;共进行系统升级xx次，自动监控$&#123;app.data.monitorFail&#125;次，人工巡检$&#123;app.data.requestFail&#125;次，事件响应xx次。具体情况如下：&lt;/para&gt;</div><div class="line">		&lt;arrow title="人工巡检："&gt;</div><div class="line">			&lt;para type="content"&gt;故障数量$&#123;app.data.requestFail&#125;次，已解决数量$&#123;app.data.requestSolve&#125;次，未解决数量$&#123;app.data.requestUnsolve&#125;次，解决率$&#123;app.data.requestSolveRate&#125;%。&lt;/para&gt;</div><div class="line">		&lt;/arrow&gt;</div><div class="line">		&lt;arrow title="自动监控："&gt;</div><div class="line">			&lt;para type="content"&gt;故障数量$&#123;app.data.monitorFail&#125;次，已解决数量$&#123;app.data.monitorSolve&#125;次，未解决数量$&#123;app.data.monitorUnsolve&#125;次，解决率$&#123;app.data.requestSolveRate&#125;%。&lt;/para&gt;</div><div class="line">		&lt;/arrow&gt;</div><div class="line">		&lt;arrow title="事件响应："&gt;</div><div class="line">			&lt;para type="content"&gt;故障数量x次，已解决数量x次，未解决数量x次，解决率x%。&lt;/para&gt;</div><div class="line">		&lt;/arrow&gt;</div><div class="line">		&lt;arrow title="系统升级："&gt;</div><div class="line">			&lt;para type="content"&gt;故障数量x次，已解决数量x次，未解决数量x次，解决率x%。&lt;/para&gt;</div><div class="line">		&lt;/arrow&gt;</div><div class="line">		&lt;chapter level="2" num="4.1" title="重大事件报告"&gt;</div><div class="line">			&lt;para type="desc"&gt;如本月有运维相关的重大事件，可在此处简略报告。&lt;/para&gt;</div><div class="line">		&lt;/chapter&gt;</div><div class="line">	&lt;/chapter&gt;</div><div class="line">	</div><div class="line">	&lt;endChapter num="5" title="用户评价及反馈" &gt;</div><div class="line">		&lt;para type="desc"&gt;报告打印出来后，由用户方运维工作接口人在本章节对运维工作进行评价。&lt;/para&gt;</div><div class="line">		&lt;para type="content"&gt;本月运维报告用户签收确认：&lt;/para&gt;</div><div class="line">		&lt;para type="content"&gt;&lt;/para&gt;</div><div class="line">		&lt;para type="content"&gt;&lt;/para&gt;</div><div class="line">		&lt;para type="content"&gt;本月运维工作用户评价：&lt;/para&gt;</div><div class="line">		&lt;para type="content"&gt;&lt;/para&gt;</div><div class="line">		&lt;para type="content"&gt;&lt;/para&gt;</div><div class="line">		&lt;para type="content"&gt;&lt;/para&gt;</div><div class="line">		&lt;para type="right"&gt;用户签名：&lt;/para&gt;</div><div class="line">		&lt;para type="right"   日期：&lt;/para&gt;</div><div class="line">	&lt;/endChapter&gt;</div><div class="line">&lt;/Doc&gt;</div></pre></td></tr></table></figure>
<p>#处理元素<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">procChild</span><span class="params">(Document doc, IDocFactory factory,</span></span></div><div class="line">           Object model, org.dom4j.Element element) &#123;</div><div class="line"></div><div class="line">       List elements = element.elements();</div><div class="line">       <span class="keyword">if</span> (elements != <span class="keyword">null</span> &amp;&amp; !elements.isEmpty()) &#123;</div><div class="line">           <span class="keyword">for</span> (Object obj : elements) &#123;</div><div class="line">               org.dom4j.Element ele = (org.dom4j.Element) obj;</div><div class="line">               String eleName = ele.getName();</div><div class="line">               <span class="comment">//..... 这里通过元素的名称来判断下一步通过哪种方法处理</span></div><div class="line">           &#125;</div><div class="line">       &#125;</div></pre></td></tr></table></figure></p>
<p>#生成无参数的模板内容<br>这里通过很多工具类，根据标签的不同使用不同的处理方法，方法如下图。</p>
<p>随便找一个方法出来举个例子<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">procPara</span><span class="params">(Document doc, IDocFactory factory,</span></span></div><div class="line">           Object model, org.dom4j.Element ele) &#123;</div><div class="line">   	<span class="comment">//获取该段的样式类型，如正文、斜体、初体、居右、注释</span></div><div class="line">       String type = getElementStr(ele, model,DocConstants.PARA_TYPE);</div><div class="line">       <span class="comment">//获取段落的内容</span></div><div class="line">       String text = getElementData(model, ele);</div><div class="line">       <span class="comment">//通过抽象工厂，根据类型生成段落</span></div><div class="line">       Paragraph para = factory.getParagraph(text, type);</div><div class="line">       <span class="comment">//将段落添加到文档输出流中,等close的时候统一输出</span></div><div class="line">       add(doc, para);</div><div class="line">       <span class="comment">//处理子节点，如果有的话</span></div><div class="line">       procChild(doc, factory, model, ele);</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<p>#处理循环<br>需求要求支持循环，类似<c:foreach>标签的效果。如下就是遍历平台的所有子系统。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">loop</span> <span class="attr">items</span>=<span class="string">"app.appSet"</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">arrow</span> <span class="attr">title</span>=<span class="string">"$&#123;name&#125;"</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">para</span> <span class="attr">type</span>=<span class="string">"content"</span>&gt;</span>故障次数$&#123;data.failTotal&#125;次，其中一级故障$&#123;data.failHigh&#125;次，二次故障$&#123;data.failMiddle&#125;次，三级故障$&#123;data.failLow&#125;次。<span class="tag">&lt;/<span class="name">para</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">para</span> <span class="attr">type</span>=<span class="string">"content"</span>&gt;</span>可用性说明：本月重点人系统运行正常，业务繁忙时段xx访问测试X次，正常访问X次。<span class="tag">&lt;/<span class="name">para</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">arrow</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">loop</span>&gt;</span></div></pre></td></tr></table></figure></c:foreach></p>
<p>#代码实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> String itemsName = getElementStr(ele, model, DocConstants.LOOP_ITEMS);</div><div class="line">Set apps = (Set) getObjectAttribute(model, itemsName);</div><div class="line">      <span class="keyword">if</span> (apps.isEmpty()) &#123;</div><div class="line">             procChild(doc, factory, model, ele);</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">             <span class="keyword">for</span> (Object app : apps) &#123;</div><div class="line">                 procChild(doc, factory, app, ele);</div><div class="line">             &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>#处理对象<br>首先，在模板中有很多数据，我们要获取，就一定要有一个通过反射来获取数据的方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Object result = <span class="keyword">null</span>;</div><div class="line">      Method method = obj.getClass().getMethod(</div><div class="line">             <span class="string">"get"</span> + StringUtils.firstUpperCase(tempAttr));</div><div class="line">      <span class="comment">// 判断调用方法的返回类型</span></div><div class="line">      <span class="keyword">if</span> (method != <span class="keyword">null</span>) &#123;</div><div class="line">          result = method.invoke(obj);</div><div class="line">      &#125;</div><div class="line">  <span class="keyword">return</span> result;</div></pre></td></tr></table></figure></p>
<p>#嵌套对象处理<br>如果需要处理的参数属于存在对象嵌套的，那要先处理这层关系。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">getDupObjectAttribute</span><span class="params">(Object model, String val)</span> </span>&#123;</div><div class="line">        String result = <span class="keyword">null</span>;</div><div class="line">        String[] vals = val.split(<span class="string">"\\."</span>, <span class="number">2</span>);</div><div class="line">        Object object = getObjectAttribute(model, vals[<span class="number">0</span>]);</div><div class="line">        <span class="keyword">if</span>(object == <span class="keyword">null</span>)&#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"-1"</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (vals[<span class="number">1</span>].contains(<span class="string">"."</span>)) &#123;</div><div class="line">            result = getDupObjectAttribute(object, vals[<span class="number">1</span>]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            result = (String) getObjectAttribute(object, vals[<span class="number">1</span>]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>#处理参数<br>那么可以处理数据了，那参数要怎么从模板中寻找出来呢？第一步就是使用正则表达式来寻找需要处理的参数。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//REGEX = "\\$\\&#123;([^\\&#125;]+)?\\&#125;"</span></div><div class="line">	Pattern pat = Pattern.compile(REGEX);</div><div class="line">       Matcher mat = pat.matcher(text);</div><div class="line">       String result = text;</div><div class="line">       <span class="keyword">while</span> (mat.find()) &#123;</div><div class="line">           String val = mat.group(<span class="number">1</span>);</div><div class="line">           String resultVal = <span class="keyword">null</span>;</div><div class="line">           <span class="keyword">try</span> &#123;</div><div class="line">               <span class="keyword">if</span> (val.contains(<span class="string">"."</span>)) &#123;</div><div class="line">			<span class="comment">//如果存在嵌套，则通过反射先获取</span></div><div class="line">                   resultVal = getDupObjectAttribute(model, val);</div><div class="line">               &#125;</div><div class="line">               <span class="keyword">else</span> &#123;</div><div class="line">                   resultVal = (String) getObjectAttribute(model, val);</div><div class="line">               &#125;</div><div class="line">               <span class="keyword">if</span>(StringUtils.isNotBlank(resultVal) &amp;&amp; !<span class="string">"-1"</span>.equals(resultVal))&#123;</div><div class="line">                   result = result.replaceFirst(<span class="string">"\\$\\&#123;"</span> + val + <span class="string">"\\&#125;"</span>, resultVal);</div><div class="line">               &#125;</div><div class="line">           &#125;</div><div class="line">           <span class="keyword">catch</span>(Throwable e) &#123;</div><div class="line">               e.printStackTrace();</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line">       <span class="keyword">return</span> result;</div></pre></td></tr></table></figure></p>
<p>#思考<br>用Java显然对于制作模板引擎不是很擅长。之前介绍Javascript正则的时候，用20行代码，就可以实现更强大的功能，不过安全性会有一点问题。存在被植入代码的可能。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/24/2014-03-24-individual-thinking/" itemprop="url">
                  “下个人”思维
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Veröffentlicht am</span>
            <time itemprop="dateCreated" datetime="2014-03-24T14:29:00+08:00" content="2014-03-24">
              2014-03-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">in</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/人性/" itemprop="url" rel="index">
                    <span itemprop="name">人性</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/人性/总结/" itemprop="url" rel="index">
                    <span itemprop="name">总结</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/人性/总结/利他/" itemprop="url" rel="index">
                    <span itemprop="name">利他</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/人性/总结/利他/下个人思维/" itemprop="url" rel="index">
                    <span itemprop="name">下个人思维</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/人性/总结/利他/下个人思维/高大上/" itemprop="url" rel="index">
                    <span itemprop="name">高大上</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>应该也有一周没写博文了，Deadline和坑爹的队友就像两座大山，压的我快窒息了。还好周末来了，加班一天，带着我家小妞出去瞎晃一天半，心情是好多了。唯一有点美中不足的就是，不管是忠仑公园，还是十里蓝山，总是有很多游客践踏花草，掰着花朵、躺在花朵上拍照，还有刻字到此一游的。<br>《代码整洁之道》这本书里面我最喜欢一句话，就是请保证你离开的时候，比你进来的时候更加干净。我觉得这思想可以延伸的很广，也就是我想说的，下个人思维。这也是罗胖子早上发的微信的标题，他的文章给了我很多感悟，老样子，斜体部分是转载。<br><img src="http://case.ntu.edu.tw/hs/wordpress/wp-content/uploads/2011/08/76%E7%BE%A4%E9%AB%94%E5%8B%95%E7%89%A9%E7%9A%84%E5%88%A9%E4%BB%96%E8%A1%8C%E7%82%BA.jpg" alt="thinkother.jpg"><br>什么是下个人思维，用通俗的话来说，就是做一个事情的时候，可以为下个人考虑。网上经常看到很多人抱怨，老外存在偏见，总是看不起中国人，比如去国外旅游，我们经常被当做是很没素质的群体，在外国人眼里，我们就是Touch Then Leave，自己仔细想想，是不是自己出去玩，看到东西就有一股想要去摸的冲动，我承认，我有。而作为我们的邻居，作为我们仇恨的对象，日本人在这点上我觉得做的就很好。如果你觉得我在贬低自己民族，抬高猪狗不如的小日本，那么请别看下去了吧，我只抵制蠢货不抵制日货的。<br>我觉得日本人之所以能一次又一次的崛起，无外乎两点，一个是靠着勤奋和汗水可以实现梦想的日本梦，另一个就是协作能力，也就是下个人思维。<br>日本的很多厕所都写着这么一句话“为了下一位使用者，请保持干净”。每个人在自家的厕所，很自然的会保持干净，因为下一个人可能是你的妻子、儿子、父母，但是，这是公共厕所啊，下一个人我又不认识，我干嘛要辛苦保持干净呢？但是，如果我们这么想，我们也是上一个使用厕所的人眼里的下一个人，如果他不保持干净，那我们就没法使用到干净的厕所。如果我不保持干净，那么这必定会造成恶心循环，整个卫生就变脏了。以我旅游的经验，国内大多数城市旅游景区的厕所都很不干净。厦门可能算是国内比较干净的了，江西、云南的厕所，有的甚至让人作呕。有一些比较干净的，也是建立在厕所维护人员辛勤工作的基础上的。<br>日本人的下个人思维不仅仅是在这么一张小小的提示语上的，日本人对孩子的教育也是非常注重这些人性美的品质上，日本有一个童话故事，讲的是 <em>一只小熊，拿了一筐橡子赶路。他走着走着走累了，刚巧看到一把椅子，椅背上 写着“dozo（您请）”，于是他就在椅子上坐下，想休息一会，谁知不知不觉睡着了。这时来了一只小兔，小兔很饿，他看到了橡子和“dozo”，就吃了起 来。吃完了他想，呀，我把这橡子吃了，筐就空了，那下一个来的人咋办？于是他就去采了很多葡萄，放在筐里，高高兴兴的走了。这时来了一只小狗，小狗也饿了，看到葡萄和“dozo”很高兴，坐下来把葡萄吃了。吃完了也想，呀，那下一个人咋办？于是他就去采了蘑菇放在筐里。儿童的故事嘛，这种循环往复的桥段有点多，最后一个好像是小象，他采了栗子放在筐里。然后小熊睡醒了，他惊讶的发现：吚？我的橡子变栗子了！然后高高兴兴的走了。</em><br><strong>在儿童的教育中种下这种“下一个人”的概念的日本民族很了不起。这是一种为他人着想的善意，而且，也许会经历很长很久，但为善的，终究善会回来自己身上，这种观念实则也是利己主义。</strong><br>而我们从小的教育都是血淋淋的，比如我们“美好”的生活都是革命先辈们用血和肉堆积起来的，和孩子讲这样的故事，我觉得是完全偏离的人性的基本要素。虽然我今天写下个人思维，但是我自己就不是一个很有下个人思维的人，此文最根本目的也就是警示自己而已。<br>今天扯这个“高大上”的话题，难免陷入空洞说教的泥坑，所以我也赶紧把话题收了吧。其实，我一直有一个疑问，既然自私是人类的天性，为什么全世界的历朝历代，人类又在宣扬无私和利他，为什么要跟自己较劲？为什么制造出“高尚”“道德”这样 的概念来折磨自己？搞得好，我们也相信世界上的确存在典范和楷模，搞不好，不就是虚伪是绑架是卫道士么？为什么不能像动物一样直白的丛林法则？难道这不更顺应天性符合规律吗？ <strong>难道达尔文适者生存的进化论都是胡扯的吗？</strong><br>说一个历史事件，达尔文死后，1925年英国发生了法律史上著名的猴子审判，有大量的宗教人士推动立法，比如说1925年田纳西州就立了这么一个巴特勒法案，这个法案规定，不许在课堂上讲授一个字的进化论，否则就是犯法。这个事情不细说，就说说他们对进化论证伪的其中一个依据就是，动物有很多你观察到现象，用进化论是没法解释的，比如说互惠行为，吸血蝙蝠吸一口血，然后一看旁边的小伙伴没吃着，哎我喂你一口，发生这个事。有的鸟看见有天敌来了，它率先报警，要知道它报警会危害它自己的生命，但是它就愿意干这个事。在蜜蜂里面有一种叫工蜂，工蜂是没有后代的，但是它就是辛勤地哺乳，所有活都是它干，它没有任何进化上的利益。<br>但是，从我今天的主题来看，就是下个人思维，也就是利他。其实进化的单位不是物种，不是单个的生命，是一种叫基因的东西，基因是潜藏在每个生物体内部的，整个生物演化过程是基因的一个阴谋，它就一个目的，把我这玩意儿传下去。所谓的生物体不过是它搭的一辆公共汽车而已，只是它达到目的的手段。地球上的生物所有的协作行为，最后都导致该生物的基因可以更好的传下去。<br>从这点上可以明白，原来，利他，从而长久的利己，才是人类的本质。<br>所以啊，请你下次做事情的时候，请想一下下一个人，利他，从你我做起！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/13/2014-03-13-linux-shell-programming-study-notes-d-process-variables/" itemprop="url">
                  Linux Shell编程学习笔记（五）-进程变量
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Veröffentlicht am</span>
            <time itemprop="dateCreated" datetime="2014-03-13T00:02:00+08:00" content="2014-03-13">
              2014-03-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">in</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/bash/" itemprop="url" rel="index">
                    <span itemprop="name">bash</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/bash/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/bash/Shell/进程变量/" itemprop="url" rel="index">
                    <span itemprop="name">进程变量</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="进程变量"><a href="#进程变量" class="headerlink" title="进程变量"></a>进程变量</h1><h2 id="获得当前shell的PID"><a href="#获得当前shell的PID" class="headerlink" title="$$ 获得当前shell的PID"></a>$$ 获得当前shell的PID</h2><figure class="highlight bash"><figcaption><span>$$查看当前shell</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[David@localhost study]$ ps</div><div class="line">  PID TTY          TIME CMD</div><div class="line"> 4410 pts/7    00:00:00 ps</div><div class="line">27865 pts/7    00:00:00 bash</div><div class="line">[David@localhost study]$ <span class="built_in">echo</span> $$</div><div class="line">27865</div></pre></td></tr></table></figure>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>运行个脚本，把PID写到一个文件中去。然后不让改脚本结束，打开另一个窗口查看PID是否正确。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[David@localhost study]$ cat m.sh</div><div class="line"><span class="built_in">echo</span> <span class="string">"$$"</span> &gt;m.pid</div><div class="line"><span class="keyword">while</span> <span class="literal">true</span></div><div class="line"><span class="keyword">do</span></div><div class="line">    sleep 1</div><div class="line"><span class="keyword">done</span></div><div class="line">[David@localhost study]$ sh m.sh</div></pre></td></tr></table></figure></p>
<p>再打开一个窗口输入命令查看是否正确<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[David@localhost study]$ cat m.pid</div><div class="line">6022</div><div class="line">[David@localhost study]$ ps -ef|grep m.sh</div><div class="line">David     6022  4430  0 23:07 pts/9    00:00:00 sh m.sh</div><div class="line">David     6128 29747  0 23:08 pts/8    00:00:00 grep m.sh</div></pre></td></tr></table></figure></p>
<h2 id="获取执行上一个指令的返回值（0为成功，非0为失败）"><a href="#获取执行上一个指令的返回值（0为成功，非0为失败）" class="headerlink" title="$? 获取执行上一个指令的返回值（0为成功，非0为失败）"></a>$? 获取执行上一个指令的返回值（0为成功，非0为失败）</h2><figure class="highlight bash"><figcaption><span>$?查看上一指令的结果</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">[David@localhost study]$ cat <span class="built_in">test</span>PrevResult.sh</div><div class="line"><span class="comment">#/bin/sh</span></div><div class="line"></div><div class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></div><div class="line">    success)</div><div class="line">        <span class="built_in">exit</span> 0</div><div class="line">        ;;</div><div class="line">    *)</div><div class="line">        <span class="built_in">exit</span> 1</div><div class="line">        ;;</div><div class="line"><span class="keyword">esac</span></div><div class="line">[David@localhost study]$ sh <span class="built_in">test</span>PrevResult.sh success</div><div class="line">[David@localhost study]$ <span class="built_in">echo</span> $?</div><div class="line">0</div><div class="line">[David@localhost study]$ <span class="built_in">echo</span> $?</div><div class="line">0</div><div class="line">[David@localhost study]$ sh <span class="built_in">test</span>PrevResult.sh erro</div><div class="line">[David@localhost study]$ <span class="built_in">echo</span> $?</div><div class="line">1</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[David@localhost study]$ hahha</div><div class="line">bash: hahha: command not found</div><div class="line">[David@localhost study]$ echo $?</div><div class="line">127</div><div class="line">[David@localhost study]$ pwd</div><div class="line">/home/David/shellwork/study</div><div class="line">[David@localhost study]$ echo $?</div><div class="line">0</div></pre></td></tr></table></figure>
<h2 id="常见返回码"><a href="#常见返回码" class="headerlink" title="常见返回码"></a>常见返回码</h2><p>0 成功<br>2 权限拒绝<br>1-125 表示运行失败，脚本命令、系统命令错误或参数错误<br>126 找到该命令但是无法执行<br>127 未找到要运行的命令<br>128 命令被系统强制结束</p>
<h2 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h2><p>压缩当前文件夹，如果成功则提示。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[David@localhost study]$ cat zipCurr.sh</div><div class="line"><span class="comment">#/bin/bash</span></div><div class="line"><span class="built_in">cd</span> ..</div><div class="line">tar zcf studyShell.tar.gz ./study</div><div class="line"><span class="keyword">if</span> [ $? <span class="_">-eq</span> 0 ];<span class="keyword">then</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"tar success"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"tar erro"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line">[David@localhost study]$ sh zipCurr.sh</div><div class="line">tar success</div><div class="line">[David@localhost study]$ <span class="built_in">cd</span> ..</div><div class="line">[David@localhost shellwork]$ ls</div><div class="line">study  studyShell.tar.gz</div></pre></td></tr></table></figure></p>
<h2 id="上一个进程的PID"><a href="#上一个进程的PID" class="headerlink" title="#!上一个进程的PID"></a>#!上一个进程的PID</h2><p>不常用，不细说。</p>
<h2 id="上一个进程的最后一个参数"><a href="#上一个进程的最后一个参数" class="headerlink" title="#_上一个进程的最后一个参数"></a>#_上一个进程的最后一个参数</h2><p>也不常用，举个栗子带过。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[David@localhost study]$ sh m.sh</div><div class="line">已杀死</div><div class="line">[David@localhost study]$ echo $_</div><div class="line">m.sh</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/12/2014-03-12-linux-shell-programming-study-notes-d-variables/" itemprop="url">
                  Linux Shell编程学习笔记（四）位置变量
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Veröffentlicht am</span>
            <time itemprop="dateCreated" datetime="2014-03-12T13:18:00+08:00" content="2014-03-12">
              2014-03-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">in</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/bash/" itemprop="url" rel="index">
                    <span itemprop="name">bash</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/bash/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/bash/Shell/位置变量/" itemprop="url" rel="index">
                    <span itemprop="name">位置变量</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="位置变量"><a href="#位置变量" class="headerlink" title="位置变量"></a>位置变量</h1><p>$0 shell脚本的文件名，会包括路径<br>$n 第几个参数<br>$* 获取当前shell的所有参数，将所有的命令行参数视为一个字符串。<br>$# shell脚本参数的总个数<br>$@ 获取当前shell的所有参数，并保留在内嵌在参数中的任何空白，常用于传参<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">/bin/sh</div><div class="line"><span class="built_in">echo</span> <span class="string">'$0:'</span><span class="variable">$0</span></div><div class="line"><span class="built_in">echo</span> <span class="string">'$1:'</span><span class="variable">$1</span></div><div class="line"><span class="built_in">echo</span> <span class="string">'$&#123;10:&#125;'</span><span class="variable">$&#123;10&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">'$#:'</span><span class="variable">$#</span>                                                                    </div><div class="line"><span class="built_in">echo</span> <span class="string">'$*:'</span>$*</div><div class="line"><span class="built_in">echo</span> <span class="string">'$@:'</span><span class="variable">$@</span></div></pre></td></tr></table></figure></p>
<p>控制台输出<br>[David@localhost study]$ ./echoDolar.sh ‘seq 11’<br>0:./echoDolar.sh<br>$1:1<br>${10:}10<br>$#:11<br>$*:1 2 3 4 5 6 7 8 9 10 11<br>$@:1 2 3 4 5 6 7 8 9 10 11</p>
<h1 id="例子-0、-1"><a href="#例子-0、-1" class="headerlink" title="例子-$0、$1"></a>例子-$0、$1</h1><p>做一个小例子，接受参数，参数为start则执行start函数，stop则执行stop函数。如果都不是的话，就提示错误，并提示如何输入正确的命令。例子中用到了$0和$1。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">start</span></span>() &#123;</div><div class="line">    <span class="built_in">echo</span> <span class="string">"start"</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="title">stop</span></span>()&#123;</div><div class="line">    <span class="built_in">echo</span> <span class="string">"stop"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="title">erro</span></span>()&#123;</div><div class="line">    <span class="built_in">echo</span> <span class="string">"Argument is erro ,please input what like '<span class="variable">$0</span> start|stop'"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> <span class="_">-ne</span> 1 ];<span class="keyword">then</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"Argument's number is Erro,please input only one argument."</span></div><div class="line"><span class="keyword">else</span></div><div class="line">    <span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></div><div class="line">        start)</div><div class="line">            start</div><div class="line">            ;;</div><div class="line">        stop)</div><div class="line">            stop</div><div class="line">            ;;</div><div class="line">        *)</div><div class="line">            erro</div><div class="line">            ;;</div><div class="line"></div><div class="line">    <span class="keyword">esac</span></div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<p>控制台：<br>[David@localhost study]$ ./operByName.sh  start<br>start<br>[David@localhost study]$ ./operByName.sh  stop<br>stop<br>[David@localhost study]$ ./operByName.sh  erro<br>Argument is erro ,please input what like ‘./operByName.sh start|stop’</p>
<h1 id="例子-、"><a href="#例子-、" class="headerlink" title="例子-$*、$@"></a>例子-$*、$@</h1><p>用个例子，可以看出，加了引号后$<em>变成一个字符串，而$@仍然是多个。<br>控制台：<br>[David@localhost study]$ set – “I am” David Wu.<br>[David@localhost study]$ echo $#<br>3<br>[David@localhost study]$ echo $</em><br>I am David Wu.<br>[David@localhost study]$ echo $@<br>I am David Wu.<br>[David@localhost study]$ for i in $<em>;do echo $i;done<br>I<br>am<br>David<br>Wu.<br>[David@localhost study]$ for i in $@;do echo $i;done<br>I<br>am<br>David<br>Wu.<br>[David@localhost study]$ for i in “$@”;do echo $i;done<br>I am<br>David<br>Wu.<br>[David@localhost study]$ for i in “$</em>“;do echo $i;done<br>I am David Wu.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/11/2014-03-11-team-executive-power-please-consider-reason-from-the-management/" itemprop="url">
                  团队执行力不足？请从管理上考虑原因
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Veröffentlicht am</span>
            <time itemprop="dateCreated" datetime="2014-03-11T14:42:00+08:00" content="2014-03-11">
              2014-03-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">in</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/项目管理/" itemprop="url" rel="index">
                    <span itemprop="name">项目管理</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/项目管理/执行力/" itemprop="url" rel="index">
                    <span itemprop="name">执行力</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p> <strong><em>本文是看了陆老师博客，并且结合自己在研发管理工作中的体会，半载半写的一边扯文，不喜欢看的请点这<a href="http://blog.csdn.net/happydeer/article/details/21018027" target="_blank" rel="external">解决执行力问题的思路 </a></em></strong></p>
<p>#执行力不足的原因？<br>斯坦迪集团（StandishGroup）的创始人Jim Johnson曾经说过，“<em>Whenprojects fail, it’s rarely technical.</em>”<br>这句话真是Can’t agree more!一个项目失败的原因很多，但是只有10%的原因会是技术不足造成的。今天项目的测试人员给我说，经过领导评审后，界面上真的有很大改观，好看多了，之前没有这样的效果，真 <strong>关键不是能不能做，而是想不想做</strong> 。<br>因此，面对执行力差这个结果，我更愿意怀疑是管理和沟通、态度上的问题，而未必就是直觉上认为的团队的技术能力问题。<br> <img src="http://a3.att.hudong.com/21/38/01300533987802133715382738688.png" alt="执行力.jpg"></p>
<p>#何为执行力？<br>陆老师找了个网上对执行力的解释，执行力指的是贯彻<strong>战略意图</strong>，完成预定<strong>目标</strong>的操作<strong>能力</strong>。从这句话可以看出，先得有目标，然后有达到目标的战略，最后才是依靠能力去实现。</p>
<p>#让团队成员充分理解正确的目标<br>首先没有明确的目标，或者目标传递的不够充分，那么说团队执行力不足那简直就是扯淡。作为管理者必须思考<em>每个团队成员都准确理解了他们的目标吗？大家都认可吗？</em>，首先我承认自己在这点上做的很不好。</p>
<p>#切合实际的战略意图<br>在看看战略意图，也就是一件事的大方向。最终的执行结果不理想，有没有可能是因为这个战略在一开始就是错误的（或者不切实际的）呢？如果给团队指了一个错的方向，团队当然到不了对的地方。即使战略是正确的，执行的人100%理解并认可这个战略吗？如果没有理解和认可，可想而知执行效果不会好！这里可能存在老板与高层管理者之间的沟通问题。<br>这点上，团队当前项目在去年一直摇摆不定，战略意图不明确，战略地位更没个谱，可以说到现在有点成绩，还真是很不容易。<br>战略在被执行的时候要细化成一个个小目标。这些目标都遵循了著名的SMART原则吗？让我们来回顾一下这5个原则：</p>
<pre><code>1. 目标必须是具体的（Specific）
2. 目标必须是可以衡量的（Measurable）
3. 目标必须是可以达到的（Attainable）
4. 目标必须和其他目标具有相关性（Relevant）
5. 目标必须具有明确的截止期限（Time-bound）
</code></pre><p>#能力=管理能力+技术能力</p>
<h2 id="管理能力"><a href="#管理能力" class="headerlink" title="管理能力"></a>管理能力</h2><p>首先，在能力上找原因还得先找管理上的能力。团队领导给队员做了足够的沟通吗？在执行的过程中，有没有专人进行有效的跟踪和控制？过程中有没有引入反馈机制以形成自我完善的良性循环？<br>可以说，这些对于我这个管理新人来说，都没做好。真是上头能让我这样试错，团队成员没对我表现不满，真是难为大家了。</p>
<h2 id="技术能力"><a href="#技术能力" class="headerlink" title="技术能力"></a>技术能力</h2><p>我们再把注意力转到能力上来。执行最终靠的是团队。有的人技术不错，但是做事的方法不对，不会需找技巧；而又有的人态度上不够积极，没有 Go Hard Or Go Home 的精神；有的人想学习，但是意愿不够强烈导致最终只是想想而已。<br>这点我还真不知道怎么用自己的想法去约束他人，我的领导是这么给我说的，如果这个人求稳，那么，去做二次开发，让有意愿做产品的人来做。</p>
<p>#总结<br>执行力差是一个结果，但它是由什么造成的呢？只有知道了原因，才能对症下药。原因多数情况下并非技术问题，而是目标、战略、管理、控制的原因。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/11/2014-03-11-in-the-growth-of-three-bell/" itemprop="url">
                  成长中的三条警世钟
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Veröffentlicht am</span>
            <time itemprop="dateCreated" datetime="2014-03-11T13:44:00+08:00" content="2014-03-11">
              2014-03-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">in</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/载记/" itemprop="url" rel="index">
                    <span itemprop="name">载记</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/载记/警世钟/" itemprop="url" rel="index">
                    <span itemprop="name">警世钟</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>文章大部分内容载自电影《我在伊朗长大》中奶奶的忠告。</p>
<p>#躲开那些无耻的混蛋，千万别因为他们变的卑鄙<br><em>一生当中，你会碰到许多混蛋，他们伤害你，是因为他们愚蠢，你不必因此回应他们的恶意，世上最糟的就是自卑和报复心理。永远要维持自尊与诚实。</em><br>混蛋总会有，在某些阶段和时刻，个人的力量也许微小，不足以向混蛋抗衡，但个人可以游离混蛋之外，不被恶棍影响，不让他们剥夺我们内心最可贵的诚实，也绝不让他们将自卑与粗鄙植入我们的心灵——如果你这样做了，无论如何，你都上了他们当，因为你被他们控制，失去了最重要的东西。在一些特殊的宗教或政治影响 下，很多人一辈子都沦为创伤和仇恨的工具，从未真正地活过</p>
<p>#每个人都可以选择，别用借口把自己的选择伪装的多么无奈似的<br><em>你当然有选择。每个人都有。所有的人永远都有选择权。</em><br>你选择了什么，就是什么，别找借口。口口声声说自己没有选择权而做出伤害他人的卑鄙之事，是否认自己身而为人，否则自己有自由意志，是不可原谅的下作之举。</p>
<p>#活自己<br><em>活得洒脱自在，蔑视世人愚蠢的规矩和偏见</em><br>假如生活欺骗了你，不要悲伤，过好自己的生活，没有什么事情是可怕的，除非是谁死掉了。这次的不如意是为之后的成功做准备，下次会更满意的。</p>
<p>#总结<br>人终有一老，或老而猥琐，或老而优雅，我们总有选择。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/10/2014-03-10-linux-shell-programming-study-notes-c-local-variables/" itemprop="url">
                  Linux Shell编程学习笔记（三）本地变量 
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Veröffentlicht am</span>
            <time itemprop="dateCreated" datetime="2014-03-10T14:43:00+08:00" content="2014-03-10">
              2014-03-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">in</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/bash/" itemprop="url" rel="index">
                    <span itemprop="name">bash</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/bash/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="本地变量"><a href="#本地变量" class="headerlink" title="本地变量"></a>本地变量</h2><h2 id="显示本地变量"><a href="#显示本地变量" class="headerlink" title="#  显示本地变量"></a>#  显示本地变量</h2><p>set命令可以显示当前环境所有变量，包括本地变量和环境变量。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[David@localhost ~]$ aaa=bbb</div><div class="line">[David@localhost ~]$ env | grep aaa</div><div class="line">[David@localhost ~]$ <span class="built_in">set</span> | grep aaa</div><div class="line">aaa=bbb</div><div class="line">[David@localhost ~]$ <span class="built_in">export</span> aaa</div><div class="line">[David@localhost ~]$ env | grep aaa</div><div class="line">aaa=bbb</div><div class="line">[David@localhost ~]$ <span class="built_in">set</span> | grep aaa</div><div class="line">aaa=bbb</div></pre></td></tr></table></figure></p>
<h2 id="定义本地变量"><a href="#定义本地变量" class="headerlink" title="#  定义本地变量"></a>#  定义本地变量</h2><p>变量名=value 会解析，用于定义连续的比较简单的字符串数字<br>变量名=’value’  所见即所得，单引号里面的是什么就会显示什么，不会进行解析<br>变量名=”value” 会解析，一般字符串定义推荐使用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">[David@localhost ~]$ a=192.168.0.248</div><div class="line">[David@localhost ~]$ b=<span class="string">'192.168.0.248'</span></div><div class="line">[David@localhost ~]$ c=<span class="string">"192.168.0.248"</span></div><div class="line">[David@localhost ~]$ <span class="built_in">echo</span> <span class="string">"a=<span class="variable">$a</span>"</span></div><div class="line">a=192.168.0.248</div><div class="line">[David@localhost ~]$ <span class="built_in">echo</span> <span class="string">"b=<span class="variable">$b</span>"</span></div><div class="line">b=192.168.0.248</div><div class="line">[David@localhost ~]$ <span class="built_in">echo</span> <span class="string">"c=<span class="variable">$c</span>"</span></div><div class="line">c=192.168.0.248</div><div class="line">[David@localhost ~]$ a=192.168.1.2-<span class="variable">$a</span></div><div class="line">[David@localhost ~]$ <span class="built_in">echo</span> <span class="variable">$a</span></div><div class="line">192.168.1.2-192.168.0.248</div><div class="line">[David@localhost ~]$ b=<span class="string">'192.168.1.2-$b'</span></div><div class="line">[David@localhost ~]$ <span class="built_in">echo</span> <span class="variable">$b</span></div><div class="line">192.168.1.2-<span class="variable">$b</span></div><div class="line">[David@localhost ~]$ c=<span class="string">"192.168.1.2-<span class="variable">$c</span>"</span></div><div class="line">[David@localhost ~]$ <span class="built_in">echo</span> <span class="variable">$c</span></div><div class="line">192.168.1.2-192.168.0.248</div></pre></td></tr></table></figure></p>
<h2 id="通过反引号用本地变量引用linux命令"><a href="#通过反引号用本地变量引用linux命令" class="headerlink" title="#  通过反引号用本地变量引用linux命令"></a>#  通过反引号用本地变量引用linux命令</h2><p>用反引号将命令括起来，可以赋给本地变量。显示的时候就会执行该变量。但是记得不能用单引号。推荐使用$(date)方式处理命令，因为反引号不容易发现且会给当成单引号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[David@localhost ~]$ userCommand=`whoami`</div><div class="line">[David@localhost ~]$ echo $userCommand</div><div class="line">David</div><div class="line">[David@localhost ~]$ echo &quot;`date`&quot;</div><div class="line">2014年 03月 10日 星期一 22:07:38 CST</div><div class="line">[David@localhost ~]$ echo `date`</div><div class="line">2014年 03月 10日 星期一 22:07:44 CST</div><div class="line">[David@localhost ~]$ echo &apos;`date`&apos;</div><div class="line">`date`</div></pre></td></tr></table></figure></p>
<h2 id="规范"><a href="#规范" class="headerlink" title="#  规范"></a>#  规范</h2><p>数字或简单字符串不用引号；<br>没特殊情况一般用双引号；<br>原样输出用双引号；<br>常量尽量用大写，多单词用下划线连接，特别是全局变量；<br>引用最好是${VAR_NAME}；<br>避免使用无意义的名字，比如COUNT；<br>在函数里定义变量，记得用local来声明，例如：local i；<br>使用$(date)方式处理命令，因为反引号不容易发现且会给当成单引号；</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/10/2014-03-10-linux-shell-programming-study-notes-b-global-variables/" itemprop="url">
                  Linux Shell编程学习笔记（二）全局变量
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Veröffentlicht am</span>
            <time itemprop="dateCreated" datetime="2014-03-10T12:46:00+08:00" content="2014-03-10">
              2014-03-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">in</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/bash/" itemprop="url" rel="index">
                    <span itemprop="name">bash</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/bash/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><h2 id="全局环境变量"><a href="#全局环境变量" class="headerlink" title="全局环境变量"></a>全局环境变量</h2><h2 id="文件"><a href="#文件" class="headerlink" title="#  文件"></a>#  文件</h2><p>/etc/profile 这个文件中预设了系统的环境变量。<br>修改后记得 . /etc/profile(中间有个空格)</p>
<h2 id="启动执行路径"><a href="#启动执行路径" class="headerlink" title="#  启动执行路径"></a>#  启动执行路径</h2><p>/etc/profile.d 将脚本放到该目录下，登陆用户的时候就会自动执行脚本。</p>
<h2 id="规范"><a href="#规范" class="headerlink" title="#  规范"></a>#  规范</h2><p>记得，传统上，所有全局环境变量要大写，注意，大小写是有区别的。</p>
<h2 id="定义"><a href="#定义" class="headerlink" title="#  定义"></a>#  定义</h2><p>export myname=’David’<br>export MYNAME=’David_Wu’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[David@localhost study]$ export MYNAME=&apos;David_Wu&apos;</div><div class="line">[David@localhost study]$ echo $MYNAME</div><div class="line">David_Wu</div><div class="line">[David@localhost study]$ echo $myname</div><div class="line">David</div></pre></td></tr></table></figure></p>
<h2 id="常用的全局变量"><a href="#常用的全局变量" class="headerlink" title="#  常用的全局变量"></a>#  常用的全局变量</h2><p>HOME目录<br>UID登陆用户ID<br>USER登陆用户<br>OSTYPE操作系统类似<br>HISTSIZE历史操作大小<br>HISTFILESIZE历史文件行数<br>TMOUT 超时退出时间<br>IFS系统分隔符</p>
<h2 id="取消全局变量"><a href="#取消全局变量" class="headerlink" title="#  取消全局变量"></a>#  取消全局变量</h2><p>unset MYNAME<br><figure class="highlight bash"><figcaption><span>控制台</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[David@localhost ~]$ <span class="built_in">export</span> MYNAME=David</div><div class="line">[David@localhost ~]$ <span class="built_in">echo</span> <span class="variable">$MYNAME</span></div><div class="line">David</div><div class="line">[David@localhost ~]$ <span class="built_in">unset</span> MYNAME</div><div class="line">[David@localhost ~]$ <span class="built_in">echo</span> <span class="variable">$MYNAME</span></div></pre></td></tr></table></figure></p>
<h2 id="用户环境变量和系统环境变量"><a href="#用户环境变量和系统环境变量" class="headerlink" title="#  用户环境变量和系统环境变量"></a>#  用户环境变量和系统环境变量</h2><p>ll ~ -al命令可以看到家目录下隐藏的用户环境变量<br>etc/profile就是系统环境变量</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/10/2014-03-10-linux-shell-programming-study-notes-a-comparison-of-methods-for-executing-shell-scripts/" itemprop="url">
                  Linux Shell编程学习笔记（一）执行SHELL脚本方法的比较
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Veröffentlicht am</span>
            <time itemprop="dateCreated" datetime="2014-03-10T12:40:00+08:00" content="2014-03-10">
              2014-03-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">in</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/bash/" itemprop="url" rel="index">
                    <span itemprop="name">bash</span>
                  </a>
                </span>

                
                
                  . 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/bash/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#近况<br>最近项目挺忙的，好久都没写博客技术分享了，这周五又是Deadline了。然后部门换了部门经理，挺有干劲的，因为特别有赶紧也对部门工作态度怠慢的人持裁人的想法。我是尽量为组内成员说些好话，虽然平时我自己也对他们的工作态度有些不满。但是裁人立马换人真不是解决问题的方法，至少不会短期内见效。<br>最近项目和linux Shell运维有关系，因此我也开始学习Shell脚本。最近的博文就更新这方面的吧。其实我还挺多料都拽着没时间整理发出来。等清闲下来，一定要好好整理一番。</p>
<h1 id="执行Shell脚本的几种方法"><a href="#执行Shell脚本的几种方法" class="headerlink" title="执行Shell脚本的几种方法"></a>执行Shell脚本的几种方法</h1><h2 id="script-name"><a href="#script-name" class="headerlink" title="./script_name"></a>./script_name</h2><p>该方法执行必须让脚本有执行权限，并且脚本在当前路径下执行。</p>
<h2 id="bash-sh-执行"><a href="#bash-sh-执行" class="headerlink" title="bash\sh 执行"></a>bash\sh 执行</h2><p>该方法执行可以不需要权限</p>
<h2 id="Source"><a href="#Source" class="headerlink" title="Source/."></a>Source/.</h2><p>用sourcce 或者一个.的方式执行，可以让脚本在当前shell内执行，不会新创建一个子shell，这样当前shell就能调用脚本中的变量和函数。<br>注意，exec与source不同，exec会结束掉当前的shell，创建一个新的进程，pid会与当前的shell一致。</p>
<h2 id="直接进入路径，输入脚本名运行（错误）"><a href="#直接进入路径，输入脚本名运行（错误）" class="headerlink" title="直接进入路径，输入脚本名运行（错误）"></a>直接进入路径，输入脚本名运行（错误）</h2><p>这样会无法执行，除非脚本在PATH下。比如node命令被我添加到了path中，那么就会执行。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="David Woo" />
          <p class="site-author-name" itemprop="name">David Woo</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/">
              <span class="site-state-item-count">92</span>
              <span class="site-state-item-name">Artikel</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">195</span>
                <span class="site-state-item-name">Kategorien</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">Tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">David Woo</span>
</div>

<div class="powered-by">
  Erstellt mit  <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
